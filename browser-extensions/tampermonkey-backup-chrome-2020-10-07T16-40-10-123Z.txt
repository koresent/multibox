{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"hide_cars","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259786},"enabled":true,"position":1,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/hide_cars.user.js","uuid":"49602d9f-bf3c-46df-89a8-87fc81709e36","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIGhpZGVfY2FycwovLyBAdmVyc2lvbiAgICAgICAgMS4wLjEKLy8gQG5hbWVzcGFjZSAgICAgIGtsYXZvZ29ua2kKLy8gQGRlc2NyaXB0aW9uICAgINCh0LrRgNGL0YLQuNC1INC80LDRiNC40L3QvtC6INCy0L4g0LLRgNC10LzRjyDQvdCw0LHQvtGA0LAg0YLQtdC60YHRgtCwCi8vIEBpbmNsdWRlICAgICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvZy8qCi8vIEBhdXRob3IgICAgICAgICByZ2FsbCwgRmVuZXgKLy8gPT0vVXNlclNjcmlwdD09CgpmdW5jdGlvbiBIaWRlQ2FycygpIHsKCXZhciBwYXJhbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoaWRlX2NhcnNfY2hlY2siKTsKCglpZiAobG9jYWxTdG9yYWdlWyJoaWRlQ2Fyc19TVEFUVVMiXSA9PSAnMScpCgkJcGFyYW0uY2hlY2tlZCA9IDE7CgllbHNlCgkJcmV0dXJuOwoKCXZhciBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzIikuY2xhc3NOYW1lOwoJaWYgKHN0YXR1cyA9PSAic3RlYWR5IikgewoJCWhpZGVjYXJzX3RvZ2dsZSgiaGlkZSIpOwoJCXJldHVybjsKCX0KCgl2YXIgeW91ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllcnMiKS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ5b3UiKVswXTsKCgkvLyBmaW5pc2hlZCBzdWNjZXNzZnVsbHkKCWlmICh5b3UuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgicmF0aW5nIilbMF0uc3R5bGUuZGlzcGxheSA9PSAiIikgewoJCWhpZGVjYXJzX3RvZ2dsZSgic2hvdyIpOwoJCXJldHVybjsKCX0KCgkvLyBmYWlsZWQgaW4gIk5vRXJyb3IiIG1vZGUKCXZhciBnYW1ldHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNnYW1lZGVzYyA+IHNwYW4iKTsKCWlmIChnYW1ldHlwZSAmJiBnYW1ldHlwZS5jbGFzc05hbWUgPT0gImdhbWV0eXBlLW5vZXJyb3IiKSB7CgkJdmFyIHJhY2VfZmFpbGVkX2ltZyA9IHlvdS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjYXIiKVswXS5xdWVyeVNlbGVjdG9yKCJ0Ym9keSA+IHRyID4gdGQ6bnRoLWNoaWxkKDIpID4gZGl2ID4gaW1nIik7CgkJaWYgKHJhY2VfZmFpbGVkX2ltZyAmJiByYWNlX2ZhaWxlZF9pbWcuY2xhc3NOYW1lID09ICJub2Vycm9yLWZhaWwiKSB7CgkJCWhpZGVjYXJzX3RvZ2dsZSgic2hvdyIpOwoJCQlyZXR1cm47CgkJfQoJfQp9CgpmdW5jdGlvbiBoaWRlY2Fyc190b2dnbGUoYWN0KXsKCXZhciBkc3AgPSAibm9uZSI7CglpZiAoYWN0ID09ICJzaG93IikgewoJCWNsZWFySW50ZXJ2YWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhpZGVfY2Fyc19mbGFnIikudmFsdWUpOwoJCWRzcCA9ICIiOwoJfQoJLyp2YXIgcGxheWVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInBsYXllciIpOwoJZm9yKHZhciBpPTA7aTxwbGF5ZXJzLmxlbmd0aDsgaSsrKQoJCXBsYXllcnNbaV0uc3R5bGUuZGlzcGxheSA9IGRzcDsKCSovCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVycycpLnN0eWxlLmRpc3BsYXkgPSBkc3A7Cn0KCmZ1bmN0aW9uIGNoYW5nZUhpZGVDYXJzKCkgewoJdmFyIHBhcmFtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhpZGVfY2Fyc19jaGVjayIpOwoJaWYgKHBhcmFtLmNoZWNrZWQpIHsKCQlsb2NhbFN0b3JhZ2VbJ2hpZGVDYXJzX1NUQVRVUyddID0gJzEnOwoJfQoJZWxzZSB7CgkJbG9jYWxTdG9yYWdlWydoaWRlQ2Fyc19TVEFUVVMnXSA9ICcwJzsKCX0KfQoKaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdLVFNfdGFnaGlkZScpKSB7Cgl2YXIgcGFyYW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhcmFtX3NoYWRvdyIpOwoJaWYocGFyYW1zKSB7CgkJdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQllbGVtLmlkID0gImhpZGVfY2Fyc19oaWRkZW4iOwoJCWVsZW0uaW5uZXJIVE1MID0gJzxpbnB1dCBpZD0iaGlkZV9jYXJzX2NoZWNrIiB0eXBlPSJjaGVja2JveCIgb25DaGFuZ2U9ImNoYW5nZUhpZGVDYXJzKCk7Ij48bGFiZWwgZm9yPSJoaWRlX2NhcnNfY2hlY2siPtCh0LrRgNGL0LLQsNGC0Ywg0LzQsNGI0LjQvdGLPC9sYWJlbD4nICsgJzxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJoaWRlX2NhcnNfZmxhZyI+JzsKCQkJCgkJcGFyYW1zLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sIHBhcmFtcyk7CgoJCXZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKCQlzY3JpcHQuaW5uZXJIVE1MID0gSGlkZUNhcnMgKyBjaGFuZ2VIaWRlQ2FycyArIGhpZGVjYXJzX3RvZ2dsZSArCgkJJyBkb2N1bWVudC5vYnNlcnZlKCJrZXlkb3duIiwgZnVuY3Rpb24oZXZlbnQpe2lmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleUNvZGUgPT0gMzgpIGhpZGVjYXJzX3RvZ2dsZSgic2hvdyIpO30pOyAnICsKCQknIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoaWRlX2NhcnNfZmxhZyIpLnZhbHVlID0gc2V0SW50ZXJ2YWwoIkhpZGVDYXJzKCkiLCA1MDApOyAnOwoJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKCX0KCQoJdmFyIHRtcF9lbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7Cgl0bXBfZWxlbS5pZCA9ICdLVFNfdGFnaGlkZSc7Cgl0bXBfZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0bXBfZWxlbSk7CQp9Cg=="},{"name":"SortResults","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259789},"enabled":true,"position":2,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/SortResults.user.js","uuid":"aa932d4e-cc12-4e25-8cee-f06921306357","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFNvcnRSZXN1bHRzCi8vIEB2ZXJzaW9uICAgICAgICAxLjAuMAovLyBAbmFtZXNwYWNlICAgICAga2xhdm9nb25raQovLyBAYXV0aG9yICAgICAgICAgbm92a29zdHlhCi8vIEBkZXNjcmlwdGlvbiAgICDQodC+0YDRgtC40YDQvtCy0LrQsCDRg9GH0LDRgdGC0L3QuNC60L7QsiDQsiDQt9Cw0LXQt9C00LUg0L/QviDQvNC10YHRgtCw0LwsINC60L7Qu9C40YfQtdGB0YLQstGDINC4INC/0YDQvtGG0LXQvdGC0YMg0L7RiNC40LHQvtC6LCDQvdC40LrRgywg0YDQtdC50YLQuNC90LPRgy4g0KHRh9GR0YLRh9C40Log0LjQs9GA0L7QutC+0LIg0LIg0LfQsNC10LfQtNC1Ci8vIEBpbmNsdWRlICAgICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvZy8qCi8vID09L1VzZXJTY3JpcHQ9PQpmdW5jdGlvbiBzb3J0KHNvcnRLZXkpCnsKCWZ1bmN0aW9uIGdldFByb2dyZXNzKGEpCgl7CgkJdmFyIGNhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQucmVwbGFjZSgicGxheWVyIiwgImNhciIpKTsKCQl2YXIgbGVmdCA9IHBhcnNlSW50KGNhci5zdHlsZS5sZWZ0KTsKCQlpZiAoaXNOYU4obGVmdCkpCgkJCWxlZnQgPSAwOwoJCXJldHVybiBsZWZ0OwoJfQoKCWZ1bmN0aW9uIGdldFBsYWNlKGEpCgl7CiAgICAgICAgCXZhciByYXRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhLmlkLnJlcGxhY2UoInBsYXllciIsICJyYXRpbmciKSk7CgkJaWYgKCFyYXRpbmcuY2hpbGROb2Rlc1swXSkgCQkKCQkJcmV0dXJuIDEwMDUwMCAtIGdldFByb2dyZXNzKGEpOwoJCWlmIChyYXRpbmcuZmlyc3RDaGlsZC5ub2RlVHlwZSA9PSAzKQkKCQkJcmV0dXJuIDEwMDUwMDsgCgkJcmV0dXJuIHBhcnNlSW50KHJhdGluZy5jaGlsZE5vZGVzWzBdLmZpcnN0Q2hpbGQuaW5uZXJIVE1MLDEwKSA7ICAgCgl9CgoJZnVuY3Rpb24gZ2V0RXJyb3JzKGEpCgl7CgkJdmFyIHN0YXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZC5yZXBsYWNlKCJwbGF5ZXIiLCAic3RhdHMiKSk7CgkJaWYgKCFzdGF0cyB8fCAhc3RhdHMuY2hpbGROb2Rlc1syXSkKCQkJcmV0dXJuIDEwMDUwMDsKCQlyZXR1cm4gc3RhdHMuY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzWzJdLmZpcnN0Q2hpbGQuaW5uZXJIVE1MLnJlcGxhY2UoIiwiLCAiLiIpOwoJfQoKCWZ1bmN0aW9uIGdldEVycm9yc0NvdW50KGEpCgl7CgkJdmFyIHN0YXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZC5yZXBsYWNlKCJwbGF5ZXIiLCAic3RhdHMiKSk7CgkJaWYgKCFzdGF0cyB8fCAhc3RhdHMuY2hpbGROb2Rlc1syXSkKCQkJcmV0dXJuIDEwMDUwMDsKCQlyZXR1cm4gc3RhdHMuY2hpbGROb2Rlc1syXS5maXJzdENoaWxkLmZpcnN0Q2hpbGQuaW5uZXJIVE1MOwoJfQoJCglmdW5jdGlvbiBnZXRSYXRpbmcoYSkKCXsKCQl2YXIgY2FyX3JhdGluZyA9IGEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY2FyX3JhdGluZyIpWzBdOwoJCWlmICghY2FyX3JhdGluZykKCQkJcmV0dXJuIDEwMDUwMDsKCQlyZXR1cm4gY2FyX3JhdGluZy50ZXh0Q29udGVudC5yZXBsYWNlKC9bXjAtOV0vLCAnJyk7Cgl9CgkKCWZ1bmN0aW9uIGdldE5pY2tuYW1lKGEpCgl7CgkJdmFyIG5pY2tfY29udGVudCA9IGEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmlja19jb250ZW50IilbMF07CgkJaWYgKG5pY2tfY29udGVudCkKCQkJcmV0dXJuIG5pY2tfY29udGVudC50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpOwoJCWVsc2UKCQkJcmV0dXJuICLQk9C+0YHRgtGMIjsKCX0KCglmdW5jdGlvbiBnZXREZWZhdWx0UG9zaXRpb24oYSkKCXsKCQlpZiAoYS5oYXNDbGFzc05hbWUoInlvdSIpKQoJCQlyZXR1cm4gLTE7CgkJcmV0dXJuIGEuaWQuc3BsaXQoInBsYXllciIpWzFdOwoJfQoKCXZhciBwbGF5ZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllcnMiKTsKCXZhciBhcnIgPSBbXTsKCWZvciAodmFyIGkgPSAwOyBpIDwgcGxheWVycy5jaGlsZE5vZGVzLmxlbmd0aDsgKytpKQoJCWFyci5wdXNoKHBsYXllcnMuY2hpbGROb2Rlc1tpXSk7CgoJdmFyIGtleVNlbGVjdG9yID0gZ2V0UGxhY2U7Cgl2YXIgaXNLZXlOdW1iZXIgPSB0cnVlOwoJc3dpdGNoIChzb3J0S2V5KQoJewoJCWNhc2UgInBvc2l0aW9uIjoKCQkJa2V5U2VsZWN0b3IgPSBnZXRQbGFjZTsKCQkJYnJlYWs7CgkJY2FzZSAiZXJyb3JzIjoKCQkJa2V5U2VsZWN0b3IgPSBnZXRFcnJvcnM7CgkJCWJyZWFrOwoJCWNhc2UgImVycm9yc0NvdW50IjoKCQkJa2V5U2VsZWN0b3IgPSBnZXRFcnJvcnNDb3VudDsKCQkJYnJlYWs7CgkJY2FzZSAicmF0aW5nIjoKCQkJa2V5U2VsZWN0b3IgPSBnZXRSYXRpbmc7CgkJCWJyZWFrOwoJCWNhc2UgIm5pY2tuYW1lIjoKCQkJa2V5U2VsZWN0b3IgPSBnZXROaWNrbmFtZTsKCQkJaXNLZXlOdW1iZXIgPSBmYWxzZTsKCQkJYnJlYWs7CgkJY2FzZSAiZGVmYXVsdCI6CgkJCWtleVNlbGVjdG9yID0gZ2V0RGVmYXVsdFBvc2l0aW9uOwoJCQlicmVhazsKCQljYXNlICJhdXRvIjoKCQkJdmFyIGJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhY3RpdmUtc29ydCIpOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2kpCgkJCQlidXR0b25zW2ldLnJlbW92ZUNsYXNzTmFtZSgiYWN0aXZlLXNvcnQiKTsKCQkJJCgicG9zaXRpb24iKS5hZGRDbGFzc05hbWUoImFjdGl2ZS1zb3J0Iik7CgkJCWJyZWFrOwoJfQoKCWFyci5zb3J0KAoJCWZ1bmN0aW9uKGEsIGIpCgkJewoJCQl2YXIgY29tcCA9IDA7CgkJCWlmIChpc0tleU51bWJlcikKCQkJCWNvbXAgPSBrZXlTZWxlY3RvcihhKSAtIGtleVNlbGVjdG9yKGIpOwoJCQllbHNlCgkJCXsKCQkJCWlmIChrZXlTZWxlY3RvcihhKSA+IGtleVNlbGVjdG9yKGIpKQoJCQkJCQljb21wID0gKzE7CgkJCQllbHNlIGlmIChrZXlTZWxlY3RvcihhKSA8IGtleVNlbGVjdG9yKGIpKQoJCQkJCWNvbXAgPSAtMTsKCQkJfQoJCQlpZiAoY29tcCA9PSAwKQoJCQkJY29tcCA9IGdldERlZmF1bHRQb3NpdGlvbihhKSAtIGdldERlZmF1bHRQb3NpdGlvbihiKTsKCQkJcmV0dXJuIGNvbXA7CgkJfQoJKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKQoJCXBsYXllcnMuYXBwZW5kQ2hpbGQoYXJyW2ldKTsKfQoKZnVuY3Rpb24gYXV0b1NvcnQoc2VuZGVyKQp7Cgl2YXIgaW50ZXJ2YWxJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnRlcnZhbElkIik7CglpZiAoc2VuZGVyLmNoZWNrZWQpCgkJaW50ZXJ2YWxJZC52YWx1ZSA9IHNldEludGVydmFsKCJzb3J0KCdhdXRvJykiLCA1MDApOwoJZWxzZQoJCWlmIChpbnRlcnZhbElkLnZhbHVlKQoJCQljbGVhckludGVydmFsKGludGVydmFsSWQudmFsdWUpOwp9CgpmdW5jdGlvbiBzb3J0Q2xpY2soc2VuZGVyKQp7CglpZiAoJCgiYXV0b3NvcnQiKS5jaGVja2VkKQoJCSQoImF1dG9zb3J0IikuY2xpY2soKTsKCWlmIChzZW5kZXIuaGFzQ2xhc3NOYW1lKCJhY3RpdmUtc29ydCIpKQoJewoJCXNlbmRlci5yZW1vdmVDbGFzc05hbWUoImFjdGl2ZS1zb3J0Iik7CgkJc29ydCgiZGVmYXVsdCIpOwoJfQoJZWxzZQoJewoJCXZhciBidXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYWN0aXZlLXNvcnQiKTsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2kpCgkJCWJ1dHRvbnNbaV0ucmVtb3ZlQ2xhc3NOYW1lKCJhY3RpdmUtc29ydCIpOwoJCXNlbmRlci5hZGRDbGFzc05hbWUoImFjdGl2ZS1zb3J0Iik7CgkJc29ydChzZW5kZXIuaWQpOwoJfQp9CgpmdW5jdGlvbiB1cGRhdGVTdGF0cygpCnsKCXZhciB0b3RhbENvdW50ID0gJCQoIi5wbGF5ZXIiKS5sZW5ndGg7Cgl2YXIgZ3Vlc3RzQ291bnQgPSB0b3RhbENvdW50OwoJdmFyIGJ5UmFuZyA9IFtdOwoJZm9yICh2YXIgaSA9IDk7IGkgPiAwOyAtLWkpCgl7CgkJdmFyIHByb2ZpbGVzID0gJCQoIi5wcm9maWxlLnJhbmciICsgaSk7CgkJdmFyIGNudCA9IHByb2ZpbGVzLmxlbmd0aDsKCQlpZiAoY250ID4gMCkKCQl7CgkJCXZhciBuYW1lcyA9IFtdOwoJCQlmb3IgKHZhciBqID0gMDsgaiA8IHByb2ZpbGVzLmxlbmd0aDsgKytqKQoJCQkJbmFtZXMucHVzaChwcm9maWxlc1tqXS50ZXh0Q29udGVudCkKCQkJbmFtZXMuc29ydCgpOwoJCQluYW1lcyA9IG5hbWVzLmpvaW4oIiwgIik7CgkJCWJ5UmFuZy5wdXNoKCI8IiArICJzcGFuIGNsYXNzPSdyYW5nIiArIGkgKyAiJyBzdHlsZT0nZm9udC13ZWlnaHQ6IGJvbGQ7JyB0aXRsZT0nIiArIG5hbWVzICsgIic+IiArIGNudCArICI8IiArICIvc3Bhbj4iKTsgLy8gb3BlcmEgc3Vja3MKCQl9CgkJZ3Vlc3RzQ291bnQgLT0gY250OwoJfQoJaWYgKGd1ZXN0c0NvdW50ID4gMCkKCQlieVJhbmcucHVzaChndWVzdHNDb3VudCk7CgkkKCJwbGF5ZXJzX2NvdW50IikuaW5uZXJIVE1MID0gIjxiPiIgKyB0b3RhbENvdW50ICsgIjwvYj4gPSAiICsgYnlSYW5nLmpvaW4oIiArICIpOwp9CmlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnS1RTX3NvcnRyZXN1bHRzJykgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImludml0ZSIpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5ZXJzIikpIHsKCXZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKCXNjcmlwdC5pbm5lckhUTUwgPSBzb3J0ICsgYXV0b1NvcnQgKyBzb3J0Q2xpY2sgKyB1cGRhdGVTdGF0cyArICdzZXRJbnRlcnZhbCgiKCIgKyB1cGRhdGVTdGF0cyArICIpKCkiLCAxMDAwKTsnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwoKCXZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgllbGVtLmlkID0gInNvcnQtcGFuZWwiOwoJZWxlbS5pbm5lckhUTUwgPQoJCSc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPicgKwoJCQknI3BsYXllcnMgeyBjbGVhcjogbGVmdDsgfScgKwoJCQknZGl2LnNvcnQtYnV0dG9uIHsgZmxvYXQ6IGxlZnQ7IHBhZGRpbmctdG9wOiAyMHB4OyB9JyArCgkJCSdkaXYuc29ydC1idXR0b24gc3Bhbjpob3ZlciB7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBjdXJzb3I6IHBvaW50ZXI7IH0nICsKCQkJJ2Rpdi5zb3J0LWJ1dHRvbiBzcGFuLmFjdGl2ZS1zb3J0IHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0nICsKCQknPC9zdHlsZT4nICsKCQknPGRpdiBzdHlsZT0icGFkZGluZy1sZWZ0OiAxMHB4OyB3aWR0aDogNjBweDsiIGNsYXNzPSJzb3J0LWJ1dHRvbiI+PHNwYW4gaWQ9InBvc2l0aW9uIiBvbmNsaWNrPSJzb3J0Q2xpY2sodGhpcykiPtC80LXRgdGC0L48L3NwYW4+PC9kaXY+JyArCgkJJzxkaXYgc3R5bGU9ImZsb2F0OiBsZWZ0OyB3aWR0aDogMjIwcHg7IHBhZGRpbmctdG9wOiAyMHB4OyI+JyArCgkJCSc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJhdXRvc29ydCIgb25jbGljaz0iYXV0b1NvcnQodGhpcykiPicgKwoJCQknPGxhYmVsIGZvcj0iYXV0b3NvcnQiIHN0eWxlPSJmb250LXdlaWdodDogbm9ybWFsIj4mbmJzcDvQvtCx0L3QvtCy0LvRj9GC0Ywg0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lg8L2xhYmVsPicgKwoJCQknPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImludGVydmFsSWQiPicgKwoJCSc8L2Rpdj4nICsKCQknPGRpdiBzdHlsZT0id2lkdGg6IDYwcHg7IiBjbGFzcz0ic29ydC1idXR0b24iPjxzcGFuIGlkPSJuaWNrbmFtZSIgb25jbGljaz0ic29ydENsaWNrKHRoaXMpIj7QvdC40Lo8L3NwYW4+PC9kaXY+JyArCgkJJzxkaXYgc3R5bGU9IndpZHRoOiA3NXB4OyIgY2xhc3M9InNvcnQtYnV0dG9uIj48c3BhbiBpZD0iZXJyb3JzQ291bnQiIG9uY2xpY2s9InNvcnRDbGljayh0aGlzKSI+0L7RiNC40LHQutC4PC9zcGFuPjwvZGl2PicgKwoJCSc8ZGl2IHN0eWxlPSJ3aWR0aDogODBweDsiIGNsYXNzPSJzb3J0LWJ1dHRvbiI+PHNwYW4gaWQ9ImVycm9ycyIgb25jbGljaz0ic29ydENsaWNrKHRoaXMpIj4lINC+0YjQuNCx0L7Qujwvc3Bhbj48L2Rpdj4nICsKCQknPGRpdiBjbGFzcz0ic29ydC1idXR0b24iPjxzcGFuIGlkPSJyYXRpbmciIG9uY2xpY2s9InNvcnRDbGljayh0aGlzKSI+0YDQtdC50YLQuNC90LM8L3NwYW4+PC9kaXY+JzsKCXZhciBwbGF5ZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllcnMiKTsKCXBsYXllcnMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbSwgcGxheWVycyk7CgoJdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWVsZW0uaWQgPSAic3RhdGlzdGljcyI7CgllbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjRjhGNEU2IjsKCWVsZW0uc3R5bGUubGluZUhlaWdodCA9ICIxLjZlbSI7CgllbGVtLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKCWVsZW0uaW5uZXJIVE1MID0KCQknPGRpdiBjbGFzcz0iciB0bCI+PGRpdiBjbGFzcz0idHIiPjxkaXYgY2xhc3M9ImJsIj48ZGl2IGNsYXNzPSJiciI+PGRpdiBjbGFzcz0icmMiPicgKwoJCSc8aDQ+0KHRgtCw0YLQuNGB0YLQuNC60LA8L2g0PicgKwoJCSfQmNCz0YDQvtC60L7QsjogPHNwYW4gaWQ9InBsYXllcnNfY291bnQiIHN0eWxlPSJjdXJzb3I6IGRlZmF1bHQ7Ij48Yj4wPC9iPjwvc3Bhbj4nICsKCQknPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JzsKCXZhciBpbnZpdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW52aXRlIik7CglpbnZpdGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbSwgaW52aXRlKTsKCgl2YXIgdG1wX2VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXRtcF9lbGVtLmlkID0gJ0tUU19zb3J0cmVzdWx0cyc7Cgl0bXBfZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0bXBfZWxlbSk7CQp9Cg=="},{"name":"RecentGames","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/","http*://klavogonki.ru/gamelist/","http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259791},"enabled":true,"position":3,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/RecentGames.user.js","uuid":"a309b7c4-3c04-4a92-8170-f754c2ac102d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgUmVjZW50R2FtZXMKLy8gQG5hbWVzcGFjZSAgICAga2xhdm9nb25raQovLyBAdmVyc2lvbiAgICAgICAxLjQuMAovLyBAZGVzY3JpcHRpb24gICDQmtC90L7Qv9C60Lgg0L3QsCDQs9C70LDQstC90L7QuSDRgdGC0YDQsNC90LjRhtC1INC4INC90LAg0YHRgtGA0LDQvdC40YbQtSDRgdC/0LjRgdC60LAg0LjQs9GAINC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINC30LDQtdC30LTQvtCyCi8vIEBpbmNsdWRlICAgICAgIGh0dHAqOi8va2xhdm9nb25raS5ydS8KLy8gQGluY2x1ZGUgICAgICAgaHR0cCo6Ly9rbGF2b2dvbmtpLnJ1L2dhbWVsaXN0LwovLyBAaW5jbHVkZSAgICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvZy8qCi8vIEBhdXRob3IgICAgICAgIExleGluMTMKLy8gPT0vVXNlclNjcmlwdD09CgpmdW5jdGlvbiBtYWluKCl7CiAgICB2YXIgbWF4R2FtZUNvdW50ID0gNTsKICAgIAogICAgaWYgKGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzX2xpbWl0J10pIHsKICAgICAgICBtYXhHYW1lQ291bnQgPSBNYXRoLm1heCgwLCBsb2NhbFN0b3JhZ2VbJ3JlY2VudF9nYW1lc19saW1pdCddKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2VuZXJhdGVOYW1lKGFHYW1lKSB7CiAgICAgICAgdmFyIGdhbWVUeXBlcyA9IHsKICAgICAgICAgICAgbm9ybWFsOiAnT9Cx0YvRh9C90YvQuScsIAogICAgICAgICAgICBhYnJhOiAn0JDQsdGA0LDQutCw0LTQsNCx0YDQsCcsCiAgICAgICAgICAgIHJlZmVyYXRzOiAn0K/QvdC00LXQutGBLtCg0LXRhNC10YDQsNGC0YsnLAogICAgICAgICAgICBub2Vycm9yOiAn0JHQtdC30L7RiNC40LHQvtGH0L3Ri9C5JywKICAgICAgICAgICAgbWFyYXRob246ICfQnNCw0YDQsNGE0L7QvScsCiAgICAgICAgICAgIGNoYXJzOiAn0JHRg9C60LLRiycsCiAgICAgICAgICAgIGRpZ2l0czogJ9Cm0LjRhNGA0YsnLAogICAgICAgICAgICBzcHJpbnQ6ICfQodC/0YDQuNC90YInLAogICAgICAgICAgICB2b2M6ICfQn9C+INGB0LvQvtCy0LDRgNGOJwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdmFyIHZpc2liaWxpdGllcyA9IHsKICAgICAgICAgICAgbm9ybWFsOiAn0L7RgtC60YDRi9GC0YvQuScsCiAgICAgICAgICAgIHByaXZhdGU6ICfQtNGA0YPQttC10YHQutC40LknLAogICAgICAgICAgICBwcmFjdGljZTogJ9C+0LTQuNC90L7Rh9C90YvQuScKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHZhciByYW5rcyA9IFsi0L3QvtCy0LjRh9C60LgiLCAi0LvRjtCx0LjRgtC10LvQuCIsICLRgtCw0LrRgdC40YHRgtGLIiwgItC/0YDQvtGE0LgiLCAi0LPQvtC90YnQuNC60LgiLCAi0LzQsNC90YzRj9C60LgiLCAi0YHRg9C/0LXRgNC80LXQvdGLIiwgItC60LjQsdC10YDQs9C+0L3RidC40LrQuCIsICLRjdC60YHRgtGA0LDQutC40LHQtdGA0YsiXTsgIAogICAgICAgIAogICAgICAgIHZhciBnYW1lVHlwZSA9IGdhbWVUeXBlc1thR2FtZS5wYXJhbXMuZ2FtZXR5cGVdOwogICAgICAgIHZhciBnYW1lVHlwZUNvZGUgPSBhR2FtZS5wYXJhbXMuZ2FtZXR5cGU7CiAgICAgICAgdmFyIHZvY05hbWUgPSBhR2FtZS5wYXJhbXMudm9jTmFtZTsKICAgICAgICB2YXIgdGltZW91dCA9IGFHYW1lLnBhcmFtcy50aW1lb3V0ICsgJyDRgdC10LouJzsKICAgICAgICB2YXIgdmlzaWJpbGl0eSA9IHZpc2liaWxpdGllc1thR2FtZS5wYXJhbXMudHlwZV07CiAgICAgICAgdmFyIGxldmVsRnJvbSA9IHJhbmtzW2FHYW1lLnBhcmFtcy5sZXZlbF9mcm9tIC0gMV07CiAgICAgICAgdmFyIGxldmVsVG8gPSByYW5rc1thR2FtZS5wYXJhbXMubGV2ZWxfdG8gLSAxXTsKICAgICAgICAKICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSJyZWNlbnQtZ2FtZS1uYW1lIGdhbWV0eXBlLScgKyBhR2FtZS5wYXJhbXMuZ2FtZXR5cGUgKyAnIj4nICsgKCh2b2NOYW1lID09ICcnKSA/IGdhbWVUeXBlIDogJ8KrJyArIHZvY05hbWUgKyAnwrsnKSArICc8L3NwYW4+JwogICAgICAgICAgICArICc8c3BhbiBjbGFzcz0icmVjZW50LWdhbWUtZGVzY3JpcHRpb24iPicgKyB2aXNpYmlsaXR5ICsgJywgJyArIHRpbWVvdXQKICAgICAgICAgICAgKyAnPHNwYW4gY2xhc3M9InJlY2VudC1nYW1lLXF1YWwiPicgKyAoYUdhbWUucGFyYW1zLnF1YWwgPyAnICjQuiknOiAnJykgKyAnPC9zcGFuPicKICAgICAgICAgICAgKyAoYUdhbWUucGFyYW1zLmxldmVsX2Zyb20gIT0gMSB8fCBhR2FtZS5wYXJhbXMubGV2ZWxfdG8gIT0gOSA/ICcgPHNwYW4gY2xhc3M9InJlY2VudC1nYW1lLWxldmVscyI+JyArIGxldmVsRnJvbSArICcgLSAnICsgbGV2ZWxUbyArICc8L3NwYW4+JyA6ICcnKQogICAgICAgICAgICArICc8L3NwYW4+JzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2VuZXJhdGVMaW5rKGFHYW1lKSB7CiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sKycvL2tsYXZvZ29ua2kucnUvY3JlYXRlLz8nCiAgICAgICAgICAgICsgJ2dhbWV0eXBlPScgKyBhR2FtZS5wYXJhbXMuZ2FtZXR5cGUKICAgICAgICAgICAgKyAoYUdhbWUucGFyYW1zLnZvY0lkICE9ICcnID8gJyZ2b2M9JyArIGFHYW1lLnBhcmFtcy52b2NJZCA6ICcnKQogICAgICAgICAgICArICcmdHlwZT0nICsgYUdhbWUucGFyYW1zLnR5cGUKICAgICAgICAgICAgKyAnJmxldmVsX2Zyb209JyArIGFHYW1lLnBhcmFtcy5sZXZlbF9mcm9tCiAgICAgICAgICAgICsgJyZsZXZlbF90bz0nICsgYUdhbWUucGFyYW1zLmxldmVsX3RvCiAgICAgICAgICAgICsgJyZ0aW1lb3V0PScgKyBhR2FtZS5wYXJhbXMudGltZW91dAogICAgICAgICAgICArIChhR2FtZS5wYXJhbXMucXVhbCA/ICcmcXVhbD0xJyA6ICcnKQogICAgICAgICAgICArICcmc3VibWl0PTEnOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGRHYW1lTGluayhlbGVtLCBhR2FtZSwgaWQpIHsKICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpLmNsYXNzTmFtZSA9ICdyZWNlbnQtZ2FtZSc7CiAgICAgICAgaWYgKGFHYW1lLnBpbikgewogICAgICAgICAgICBsaS5jbGFzc05hbWUgKz0gJyBwaW4tZ2FtZSc7CiAgICAgICAgfQogICAgICAgIGxpLmlkID0gJ3JlY2VudC1nYW1lLScgKyBpZDsKICAgICAgICBsaS5pbm5lckhUTUwgPSAKICAgICAgICAgICAgJzxkaXYgY2xhc3M9InJlY2VudC1nYW1lLWhhbmRsZSI+PGltZyBzcmM9Ii9pbWcvYmxhbmsuZ2lmIj48L2Rpdj4nCiAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9InJlY2VudC1nYW1lLWJ1dHRvbnMiPicKICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz0icmVjZW50LWdhbWUtcGluIj48aW1nIHNyYz0iL2ltZy9waW4ucG5nIiB0aXRsZT0i0JfQsNGE0LjQutGB0LjRgNC+0LLQsNGC0YwiIG9uY2xpY2s9InBpblJlY2VudEdhbWUoJyArIGlkICsgJykiPjwvZGl2PicKICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz0icmVjZW50LWdhbWUtZGVsZXRlIj48aW1nIHNyYz0iL2ltZy9jcm9zc19zbWFsbC5wbmciIHRpdGxlPSLQo9C00LDQu9C40YLRjCIgb25jbGljaz0iZGVsZXRlUmVjZW50R2FtZSgnICsgaWQgKyAnKTsiPjwvZGl2PicKICAgICAgICAgICAgKyAnPC9kaXY+JwogICAgICAgICAgICArICc8YSBocmVmPSInICsgZ2VuZXJhdGVMaW5rKGFHYW1lKSArICciPicgKyBnZW5lcmF0ZU5hbWUoYUdhbWUpICsgJzwvYT4nOwogICAgICAgIAogICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQobGkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRQaW5HYW1lQ291bnQoYUdhbWVMaXN0KSB7CiAgICAgICAgdmFyIG4gPSAwOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYUdhbWVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhR2FtZUxpc3RbaV0ucGluKSB7CiAgICAgICAgICAgICAgICBuKys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG47CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZUhpc3RvcnlDb250YWluZXIoKSB7CiAgICAgICAgcmVjZW50R2FtZXMgPSBnZXRSZWNlbnRHYW1lcygpOwogICAgICAgIHZhciBwaW5HYW1lQ291bnQgPSBnZXRQaW5HYW1lQ291bnQocmVjZW50R2FtZXMpOwogICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuaWQgPSAncmVjZW50LWdhbWVzLWNvbnRhaW5lcic7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjZW50R2FtZXMubGVuZ3RoICYmIGkgPCBtYXhHYW1lQ291bnQgKyBwaW5HYW1lQ291bnQ7IGkrKykgewogICAgICAgICAgICBhZGRHYW1lTGluayhkaXYsIHJlY2VudEdhbWVzW2ldLCBpKTsKICAgICAgICB9CiAgICAgICAgZGl2LmlubmVySFRNTCA9ICc8dWwgaWQ9InJlY2VudC1nYW1lcyI+JyArIGRpdi5pbm5lckhUTUwgKyAnPC91bD48ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+JzsKCiAgICAgICAgcmV0dXJuIGRpdjsgICAKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlR2FtZVBhcmFtcyAoKSB7CiAgICAgICAgdmFyIGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZWRlc2MnKTsKICAgICAgICBpZiAoIWRlc2MpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCcjZ2FtZWRlc2MgZWxlbWVudCBub3QgZm91bmQuJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3BhbiA9IGRlc2MucXVlcnlTZWxlY3Rvcignc3BhbicpOwogICAgICAgIGlmICghc3BhbikgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJyNnYW1lZGVzYyBzcGFuIGVsZW1lbnQgbm90IGZvdW5kLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRlc2NUZXh0ID0gZGVzYy50ZXh0Q29udGVudDsKICAgICAgICBpZiAoL9GB0L7RgNC10LLQvdC+0LLQsNC90LjQtS8udGVzdChkZXNjVGV4dCkgfHwgIW1heEdhbWVDb3VudCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgZ2FtZVR5cGUgPSBzcGFuLmNsYXNzTmFtZS5zcGxpdCgnLScpLnBvcCgpOwogICAgICAgIHZhciB2b2NOYW1lID0gZ2FtZVR5cGUgPT09ICd2b2MnID8gc3Bhbi50ZXh0Q29udGVudC5yZXBsYWNlKC9bwqvCu10vZywgJycpIDogJyc7CiAgICAgICAgdmFyIHZvY0lkID0gZ2FtZVR5cGUgPT09ICd2b2MnID8gcGFyc2VJbnQoc3Bhbi5xdWVyeVNlbGVjdG9yKCdhJykuaHJlZi5tYXRjaCgvdm9jc1wvKFxkKykvKVsxXSkgOiAnJzsKCiAgICAgICAgdmFyIHR5cGUgPSAnbm9ybWFsJzsKICAgICAgICBpZiAoL9C+0LTQuNC90L7Rh9C90YvQuS8udGVzdChkZXNjVGV4dCkpIHsKICAgICAgICAgICAgdHlwZSA9ICdwcmFjdGljZSc7CiAgICAgICAgfSBlbHNlIGlmICgv0LTRgNGD0LfRjNGP0LzQuC8udGVzdChkZXNjVGV4dCkpIHsKICAgICAgICAgICAgdHlwZSA9ICdwcml2YXRlJzsKICAgICAgICB9CgogICAgICAgIHZhciBsZXZlbEZyb20gPSAxOwogICAgICAgIHZhciBsZXZlbFRvID0gOTsKICAgICAgICB2YXIgbWF0Y2hlcyA9IGRlc2NUZXh0Lm1hdGNoKC/QtNC70Y8gKFxTKynigJMoXFMrKSwvKTsKICAgICAgICB2YXIgcmFua3MgPSB7CiAgICAgICAgICAgICfQvdC+0LLQuNGH0LrQvtCyJzogMSwKICAgICAgICAgICAgJ9C70Y7QsdC40YLQtdC70LXQuSc6IDIsCiAgICAgICAgICAgICfRgtCw0LrRgdC40YHRgtC+0LInOiAzLAogICAgICAgICAgICAn0L/RgNC+0YTQuCc6IDQsCiAgICAgICAgICAgICfQs9C+0L3RidC40LrQvtCyJzogNSwKICAgICAgICAgICAgJ9C80LDQvdGM0Y/QutC+0LInOiA2LAogICAgICAgICAgICAn0YHRg9C/0LXRgNC80LXQvdC+0LInOiA3LAogICAgICAgICAgICAn0LrQuNCx0LXRgNCz0L7QvdGJ0LjQutC+0LInOiA4LAogICAgICAgICAgICAn0Y3QutGB0YLRgNCw0LrQuNCx0LXRgNC+0LInOiA5LAogICAgICAgIH07CiAgICAgICAgaWYgKG1hdGNoZXMpIHsKICAgICAgICAgICAgbGV2ZWxGcm9tID0gcmFua3NbbWF0Y2hlc1sxXV07CiAgICAgICAgICAgIGxldmVsVG8gPSByYW5rc1ttYXRjaGVzWzJdXTsKICAgICAgICB9CgogICAgICAgIG1hdGNoZXMgPSBkZXNjVGV4dC5tYXRjaCgv0YLQsNC50LzQsNGD0YJccyhcZCspXHMo0YHQtdC6fNC80LjQvSkvKTsKICAgICAgICB2YXIgdGltZW91dCA9IG1hdGNoZXNbMl0gPT09ICfRgdC10LonID8gcGFyc2VJbnQobWF0Y2hlc1sxXSkgOiBwYXJzZUludChtYXRjaGVzWzFdKSAqIDYwOwogICAgICAgIC8vIE9NRwogICAgICAgIHZhciBxdWFsaWZpY2F0aW9uID0gL9C60LLQsNC70LjRhNC40LrQsNGG0LjRjy8udGVzdChkZXNjVGV4dCkgPyAxIDogMDsKCiAgICAgICAgdmFyIGxhc3RHYW1lUGFyYW1zID0gewogICAgICAgICAgICBnYW1ldHlwZTogZ2FtZVR5cGUsCiAgICAgICAgICAgIHZvY05hbWU6IHZvY05hbWUsCiAgICAgICAgICAgIHZvY0lkOiB2b2NJZCwKICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgbGV2ZWxfZnJvbTogbGV2ZWxGcm9tLAogICAgICAgICAgICBsZXZlbF90bzogbGV2ZWxUbywKICAgICAgICAgICAgdGltZW91dDogdGltZW91dCwKICAgICAgICAgICAgcXVhbDogcXVhbGlmaWNhdGlvbiwKICAgICAgICAgICAgLy8gQSBsZWdhY3kgcHJvcGVydHksIEkgZ3Vlc3M6CiAgICAgICAgICAgIHByZW1pdW1fYWJyYTogMCwKICAgICAgICB9OwoKICAgICAgICB2YXIgc0dhbWVQYXJhbXMgPSBKU09OLnN0cmluZ2lmeShsYXN0R2FtZVBhcmFtcyk7CiAgICAgICAgdmFyIGdhbWVMaXN0ID0gZ2V0UmVjZW50R2FtZXMoKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZ2FtZUxpc3RbaV0ucGFyYW1zKSA9PSBzR2FtZVBhcmFtcykgewogICAgICAgICAgICAgICAgaWYgKGdhbWVMaXN0W2ldLnBpbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZ2FtZUxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgcGluR2FtZUNvdW50ID0gZ2V0UGluR2FtZUNvdW50KGdhbWVMaXN0KTsKICAgICAgICB3aGlsZSAoZ2FtZUxpc3QubGVuZ3RoID49IG1heEdhbWVDb3VudCArIHBpbkdhbWVDb3VudCkgewogICAgICAgICAgICBnYW1lTGlzdC5wb3AoKTsKICAgICAgICB9CgogICAgICAgIHZhciBsYXN0R2FtZSA9IHsKICAgICAgICAgICAgcGFyYW1zOiBsYXN0R2FtZVBhcmFtcywKICAgICAgICAgICAgaWQ6IC0xLAogICAgICAgICAgICBwaW46IDAKICAgICAgICB9OwoKICAgICAgICBnYW1lTGlzdC5zcGxpY2UocGluR2FtZUNvdW50LCAwLCBsYXN0R2FtZSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlY2VudF9nYW1lcycsIEpTT04uc3RyaW5naWZ5KGdhbWVMaXN0KSk7CiAgICB9CgogICAgaWYgKC9odHRwcz86XC9cL2tsYXZvZ29ua2kucnVcL2dcL1w/Z21pZD0vLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgICB2YXIgZ2FtZUxvYWRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZWxvYWRpbmcnKTsKICAgICAgICBpZiAoIWdhbWVMb2FkaW5nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignI2dhbWVsb2FkaW5nIGVsZW1lbnQgbm90IGZvdW5kLicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGdhbWVMb2FkaW5nLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgewogICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICBzYXZlR2FtZVBhcmFtcygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShnYW1lTG9hZGluZywgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNhdmVHYW1lUGFyYW1zKCk7CiAgICAgICAgfQogICAgfQoKICAgIGlmICgvXmh0dHBzPzpcL1wva2xhdm9nb25raS5ydVwvJC8udGVzdChsb2NhdGlvbi5ocmVmKSkgewogICAgICAgIHZhciBkaXYgPSBjcmVhdGVIaXN0b3J5Q29udGFpbmVyKCk7CiAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZCcpOwogICAgICAgIGUuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICBzb3J0YWJsZVJlY2VudEdhbWVzKCk7CiAgICB9CgogICAgaWYgKC9odHRwcz86XC9cL2tsYXZvZ29ua2kucnVcL2dhbWVsaXN0XC8vLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgICB2YXIgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIG9wdC5pZCA9ICdyZWNlbnQtZ2FtZXMtb3B0aW9ucyc7CiAgICAgICAgCiAgICAgICAgdmFyIGNvdW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIGNvdW50LmlkID0gJ3JlY2VudC1nYW1lcy1jb3VudCc7CiAgICAgICAgY291bnQuaW5uZXJIVE1MID0gbWF4R2FtZUNvdW50OwogICAgICAgIAogICAgICAgIHZhciBkZWMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgZGVjLmlkID0gJ3JlY2VudC1nYW1lcy1jb3VudC1kZWMnOwogICAgICAgIGRlYy5pbm5lckhUTUwgPSAnJiM5NjY4JzsKICAgICAgICAKICAgICAgICB2YXIgaW5jID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIGluYy5pZCA9ICdyZWNlbnQtZ2FtZXMtY291bnQtaW5jJzsKICAgICAgICBpbmMuaW5uZXJIVE1MID0gJyYjOTY1OCc7CiAgICAgICAgCiAgICAgICAgaW5jLm9ic2VydmUoImNsaWNrIiwgZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIG1heEdhbWVDb3VudCsrOwogICAgICAgICAgICBjb3VudC5pbm5lckhUTUwgPSBtYXhHYW1lQ291bnQ7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzX2xpbWl0J10gPSBtYXhHYW1lQ291bnQ7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgZGVjLm9ic2VydmUoImNsaWNrIiwgZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIGlmIChtYXhHYW1lQ291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICBtYXhHYW1lQ291bnQtLTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb3VudC5pbm5lckhUTUwgPSBtYXhHYW1lQ291bnQ7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzX2xpbWl0J10gPSBtYXhHYW1lQ291bnQ7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgb3B0LmlubmVySFRNTCA9ICfQmNGB0YLQvtGA0LjRjzogJzsKICAgICAgICBvcHQuYXBwZW5kQ2hpbGQoZGVjKTsKICAgICAgICBvcHQuYXBwZW5kQ2hpbGQoY291bnQpOwogICAgICAgIG9wdC5hcHBlbmRDaGlsZChpbmMpOwoKICAgICAgICB2YXIgZGl2ID0gY3JlYXRlSGlzdG9yeUNvbnRhaW5lcigpOwogICAgICAgIHZhciBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ2FtZWxpc3QtY3JlYXRlJylbMF07CiAgICAgICAgZS5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Zvcm0nKVswXS5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgIAogICAgICAgIHNvcnRhYmxlUmVjZW50R2FtZXMoKTsKICAgIH0KICAgIAogICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIHN0eWxlLmlubmVySFRNTCA9IAogICAgICAgICcjcmVjZW50LWdhbWVzLWNvbnRhaW5lciB7YmFja2dyb3VuZDojRkZGO30nCiAgICAgICAgKyAnI3JlY2VudC1nYW1lcy1jb250YWluZXIgdWwge21hcmdpbjowOyBwYWRkaW5nOjA7fScKICAgICAgICArICcucmVjZW50LWdhbWUge2xpc3Qtc3R5bGUtdHlwZTpub25lOyBwb3NpdGlvbjpyZWxhdGl2ZTsgZGlzcGxheTppbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOnRvcDsgcGFkZGluZzowOyBtYXJnaW46NnB4IDJweCAycHg7IGJvcmRlcjoxcHggc29saWQgI0NDQzt9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS5waW4tZ2FtZSB7bWFyZ2luOjRweCAycHggMHB4OyBib3JkZXI6M3B4IGRvdWJsZSAjQUFBO30nCiAgICAgICAgKyAnLnJlY2VudC1nYW1lOmhvdmVyIHtib3JkZXI6MXB4IHNvbGlkICM2NjY7IGJhY2tncm91bmQ6I0Y0RjRGNDt9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS5waW4tZ2FtZTpob3ZlciB7Ym9yZGVyOjNweCBkb3VibGUgIzg4OH0nCiAgICAgICAgKyAnLnJlY2VudC1nYW1lIGEge3RleHQtZGVjb3JhdGlvbjpub25lOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo1cHg7IGRpc3BsYXk6YmxvY2s7fScKICAgICAgICArICcucmVjZW50LWdhbWUtbmFtZSB7ZGlzcGxheTpibG9jazsgZm9udC13ZWlnaHQ6Ym9sZDt9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS1kZXNjcmlwdGlvbiB7ZGlzcGxheTpibG9jazsgZm9udC1zaXplOjExcHg7IGNvbG9yOiMwMDA7fScKICAgICAgICArICcucmVjZW50LWdhbWUtcXVhbCB7Y29sb3I6I0YwMDt9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS1sZXZlbHMge2Rpc3BsYXk6YmxvY2s7IGZvbnQtc2l6ZToxMXB4OyBjb2xvcjojMDAwO30nCiAgICAgICAgKyAnLnJlY2VudC1nYW1lLWhhbmRsZSB7ZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowcHg7IHRvcDowcHg7IHdpZHRoOjE2cHg7IGhlaWdodDoxNnB4OyB6LWluZGV4OjEwMDsgY3Vyc29yOm1vdmU7IGJhY2tncm91bmQ6dHJhbnNwYXJlbnQgdXJsKCJodHRwczovL2tsYXZvZ29ua2kucnUvaW1nL2RyYWdkcm9wMi5naWYiKSBuby1yZXBlYXQgMCAwIWltcG9ydGFudDt9JwogICAgICAgICsgJy5waW4tZ2FtZSAucmVjZW50LWdhbWUtaGFuZGxlIHtkaXNwbGF5OmJsb2NrfScKICAgICAgICArICcucmVjZW50LWdhbWUtYnV0dG9ucyB7ZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6MHB4O30nCiAgICAgICAgKyAnLnJlY2VudC1nYW1lLWJ1dHRvbnMgaW1nOmhvdmVyIHtvcGFjaXR5OjE7IGN1cnNvcjpwb2ludGVyO30nCiAgICAgICAgKyAnLnJlY2VudC1nYW1lLWJ1dHRvbnMgZGl2IHttYXJnaW4tbGVmdDozcHg7fScKICAgICAgICArICcucmVjZW50LWdhbWU6aG92ZXIgLnJlY2VudC1nYW1lLWJ1dHRvbnMge2Rpc3BsYXk6YmxvY2t9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS1kZWxldGUge3Bvc2l0aW9uOnJlbGF0aXZlOyBsZWZ0Oi00cHg7IHRvcDotNXB4OyB3aWR0aDo3cHg7IGhlaWdodDo3cHg7IGZsb2F0OmxlZnQ7fScKICAgICAgICArICcucmVjZW50LWdhbWUtZGVsZXRlIGltZyB7b3BhY2l0eTowLjE1OyBwb3NpdGlvbjphYnNvbHV0ZTsgY2xpcDpyZWN0KDVweCwgMTFweCwgMTJweCwgNHB4KTt9JwogICAgICAgICsgJy5yZWNlbnQtZ2FtZS1waW4ge2Zsb2F0OmxlZnQ7IG1hcmdpbi1sZWZ0OjJweDt9JwogICAgICAgICsgJy5waW4tZ2FtZSAucmVjZW50LWdhbWUtcGluIHtkaXNwbGF5Om5vbmU7fScKICAgICAgICArICcucmVjZW50LWdhbWUtcGluIGltZyB7bWF4LXdpZHRoOjdweDsgbWF4LWhlaWdodDo3cHg7IG9wYWNpdHk6MC4zfScKICAgICAgICArICcjcmVjZW50LWdhbWVzLW9wdGlvbnMge2ZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyBtYXJnaW4tbGVmdDoxMHB4O30nCiAgICAgICAgKyAnI3JlY2VudC1nYW1lcy1jb3VudCB7bWFyZ2luOjBweCAzcHg7fScKICAgICAgICArICcjcmVjZW50LWdhbWVzLWNvdW50LWluYyB7Y3Vyc29yOnBvaW50ZXI7fScKICAgICAgICArICcjcmVjZW50LWdhbWVzLWNvdW50LWRlYyB7Y3Vyc29yOnBvaW50ZXI7fScKICAgICAgICA7ICAKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpOwp9CgpmdW5jdGlvbiBnZXRSZWNlbnRHYW1lcygpIHsKICAgIHZhciBnYW1lTGlzdCA9IGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzJ10gPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzJ10pIDogW107CiAgICAvLyBVcGRhdGUgb2xkIGNvbmZpZ3VyYXRpb24gaWYgbmVlZGVkOgogICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgaW4gdGhlIGZ1dHVyZSB2ZXJzaW9uLgogICAgZ2FtZUxpc3QgPSBnYW1lTGlzdC5tYXAoZnVuY3Rpb24gKGdhbWUpIHsKICAgICAgICBpZiAoZ2FtZS5wYXJhbXMucXVhbCA9PT0gJ29uJyB8fCBnYW1lLnBhcmFtcy5xdWFsID09PSAnJykgewogICAgICAgICAgICBnYW1lLnBhcmFtcy5xdWFsID0gZ2FtZS5wYXJhbXMucXVhbCA9PT0gJ29uJyA/IDEgOiAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZ2FtZTsKICAgIH0pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGdhbWVMaXN0W2ldLmlkID0gaTsKICAgIH0KICAgIHJldHVybiBnYW1lTGlzdDsKfQoKZnVuY3Rpb24gaW5kZXhPZlJlY2VudEdhbWVJZChpZCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNlbnRHYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChyZWNlbnRHYW1lc1tpXS5pZCA9PSBpZCkgewogICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIGRlbGV0ZVJlY2VudEdhbWUoaWQpIHsKICAgIHZhciBnYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlbnQtZ2FtZS0nICsgaWQpOwogICAgZ2FtZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnYW1lRWxlbWVudCk7CiAgICB2YXIgZ2FtZU9iamVjdCA9IHJlY2VudEdhbWVzLnNwbGljZShpbmRleE9mUmVjZW50R2FtZUlkKGlkKSwgMSk7CiAgICBsb2NhbFN0b3JhZ2VbJ3JlY2VudF9nYW1lcyddID0gSlNPTi5zdHJpbmdpZnkocmVjZW50R2FtZXMpOwogICAgcmV0dXJuIGdhbWVPYmplY3RbMF07Cn0KCmZ1bmN0aW9uIHBpblJlY2VudEdhbWUoaWQpIHsKICAgIAogICAgZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoJyhcXHN8XiknICsgY2xhc3NOYW1lICsgJyhcXHN8JCknKSk7CiAgICB9CiAgICAKICAgIHZhciBnYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlbnQtZ2FtZS0nICsgaWQpOwogICAgdmFyIGdhbWVFbGVtZW50TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlY2VudC1nYW1lJyk7CiAgICAKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FtZUVsZW1lbnRMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCEoaGFzQ2xhc3MoZ2FtZUVsZW1lbnRMaXN0W2ldLCAncGluLWdhbWUnKSkpIHsKICAgICAgICAgICAgZ2FtZUVsZW1lbnQuY2xhc3NOYW1lICs9ICcgcGluLWdhbWUnOwogICAgICAgICAgICBpZiAocmVjZW50R2FtZXNbaV0uaWQgPT0gaWQpIHsKICAgICAgICAgICAgICAgIHJlY2VudEdhbWVzW2ldLnBpbiA9IDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZ2FtZU9iamVjdCA9IGRlbGV0ZVJlY2VudEdhbWUoaWQpOwogICAgICAgICAgICAgICAgZ2FtZU9iamVjdC5waW4gPSAxOyAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZ2FtZUVsZW1lbnRMaXN0W2ldLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhbWVFbGVtZW50LCBnYW1lRWxlbWVudExpc3RbaV0pOwogICAgICAgICAgICAgICAgcmVjZW50R2FtZXMuc3BsaWNlKGksIDAsIGdhbWVPYmplY3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgIHNvcnRhYmxlUmVjZW50R2FtZXMoKTsKICAgIGxvY2FsU3RvcmFnZVsncmVjZW50X2dhbWVzJ10gPSBKU09OLnN0cmluZ2lmeShyZWNlbnRHYW1lcyk7Cn0KCmZ1bmN0aW9uIHNvcnRhYmxlUmVjZW50R2FtZXMoKSB7CiAgICBTb3J0YWJsZS5jcmVhdGUoJ3JlY2VudC1nYW1lcycsIHsKICAgICAgICBvdmVybGFwOiAnaG9yaXpvbnRhbCcsIAogICAgICAgIGNvbnN0cmFpbnQ6ICdob3Jpem9udGFsJywgCiAgICAgICAgb25seTogJ3Bpbi1nYW1lJywgCiAgICAgICAgaGFuZGxlOiAncmVjZW50LWdhbWUtaGFuZGxlJywKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgdmFyIGlkID0gL1xkKyQvLmV4ZWMoZWwuaWQpWzBdOwogICAgICAgICAgICB2YXIgb2xkSW5kZXggPSBpbmRleE9mUmVjZW50R2FtZUlkKGlkKTsKICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gJCQkKCcjcmVjZW50LWdhbWVzIC5yZWNlbnQtZ2FtZScpLmluZGV4KGVsKTsKICAgICAgICAgICAgcmVjZW50R2FtZXMuc3BsaWNlKG5ld0luZGV4LCAwLCByZWNlbnRHYW1lcy5zcGxpY2Uob2xkSW5kZXgsIDEpWzBdKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlWydyZWNlbnRfZ2FtZXMnXSA9IEpTT04uc3RyaW5naWZ5KHJlY2VudEdhbWVzKTsKICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gYWRkU2NyaXB0KHNvdXJjZSkgewogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsKICAgIHNjcmlwdC5pbm5lckhUTUwgPSBzb3VyY2U7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7ICAgIAp9CgpmdW5jdGlvbiBleGVjU2NyaXB0KHNvdXJjZSkgewogICAgaWYgKHR5cGVvZiBzb3VyY2UgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHNvdXJjZSA9ICcoJyArIHNvdXJjZSArICcpKCk7JzsKICAgIH0KICAgIAogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsKICAgIHNjcmlwdC5pbm5lckhUTUwgPSBzb3VyY2U7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7Cn0KCmlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnS1RTX1JlY2VudEdhbWVzJykpIHsKCWFkZFNjcmlwdCgndmFyIHJlY2VudEdhbWVzO1xuJyArIGdldFJlY2VudEdhbWVzICsgaW5kZXhPZlJlY2VudEdhbWVJZCArIGRlbGV0ZVJlY2VudEdhbWUgKyBwaW5SZWNlbnRHYW1lICsgc29ydGFibGVSZWNlbnRHYW1lcyk7CglleGVjU2NyaXB0KG1haW4pOwoJCgl2YXIgdG1wX2VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXRtcF9lbGVtLmlkID0gJ0tUU19SZWNlbnRHYW1lcyc7Cgl0bXBfZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0bXBfZWxlbSk7CQp9Cg=="},{"name":"KG_TimeoutAlert","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259802},"enabled":true,"position":4,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_TimeoutAlert.user.js","uuid":"43d0cb3b-d251-4197-a4cb-5296f4b51054","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEtHX1RpbWVvdXRBbGVydAovLyBAYXV0aG9yICAgICAgQW5kcmVfTWFjYXJlbm8sIEZlbmV4LCB1bjRnaXZlbiwgYWdpbGUKLy8gQHZlcnNpb24gICAgIDMuMS4wCi8vIEBkZXNjcmlwdGlvbiDQl9Cy0YPQutC+0LLQvtC1INC+0L/QvtCy0LXRidC10L3QuNC1INC+INGB0YLQsNGA0YLQtSDQuNCz0YDRiwovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9rbGF2b2dvbmtpLnJ1L2cvKgovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIHRpbWVvdXRBbGVydCgpIHsKICB2YXIgc291bmQgPSBuZXcgQXVkaW8oJy90eXBvLm1wMycpOwoKICB2YXIgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lZGVzYycpOwogIGlmICghZGVzYykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJyNnYW1lZGVzYyBlbGVtZW50IG5vdCBmb3VuZC4nKTsKICB9CgogIHZhciBtYXRjaGVzID0gZGVzYy50ZXh0Q29udGVudC5tYXRjaCgv0YLQsNC50LzQsNGD0YJccyhcZCspXHMo0YHQtdC6fNC80LjQvSkvKTsKICAvLyBObyBhbGVydCBpZiB0aGUgZ2FtZSB0aW1lb3V0IGxlc3MgdGhhbiA0NSBzZWNvbmRzOgogIGlmIChtYXRjaGVzICYmIG1hdGNoZXNbMV0gPCA0NSAmJiBtYXRjaGVzWzJdID09PSAn0YHQtdC6JykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIHRpbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FpdGluZ190aW1lb3V0Jyk7CiAgaWYgKCF0aW1lQ29udGFpbmVyKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJyN3YWl0aW5nX3RpbWVvdXQgZWxlbWVudCBub3QgZm91bmQuJyk7CiAgfQoKICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIHZhciByZW1haW5pbmdUaW1lID0gdGltZUNvbnRhaW5lci50ZXh0Q29udGVudC5tYXRjaCgvKFxkezJ9KS4oXGR7Mn0pLyk7CiAgICBpZiAoIXJlbWFpbmluZ1RpbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZW1haW5pbmcgdGltZSB3YXMgbm90IHBhcnNlZC4nKTsKICAgIH0KCiAgICAvLyBNYWtlIGEgc291bmQgYWxlcnQgaW4g4omIIDE3IHNlY29uZHMgYmVmb3JlIHRoZSBnYW1lIHN0YXJ0OgogICAgaWYgKHBhcnNlSW50KHJlbWFpbmluZ1RpbWVbMV0pID09PSAwICYmIHBhcnNlSW50KHJlbWFpbmluZ1RpbWVbMl0pIDwgMTgpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgIHNvdW5kLnBsYXkoKTsKICAgIH0KICB9LCA1MDApOwp9Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICB2YXIgaW5qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgaW5qZWN0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcoJyArIHRpbWVvdXRBbGVydC50b1N0cmluZygpICsgJykoKScpKTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGluamVjdCk7Cn0pOwo="},{"name":"KG_AutoNextRace","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259804},"enabled":true,"position":5,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_AutoNextRace.user.js","uuid":"095de3a6-4f0d-461a-a2e6-502fd08f0eea","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBLR19BdXRvTmV4dFJhY2UKLy8gQG5hbWVzcGFjZSAgICBrbGF2b2dvbmtpCi8vIEB2ZXJzaW9uICAgICAgMS41LjAKLy8gQGRlc2NyaXB0aW9uICDQlNC+0LHQsNCy0LvRj9C10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQvtCz0L4g0YHRgtCw0YDRgtCwINC30LDQtdC30LTQsCDQuCDQsNCy0YLQvtGB0L7Qt9C00LDQvdC40Y8g0YHQu9C10LTRg9GO0YnQtdCz0L4g0L/QvtGB0LvQtSDQvdCw0LHQvtGA0LAKLy8gQGF1dGhvciAgICAgICBQaGVtbWVyCi8vIEBpbmNsdWRlICAgICAgaHR0cCo6Ly9rbGF2b2dvbmtpLnJ1L2cvKgovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIG1haW4oKXsKCXZhciBpc0NvbXBldGl0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVkZXNjJykuaW5uZXJUZXh0Lm1hdGNoKC/QntCx0YvRh9C90YvQuSwg0YHQvtGA0LXQstC90L7QstCw0L3QuNC1LykgIT09IG51bGw7CglpZiAoaXNDb21wZXRpdGlvbikgcmV0dXJuOwoJdmFyIHBhcmFtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYXJhbV9zaGFkb3ciKTsKCXZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgllbGVtLmlkID0gImF1dG9fbmV4dCI7CgllbGVtLmlubmVySFRNTCA9ICc8aW5wdXQgaWQ9ImF1dG9fbmV4dF9jaGVjayIgdHlwZT0iY2hlY2tib3giPjxsYWJlbCBmb3I9ImF1dG9fbmV4dF9jaGVjayI+0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0LjQs9GA0LDRgtGMINC10YnQtSDRgNCw0Lc8L2xhYmVsPic7CglwYXJhbXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbSwgcGFyYW1zKTsKCXZhciBjaGJBdXRvTmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdXRvX25leHRfY2hlY2siKTsKCWNoYkF1dG9OZXh0LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgY2hiQ2hhbmdlZCwgZmFsc2UpOwoKCWlmIChsb2NhbFN0b3JhZ2UuYXV0b05leHRfU1RBVFVTID09ICcxJyl7CgkJY2hiQXV0b05leHQuY2hlY2tlZCA9IDE7CgkJZ2FtZS5ob3N0U3RhcnQoKTsKCX0KCgl2YXIgc2NvcmVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJwYW5lbC1zY29yZXMtY29udGFpbmVyJyApOwoJdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoQ2hlY2tSYXRpbmcpOwoJb2JzZXJ2ZXIub2JzZXJ2ZShzY29yZXMsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pOwoKCWZ1bmN0aW9uIENoZWNrUmF0aW5nKCl7CgkJdmFyIHJhdGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wbGF5ZXIueW91IC5yYXRpbmciICk7CgkJaWYgKHJhdGluZyAmJiByYXRpbmcuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmIGxvY2FsU3RvcmFnZS5hdXRvTmV4dF9TVEFUVVMgPT0gJzEnKSB7CgkJCW9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKCQkJc2V0VGltZW91dChHb1RvTmV4dCwgMTAwMCk7CgkJfQoJfQoKCWZ1bmN0aW9uIEdvVG9OZXh0KCkgewoJCWlmIChsb2NhbFN0b3JhZ2UuYXV0b05leHRfU1RBVFVTID09ICcxJykKCQkJd2luZG93LmxvY2F0aW9uPScvZy8nICsgd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL1swLTldKy8pWzBdICsgJy5yZXBsYXknOwoJfQoJZnVuY3Rpb24gY2hiQ2hhbmdlZCgpIHsKCQlpZiAoY2hiQXV0b05leHQuY2hlY2tlZCkgCXsKCQkJbG9jYWxTdG9yYWdlLmF1dG9OZXh0X1NUQVRVUyA9ICcxJzsKCQkJZ2FtZS5ob3N0U3RhcnQoKTsKCQkJQ2hlY2tSYXRpbmcoKTsKCQl9CgkJZWxzZSB7CgkJCWxvY2FsU3RvcmFnZS5hdXRvTmV4dF9TVEFUVVMgPSAnMCc7CgkJfQoJfQp9CgpmdW5jdGlvbiBleGVjKGZuKSB7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnKTsKICAgIHNjcmlwdC50ZXh0Q29udGVudCA9ICcoJyArIGZuICsgJykoKTsnOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpOwp9Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgewogICAgZXhlYyhtYWluKTsKfSwgZmFsc2UpOwo="},{"name":"KG_DailyProgress","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["http*://klavogonki.ru/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1587455259806},"enabled":true,"position":6,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_DailyProgress.user.js","uuid":"ee534f04-b50f-4056-bf7c-11622748fd05","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBLR19EYWlseVByb2dyZXNzCi8vIEBuYW1lc3BhY2UgICAga2xhdm9nb25raQovLyBAdmVyc2lvbiAgICAgIDEuMC4wCi8vIEBkZXNjcmlwdGlvbiAg0JLQuNC30YPQsNC70YzQvdCw0Y8g0L/QvtC70L7RgdCwINC/0YDQvtCz0YDQtdGB0YHQsCDQstGL0L/QvtC70L3QtdC90LjRjyDCq9CX0LDQtNCw0YfQuCDQtNC90Y/CuwovLyBAYXV0aG9yICAgICAgIFNwYWlkZXIgYWthIERlbmlzIERtaXRyaWV2Ci8vIEBtYXRjaCAgICAgICAgaHR0cCo6Ly9rbGF2b2dvbmtpLnJ1LyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vIEBpY29uciAgICAgICAgaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci9mMmNlZmI2OTRjNDEyNTM4YzQwNjFlYjgyMmFlMDUyOD9zPTQ4Ci8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gc2V0dXBPYnNlcnZlcigpIHsKICAgIHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwKICAgICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fAogICAgICAgIHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyOwogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYWlseS10YXNrJyk7CiAgICBpZiAoIXRhcmdldCkgewogICAgICAgIGNvbnNvbGUubG9nKCdEYWlseVByb2dyZXNzOiDQn9Cw0L3QtdC70Ywg0LfQsNC00LDQvdC40Y8g0L3QtSDQvdCw0LnQtNC10L3QsCwg0L3QtSDQvNC+0LPRgyDQv9GA0L7QtNC+0LvQttC40YLRjC4nKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9uKSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiBtdXRhdGlvbikgewogICAgICAgICAgICBpZiAobXV0YXRpb25baV0uYXR0cmlidXRlTmFtZSA9PSAnb3JpZ2luYWwtdGl0bGUnKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVQcm9ncmVzcygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICAvLyBOZXZlciBkaXNjb25uZWN0IG9ic2VydmVyIHNpbmNlIHByb2dyZXNzIHdpbGwgYmUgdXBkYXRlZCBpbW1lZGlhdGVseQogICAgLy8gYWZ0ZXIgYSByYWNlIGFuZCBpdCB3b3VsZCBiZSBuaWNlIHRvIHJlZmxlY3QgdGhpcyByaWdodCBhd2F5CiAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwge2F0dHJpYnV0ZXM6IHRydWV9KTsKICAgIHJldHVybiB0cnVlOwp9CgovKiBSZXR1cm5zIHByb2dyZXNzIGJhciBlbGVtZW50LiBDcmVhdGVzIGl0IGlmIGl0IGRvZXMgbm90IGV4aXN0ICovCmZ1bmN0aW9uIGdldE9yQ3JlYXRlUHJvZ3Jlc3NCYXIoZ2F1Z2UpIHsKICAgIHZhciBwYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYWlseS10YXNrLXByb2dyZXNzLWJhcicpOwoKICAgIGlmIChwYikgcmV0dXJuIHBiOwoKICAgIHBiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBwYi5pZCA9ICdkYWlseS10YXNrLXByb2dyZXNzLWJhcic7CiAgICBwYi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICBwYi5zdHlsZS5ib3R0b20gPSAwOwogICAgcGIuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBREFKRUFBQ2lNTVNSdkt4OVNKUC8vL3lINUJBRUFBQU1BTEFBQUFBQUJBQU1BQUFJQ1JGUUFPdz09KSc7CiAgICBwYi5zdHlsZS5oZWlnaHQgPSAnM3B4JzsKICAgIHBiLnN0eWxlLndpZHRoID0gMDsgLy8gTm8gcHJvZ3Jlc3MgaW5pdGlhbGx5CgogICAgcGJfYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHBiX2JnLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKICAgIHBiX2JnLnN0eWxlLmJvdHRvbSA9IDA7CiAgICBwYl9iZy5zdHlsZS5iYWNrZ3JvdW5kID0gJ3VybChkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFEQUpFQUFLK3ZyNCtQajNOemMvLy8veUg1QkFFQUFBTUFMQUFBQUFBQkFBTUFBQUlDVkZBQU93PT0pJzsKICAgIHBiX2JnLnN0eWxlLmhlaWdodCA9ICczcHgnOwogICAgcGJfYmcuc3R5bGUud2lkdGggPSAnMTAwJSc7IC8vIE5vIHByb2dyZXNzIGluaXRpYWxseQoKICAgIGdhdWdlLmFwcGVuZENoaWxkKHBiX2JnKTsKICAgIGdhdWdlLmFwcGVuZENoaWxkKHBiKTsKCiAgICByZXR1cm4gcGI7Cn0KCi8qIFJldHVybnMgZWxlbWVudCBmb3IgRGFpbHkgVGFzay4gVGhyb3dzIGV4Y2VwdGlvbiBpZiBpdCBpcyBub3QgZm91bmQgKi8KZnVuY3Rpb24gZ2V0RGFpbHlUYXNrR2F1Z2UoKSB7CiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkYWlseS10YXNrJyk7CiAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkgdGhyb3cgJ9Ct0LvQtdC80LXQvdGCINC90LUg0L3QsNC50LTQtdC9Lic7CiAgICB2YXIgcHJvZ3Jlc3NCYWRnZSA9IGVsZW1lbnRzWzBdOwoKICAgIHJldHVybiBwcm9ncmVzc0JhZGdlOwp9CgovKgpSZXR1cm5zIGRhaWx5IHByb2dyZXNzIGZpZ3VyZXM6IHJhY2VzIGNvbXBsZXRlZCBhbmQgcmFjZXMgdG8gZ28uCklmIHByb2dyZXNzIGlzIG5vdCB5ZXQgYXZhaWxhYmxlIChjdXNvdG0gdGl0bGUgaXMgZW1wdHkpLCByZXR1cm5zIG51bGwKKi8KZnVuY3Rpb24gZ2V0UHJvZ3Jlc3MoZ2F1Z2UpIHsKICAgIHZhciBjdXN0b21Qcm9wcyA9IGdhdWdlLmdldEF0dHJpYnV0ZU5hbWVzKCk7CiAgICBpZiAoY3VzdG9tUHJvcHMuaW5kZXhPZignb3JpZ2luYWwtdGl0bGUnKSA8IDApIHRocm93ICfQkNGC0YDQuNCx0YPRgiBcJ29yaWduYWwtdGl0bGVcJyDQvdC1INC90LDQudC00LXQvS4nOwogICAgdmFyIHRpdGxlID0gZ2F1Z2UuZ2V0QXR0cmlidXRlKCdvcmlnaW5hbC10aXRsZScpOwogICAgaWYgKCF0aXRsZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaWYgKHRpdGxlID09PSAn0JfQsNCy0LXRgNGI0LXQvdC+JykgewogICAgICAgIHJldHVybiB7IGRvbmU6IDEsIHRvdGFsOiAxIH07CiAgICB9CiAgICB2YXIgbWF0Y2ggPSAv0J/RgNC+0LPRgNC10YHRgTpcVyhcZHsxLDJ9KVwvKFxkezEsMn0pLy5leGVjKHRpdGxlKTsKICAgIGlmICghbWF0Y2ggfHwgbWF0Y2gubGVuZ3RoICE9IDMpIHRocm93ICfQpNC+0YDQvNCw0YIg0LfQsNCz0L7Qu9C+0LLQutCwINC/0L7QvNC10L3Rj9C70YHRjywg0L3QtdCy0L7Qt9C80L7QttC90L4g0YDQsNGB0L/QsNGA0YHQuNGC0YwuJzsKCiAgICBkb25lID0gcGFyc2VJbnQobWF0Y2hbMV0pOwogICAgdG90YWwgPSBwYXJzZUludChtYXRjaFsyXSk7CiAgICBpZiAoaXNOYU4oZG9uZSkgfHwgaXNOYU4odG90YWwpKSB0aHJvdyAn0KTQvtGA0LzQsNGCINC30LDQs9C+0LvQvtCy0LrQsCDQv9C+0LzQtdC90Y/Qu9GB0Y8sINC60L7Qu9C40YfQtdGB0YLQstC+INC30LDQtdC30LTQvtCyINC90LUg0L3QsNC50LTQtdC90L4uJzsKCiAgICByZXR1cm4gewogICAgICAgIGRvbmU6IGRvbmUsCiAgICAgICAgdG90YWw6IHRvdGFsCiAgICB9Owp9CgovLyBSZWZsZWN0cyBwcm9ncmVzcyBvbiBkYWlseSB0YXNrIGdhdWdlCmZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKCkgewogICAgdHJ5IHsKICAgICAgICB2YXIgZ2F1Z2UgPSBnZXREYWlseVRhc2tHYXVnZSgpOwogICAgICAgIHZhciBwcm9ncmVzcyA9IGdldFByb2dyZXNzKGdhdWdlKTsKICAgICAgICBpZiAocHJvZ3Jlc3MgPT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOyAvLyBQcm9ncmVzcyBpcyBub3QgdGhlcmUgeWV0CiAgICAgICAgfQogICAgICAgIGlmICghcHJvZ3Jlc3MuZG9uZSB8fCBwcm9ncmVzcy5kb25lID09PSBwcm9ncmVzcy50b3RhbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBwYiA9IGdldE9yQ3JlYXRlUHJvZ3Jlc3NCYXIoZ2F1Z2UpOwogICAgICAgIHBiLnN0eWxlLndpZHRoID0gKDEwMCAqIHByb2dyZXNzLmRvbmUgLyBwcm9ncmVzcy50b3RhbCkgKyAnJSc7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhaWx5UHJvZ3Jlc3M6INCe0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdC90L7QstC70LXQvdC40LguICcgKyBlKTsKICAgIH0KfQoKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbigpIHsKICAgIC8vIFRyeSB0byB1cGRhdGUgcHJvZ3Jlc3MgZmlyc3QuIE9uIEZpcmVGb3ggaXQgaXMgYXZhaWJsZSBvbiBsb2FkCiAgICAvLyB3aGVyZWFzIG9uIENocm9taXVtIGl0IGlzIHVwZGF0ZWQgbGF0ZXIgb24KICAgIHVwZGF0ZVByb2dyZXNzKCk7CiAgICBzZXR1cE9ic2VydmVyKCk7Cn0sIGZhbHNlKTsK"},{"name":"YouTube speed rememberer","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*.youtube.com/*"],"orig_noframes":null,"orig_run_at":"document-body","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1588725693439,"data":{}},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/27091-youtube-speed-rememberer/code/YouTube%20speed%20rememberer.user.js","uuid":"77e412b3-2cc2-4a1f-af4a-d288907ffe42","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFlvdVR1YmUgc3BlZWQgcmVtZW1iZXJlcgovLyBAdmVyc2lvbiAgICAgICAgMC4zLjMKLy8gQGRlc2NyaXB0aW9uICAgIFJlbWVtYmVycyBwbGF5YmFjayBzcGVlZC4KLy8gQGRlc2NyaXB0aW9uOnJ1INCX0LDQv9C+0LzQuNC90LDQtdGCINGB0LrQvtGA0L7RgdGC0Ywg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPLgovLyBAYXV0aG9yICAgICAgICAgZ3Z2YWQKLy8gQG1hdGNoICAgICAgICAgICoueW91dHViZS5jb20vKgovLyBAcnVuLWF0ICAgICAgICAgZG9jdW1lbnQtYm9keQovLyBAbGljZW5zZSAgICAgICAgR1BMLTMuMCs7IGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwtMy4wLnR4dAovLyBAbmFtZXNwYWNlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy91c2Vycy8xMDAxNjAKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb25zdCBQTEFZRVJfU0VMRUNUT1IgPSAiI21vdmllX3BsYXllciI7CiAgICBsZXQgc3RvcmUgPSB7CiAgICAgICAgZ2V0IHJhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwbC1yYXRlIikpIHx8IDEuMDsKICAgICAgICB9LAogICAgICAgIHNldCByYXRlKHYpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInBsLXJhdGUiLCB2KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gIHNldCBidXR0b24gb24gdmlkZW8gcGxheWVyCiAgICAvLyAgX21zZyAtIGxhYmxlIHN0cmluZwogICAgbGV0IHNldExhYmVsID0gZnVuY3Rpb24oX21zZywgX21wKSB7CiAgICAgICAgbGV0IGxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI195dHAtbGFiZWwiKTsKICAgICAgICBpZiAoX21zZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlmIChsYWJlbCkgbGFiZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsYWJlbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGxhYmVsKSB7CiAgICAgICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IF9tc2c7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGxldCBjbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBMQVlFUl9TRUxFQ1RPUikucXVlcnlTZWxlY3RvcigiLnl0cC1yaWdodC1jb250cm9scyIpOwoKICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnaWQnLCdfeXRwLWxhYmVsJyk7CiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywneXRwLWJ1dHRvbicpOwogICAgICAgIHNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBfbXAuc2V0UGxheWJhY2tSYXRlKDEpOwogICAgICAgIH07CiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBfbXNnOwoKICAgICAgICBjbHMuaW5zZXJ0QmVmb3JlKHNwYW4sIGNscy5maXJzdENoaWxkKTsKICAgIH07CgogICAgLy8gIHNldCBvciByZW1vdmUgYnV0dG9uCiAgICBsZXQgc2V0U3BlZWRMYWJlbCA9IGZ1bmN0aW9uKHJhdGUsIG1wKSB7CiAgICAgICAgc2V0TGFiZWwoKHJhdGU9PTEpPyB1bmRlZmluZWQgOiAneCcrcmF0ZSwgbXApOwogICAgfTsKCiAgICAvLyAgbW9kaWZpY2F0ZSBwbGF5ZXIgb2JqZWN0IGFuZCBzdG9yZSBwbGF5IHJhdGUKICAgIC8vICBtcCAtIG1vdmllcGxheWVyIG9iamVjdAogICAgbGV0IHdvcmtlciA9IGZ1bmN0aW9uKG1wKSB7CiAgICAgICAgbGV0IHN0YXRlID0gbXAuZ2V0UHJvZ3Jlc3NTdGF0ZSgpOwoKICAgICAgICBpZiAoc3RvcmUucmF0ZSAhPSAxLjAgJiYgIXN0YXRlLmlzQXRMaXZlSGVhZCkgewogICAgICAgICAgICBtcC5zZXRQbGF5YmFja1JhdGUoc3RvcmUucmF0ZSk7CiAgICAgICAgICAgIHNldFNwZWVkTGFiZWwobXAuZ2V0UGxheWJhY2tSYXRlKCksIG1wKTsKICAgICAgICB9CgogICAgICAgIG1wLmFkZEV2ZW50TGlzdGVuZXIoIm9uUGxheWJhY2tSYXRlQ2hhbmdlIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgc3RvcmUucmF0ZSA9IG1wLmdldFBsYXliYWNrUmF0ZSgpOwogICAgICAgICAgICBzZXRTcGVlZExhYmVsKG1wLmdldFBsYXliYWNrUmF0ZSgpLCBtcCk7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG1SZWNvcmQpewogICAgICAgIGxldCBwbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUExBWUVSX1NFTEVDVE9SKTsKICAgICAgICBpZiAocGwpIHsKICAgICAgICAgICAgd29ya2VyKHBsKTsKICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7CiAgICAgICAgfQogICAgfSk7CiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHthdHRyaWJ1dGVzOiBmYWxzZSwgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiBmYWxzZX0pOwp9KSgpOwo="},{"name":"YouTube ProgressBar Preserver","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["https://www.youtube.com/live_chat*","https://www.youtube.com/live_chat_replay*"],"orig_includes":["https://www.youtube.com/*","https://www.youtube-nocookie.com/embed/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589048530234,"data":{}},"enabled":true,"position":8,"file_url":"https://greasyfork.org/scripts/394512-youtube-progressbar-preserver/code/YouTube%20ProgressBar%20Preserver.user.js","uuid":"387b52ab-2298-4f88-91bf-27daf177b3d2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFlvdVR1YmUgUHJvZ3Jlc3NCYXIgUHJlc2VydmVyCi8vIEBuYW1lOmphICAgICBZb3VUdWJlIFByb2dyZXNzQmFyIFByZXNlcnZlcgovLyBAbmFtZTp6aC1DTiAgWW91VHViZSBQcm9ncmVzc0JhciBQcmVzZXJ2ZXIKLy8gQGRlc2NyaXB0aW9uIEl0IHByZXNlcnZlcyBZb3VUdWJlJ3MgcHJvZ3Jlc3MgYmFyIGFsd2F5cyB2aXNpYmxlIGV2ZW4gaWYgdGhlIGNvbnRyb2xzIGFyZSBoaWRkZW4uCi8vIEBkZXNjcmlwdGlvbjpqYSBZb3VUdWJl44Gu44OX44Ot44Kw44Os44K544OQ44O8KOWGjeeUn+aZguWIu+OBruWJsuWQiOOCkuekuuOBmei1pOOBhOODkOODvCnjgpLjgIHpmqDjgZXjgZrluLjjgavooajnpLrjgZXjgZvjgovjgojjgYbjgavjgZfjgb7jgZnjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOiuqeS9oOaBkuW4uOWcsOaYvuekuuayueeuoeS4iueahOi/m+W6puadoSjmmL7npLrmkq3mlL7ml7bpl7Tmr5TkvovnmoTnuqLoibLmnaEp44CCCi8vIEBuYW1lc3BhY2UgICBrbm9hLmpwCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy55b3V0dWJlLW5vY29va2llLmNvbS9lbWJlZC8qCi8vIEBleGNsdWRlICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS9saXZlX2NoYXQqCi8vIEBleGNsdWRlICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS9saXZlX2NoYXRfcmVwbGF5KgovLyBAdmVyc2lvbiAgICAgMS4wLjIKLy8gQGdyYW50ICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKXsKICBjb25zdCBTQ1JJUFRJRCA9ICdZb3VUdWJlUHJvZ3Jlc3NCYXJQcmVzZXJ2ZXInOwogIGNvbnN0IFNDUklQVE5BTUUgPSAnWW91VHViZSBQcm9ncmVzc0JhciBQcmVzZXJ2ZXInOwogIGNvbnN0IERFQlVHID0gZmFsc2U7LyoKW3VwZGF0ZV0gMS4wLgpUaGlubmVyIHNoYWRvdy4KCltidWddCgpbdG9kb10KCltyZXNlYXJjaF0KdGltZXVwZGF0ZeOBrumWk+malOOBtuOCk+OBoOOBkemBheOCjOOBpuOBl+OBvuOBhuOBruOBr+OBhuOBvuOBj+aUueWWhOOBp+OBjeOCi+OBi+OBqeOBhuOBiwp0aW1ldXBkYXRl44GN44Gj44GL44GR44GnMjUwbXMo5YmN5Zue44Go44Gu5beu77yfKeOCkuOCreODvOODl+OBmeOCi+OCiOOBhuOBquS7lee1hOOBv+OBp+OBhOOBkeOCi++8nwrjgoLjgaPjgajjgoLjgIHmmYLplpPjga7nn63jgYTluoPlkYrmmYLjgY/jgonjgYTjgZfjgYvnn6XopprjgafjgY3jgarjgYTjgZHjganjgIIKClttZW1vXQpZb3VUdWJl44Gr44KI44Gj44Gm6Zqg44GV44KM44Gm44GE44KL44Go44GN44Gv44Kq44Oq44K444OK44Or44Gu44OQ44O844Gv5pu05paw44GV44KM44Gq44GE44Gu44Gn44CB54us6Ieq44Gr5L2c44KL44G744GG44GM44Op44Kv44CCCjAuOeWujOaIkOW+jOOAgXlvdXR1YmUgcHJvZ3Jlc3NiYXIg44Gn5qSc57Si44GX44Gf44Go44GT44KN44GZ44Gn44Gr5a2Y5Zyo44GX44Gm44GE44KL44GT44Go44KS55m66KaL77y8KF5vXinvvI8KaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvamEvZmlyZWZveC9hZGRvbi9wcm9ncmVzcy1iYXItZm9yLXlvdXR1YmUvCuOCq+OCueOCv+ODnuOCpOOCuuOBp+OBjeOCi+OBjOOAgeeUn+aUvumAgeOBq+WvvuW/nOOBl+OBpuOBhOOBquOBhOOAguODl+ODreOCsOODrOOCueOBjOacgOS9jjAuNeenkuWNmOS9jeOBp3RyYW5zaXRpb27jgoLjgarjgYTjgIIKICAqLwogIGlmKHdpbmRvdyA9PT0gdG9wICYmIGNvbnNvbGUudGltZSkgY29uc29sZS50aW1lKFNDUklQVElEKTsKICBjb25zdCBNUyA9IDEsIFNFQ09ORCA9IDEwMDAqTVMsIE1JTlVURSA9IDYwKlNFQ09ORCwgSE9VUiA9IDYwKk1JTlVURSwgREFZID0gMjQqSE9VUiwgV0VFSyA9IDcqREFZLCBNT05USCA9IDMwKkRBWSwgWUVBUiA9IDM2NSpEQVk7CiAgY29uc3QgSU5URVJWQUwgPSAxKlNFQ09ORDsvKmZvciBjb3JlLmNoZWNrVXJsKi8KICBjb25zdCBTSE9SVERVUkFUSU9OID0gNCpNSU5VVEUgLyAxMDAwOy8qc2hvcnQgdmlkZW8gc2hvdWxkIGhhdmUgdHJhbnNpdGlvbiovCiAgY29uc3QgU1RBUlRTV0lUSCA9IFsvKmZvciBjb3JlLmNoZWNrVXJsKi8KICAgICdodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD8nLAogICAgJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycsCiAgICAnaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20vZW1iZWQvJywKICBdOwogIGxldCBzaXRlID0gewogICAgdGFyZ2V0czogewogICAgICBwbGF5ZXI6ICgpID0+ICQoJy5odG1sNS12aWRlby1wbGF5ZXInKSwKICAgICAgdmlkZW86ICgpID0+ICQoJ3ZpZGVvW3NyY10nKSwKICAgICAgdGltZTogKCkgPT4gJCgnLnl0cC10aW1lLWRpc3BsYXknKSwKICAgIH0sCiAgICBpczogewogICAgICBsaXZlOiAodGltZSkgPT4gdGltZS5jbGFzc0xpc3QuY29udGFpbnMoJ3l0cC1saXZlJyksCiAgICB9LAogIH07CiAgbGV0IGVsZW1lbnRzID0ge30sIHRpbWVycyA9IHt9OwogIGxldCBjb3JlID0gewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXsKICAgICAgZWxlbWVudHMuaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgZWxlbWVudHMuaHRtbC5jbGFzc0xpc3QuYWRkKFNDUklQVElEKTsKICAgICAgY29yZS5jaGVja1VybCgpOwogICAgICBjb3JlLmFkZFN0eWxlKCk7CiAgICB9LAogICAgY2hlY2tVcmw6IGZ1bmN0aW9uKCl7CiAgICAgIGxldCBwcmV2aW91c1VybCA9ICcnOwogICAgICB0aW1lcnMuY2hlY2tVcmwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgIGlmKGRvY3VtZW50LmhpZGRlbikgcmV0dXJuOwogICAgICAgIC8qIFRoZSBwYWdlIGlzIHZpc2libGUsIHNvLi4uICovCiAgICAgICAgaWYobG9jYXRpb24uaHJlZiA9PT0gcHJldmlvdXNVcmwpIHJldHVybjsKICAgICAgICBlbHNlIHByZXZpb3VzVXJsID0gbG9jYXRpb24uaHJlZjsKICAgICAgICAvKiBUaGUgVVJMIGhhcyBjaGFuZ2VkLCBzby4uLiAqLwogICAgICAgIGlmKFNUQVJUU1dJVEguc29tZSh1cmwgPT4gbG9jYXRpb24uaHJlZi5zdGFydHNXaXRoKHVybCkpID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIC8qIFRoaXMgcGFnZSBzaG91bGQgYmUgbW9kaWZpZWQsIHNvLi4uICovCiAgICAgICAgY29yZS5yZWFkeSgpOwogICAgICB9LCBJTlRFUlZBTCk7CiAgICB9LAogICAgcmVhZHk6IGZ1bmN0aW9uKCl7CiAgICAgIGNvcmUuZ2V0VGFyZ2V0cyhzaXRlLnRhcmdldHMpLnRoZW4oKCkgPT4gewogICAgICAgIGxvZygiSSdtIHJlYWR5LiIpOwogICAgICAgIGNvcmUuYXBwZW5kQmFyKCk7CiAgICAgICAgY29yZS5vYnNlcnZlVGltZSgpOwogICAgICAgIGNvcmUub2JzZXJ2ZVZpZGVvKCk7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7U0NSSVBUSUR9OiR7ZS5saW5lTnVtYmVyfSAke2UubmFtZX06ICR7ZS5tZXNzYWdlfWApOwogICAgICB9KTsKICAgIH0sCiAgICBhcHBlbmRCYXI6IGZ1bmN0aW9uKCl7CiAgICAgIGlmKGVsZW1lbnRzLmJhciAmJiBlbGVtZW50cy5iYXIuaXNDb25uZWN0ZWQpIHJldHVybjsKICAgICAgbGV0IGJhciA9IGVsZW1lbnRzLmJhciA9IGNyZWF0ZUVsZW1lbnQoaHRtbC5iYXIoKSk7CiAgICAgIGxldCBwcm9ncmVzcyA9IGVsZW1lbnRzLnByb2dyZXNzID0gYmFyLmZpcnN0RWxlbWVudENoaWxkOwogICAgICBsZXQgYnVmZmVyID0gZWxlbWVudHMuYnVmZmVyID0gYmFyLmxhc3RFbGVtZW50Q2hpbGQ7CiAgICAgIGVsZW1lbnRzLnBsYXllci5hcHBlbmRDaGlsZChiYXIpOwogICAgfSwKICAgIG9ic2VydmVUaW1lOiBmdW5jdGlvbigpewogICAgICAvKiBkZXRlY3QgbGl2ZSBmb3IgaGlkaW5nIHRoZSBiYXIgKi8KICAgICAgbGV0IHRpbWUgPSBlbGVtZW50cy50aW1lLCBiYXIgPSBlbGVtZW50cy5iYXI7CiAgICAgIGxldCBkZXRlY3QgPSBmdW5jdGlvbih0aW1lLCBiYXIpewogICAgICAgIGlmKHNpdGUuaXMubGl2ZSh0aW1lKSkgYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgIGVsc2UgYmFyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9OwogICAgICBkZXRlY3QodGltZSwgYmFyKTsKICAgICAgaWYodGltZS5pc09ic2VydmluZ0F0dHJpYnV0ZXMpIHJldHVybjsKICAgICAgdGltZS5pc09ic2VydmluZ0F0dHJpYnV0ZXMgPSB0cnVlOwogICAgICBsZXQgb2JzZXJ2ZXIgPSBvYnNlcnZlKHRpbWUsIGZ1bmN0aW9uKHJlY29yZHMpewogICAgICAgIGRldGVjdCh0aW1lLCBiYXIpOwogICAgICB9LCB7YXR0cmlidXRlczogdHJ1ZX0pOwogICAgfSwKICAgIG9ic2VydmVWaWRlbzogZnVuY3Rpb24oKXsKICAgICAgbGV0IHZpZGVvID0gZWxlbWVudHMudmlkZW8sIHByb2dyZXNzID0gZWxlbWVudHMucHJvZ3Jlc3MsIGJ1ZmZlciA9IGVsZW1lbnRzLmJ1ZmZlcjsKICAgICAgaWYodmlkZW8uaXNPYnNlcnZpbmdGb3JQcm9ncmVzc0JhcikgcmV0dXJuOwogICAgICB2aWRlby5pc09ic2VydmluZ0ZvclByb2dyZXNzQmFyID0gdHJ1ZTsKICAgICAgaWYodmlkZW8uZHVyYXRpb24gPCBTSE9SVERVUkFUSU9OKSBwcm9ncmVzcy5jbGFzc0xpc3QuYWRkKCd0cmFuc2l0aW9uJyk7CiAgICAgIHByb2dyZXNzLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoMCknOwogICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdkdXJhdGlvbmNoYW5nZScsIGZ1bmN0aW9uKGUpewogICAgICAgIGlmKHZpZGVvLmR1cmF0aW9uIDwgU0hPUlREVVJBVElPTikgcHJvZ3Jlc3MuY2xhc3NMaXN0LmFkZCgndHJhbnNpdGlvbicpOwogICAgICAgIGVsc2UgcHJvZ3Jlc3MuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbicpOwogICAgICB9KTsKICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGZ1bmN0aW9uKGUpewogICAgICAgIHByb2dyZXNzLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZVgoJHt2aWRlby5jdXJyZW50VGltZSAvIHZpZGVvLmR1cmF0aW9ufSlgOwogICAgICB9KTsKICAgICAgbGV0IHJlbmRlckJ1ZmZlciA9IGZ1bmN0aW9uKGUpewogICAgICAgIGZvcihsZXQgaSA9IHZpZGVvLmJ1ZmZlcmVkLmxlbmd0aCAtIDE7IDAgPD0gaTsgaS0tKXsKICAgICAgICAgIGlmKHZpZGVvLmN1cnJlbnRUaW1lIDwgdmlkZW8uYnVmZmVyZWQuc3RhcnQoaSkpIGNvbnRpbnVlOwogICAgICAgICAgYnVmZmVyLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZVgoJHt2aWRlby5idWZmZXJlZC5lbmQoaSkgLyB2aWRlby5kdXJhdGlvbn0pYDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCByZW5kZXJCdWZmZXIpOwogICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdzZWVraW5nJywgcmVuZGVyQnVmZmVyKTsKICAgIH0sCiAgICBnZXRUYXJnZXQ6IGZ1bmN0aW9uKHNlbGVjdG9yLCByZXRyeSA9IDEwLCBpbnRlcnZhbCA9IDEqU0VDT05EKXsKICAgICAgY29uc3Qga2V5ID0gc2VsZWN0b3IubmFtZTsKICAgICAgY29uc3QgZ2V0ID0gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICBsZXQgc2VsZWN0ZWQgPSBzZWxlY3RvcigpOwogICAgICAgIGlmKHNlbGVjdGVkICYmIHNlbGVjdGVkLmxlbmd0aCA+IDApIHNlbGVjdGVkLmZvckVhY2goKHMpID0+IHMuZGF0YXNldC5zZWxlY3RvciA9IGtleSk7LyogZWxlbWVudHMgKi8KICAgICAgICBlbHNlIGlmKHNlbGVjdGVkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHNlbGVjdGVkLmRhdGFzZXQuc2VsZWN0b3IgPSBrZXk7LyogZWxlbWVudCAqLwogICAgICAgIGVsc2UgaWYoLS1yZXRyeSkgcmV0dXJuIGxvZyhgTm90IGZvdW5kOiAke2tleX0sIHJldHJ5aW5nLi4uICgke3JldHJ5fSlgKSwgc2V0VGltZW91dChnZXQsIGludGVydmFsLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgIGVsc2UgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoYE5vdCBmb3VuZDogJHtzZWxlY3Rvci5uYW1lfSwgSSBnaXZlIHVwLmApKTsKICAgICAgICBlbGVtZW50c1trZXldID0gc2VsZWN0ZWQ7CiAgICAgICAgcmVzb2x2ZShzZWxlY3RlZCk7CiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgIGdldChyZXNvbHZlLCByZWplY3QpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRUYXJnZXRzOiBmdW5jdGlvbihzZWxlY3RvcnMsIHJldHJ5ID0gMTAsIGludGVydmFsID0gMSpTRUNPTkQpewogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyhzZWxlY3RvcnMpLm1hcChzZWxlY3RvciA9PiBjb3JlLmdldFRhcmdldChzZWxlY3RvciwgcmV0cnksIGludGVydmFsKSkpOwogICAgfSwKICAgIGFkZFN0eWxlOiBmdW5jdGlvbihuYW1lID0gJ3N0eWxlJyl7CiAgICAgIGlmKGh0bWxbbmFtZV0gPT09IHVuZGVmaW5lZCkgcmV0dXJuOwogICAgICBsZXQgc3R5bGUgPSBjcmVhdGVFbGVtZW50KGh0bWxbbmFtZV0oKSk7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICBpZihlbGVtZW50c1tuYW1lXSAmJiBlbGVtZW50c1tuYW1lXS5pc0Nvbm5lY3RlZCkgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChlbGVtZW50c1tuYW1lXSk7CiAgICAgIGVsZW1lbnRzW25hbWVdID0gc3R5bGU7CiAgICB9LAogIH07CiAgY29uc3QgaHRtbCA9IHsKICAgIGJhcjogKCkgPT4gYDxkaXYgaWQ9IiR7U0NSSVBUSUR9LWJhciI+PGRpdiBpZD0iJHtTQ1JJUFRJRH0tcHJvZ3Jlc3MiPjwvZGl2PjxkaXYgaWQ9IiR7U0NSSVBUSUR9LWJ1ZmZlciI+PC9kaXY+PC9kaXY+YCwKICAgIHN0eWxlOiAoKSA9PiBgCiAgICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICAgICAgLyogcHJlc2VydmVkIGJhciAqLwogICAgICAgICMke1NDUklQVElEfS1iYXJ7CiAgICAgICAgICAtLWhlaWdodDogM3B4OwogICAgICAgICAgLS1iYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LC4yKTsKICAgICAgICAgIC0tZmlsdGVyOiBkcm9wLXNoYWRvdygwcHggMHB4IGNhbGModmFyKC0taGVpZ2h0KS8yKSByZ2JhKDAsMCwwLC41KSk7CiAgICAgICAgICAtLWNvbG9yOiAjZjAwOwogICAgICAgICAgLS1hZC1jb2xvcjogI2ZjMDsKICAgICAgICAgIC0tYnVmZmVyLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LC40KTsKICAgICAgICAgIC0tdHJhbnNpdGlvbi1iYXI6IG9wYWNpdHkgLjI1cyBjdWJpYy1iZXppZXIoMC4wLDAuMCwwLjIsMSk7CiAgICAgICAgICAtLXRyYW5zaXRpb24tcHJvZ3Jlc3M6IHRyYW5zZm9ybSAuMjVzIGxpbmVhcjsKICAgICAgICAgIC0tei1pbmRleDogMTAwOwogICAgICAgIH0KICAgICAgICAjJHtTQ1JJUFRJRH0tYmFyewogICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICBoZWlnaHQ6IHZhcigtLWhlaWdodCk7CiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kKTsKICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgIGJvdHRvbTogMDsKICAgICAgICAgIHRyYW5zaXRpb246IHZhcigtLXRyYW5zaXRpb24tYmFyKTsKICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICB6LWluZGV4OiB2YXIoLS16LWluZGV4KTsKICAgICAgICB9CiAgICAgICAgIyR7U0NSSVBUSUR9LXByb2dyZXNzLAogICAgICAgICMke1NDUklQVElEfS1idWZmZXJ7CiAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgIGhlaWdodDogdmFyKC0taGVpZ2h0KTsKICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDsKICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB9CiAgICAgICAgIyR7U0NSSVBUSUR9LXByb2dyZXNzLnRyYW5zaXRpb24sCiAgICAgICAgIyR7U0NSSVBUSUR9LWJ1ZmZlcnsKICAgICAgICAgIHRyYW5zaXRpb246IHZhcigtLXRyYW5zaXRpb24tcHJvZ3Jlc3MpOwogICAgICAgIH0KICAgICAgICAjJHtTQ1JJUFRJRH0tcHJvZ3Jlc3N7CiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvcik7CiAgICAgICAgICBmaWx0ZXI6IHZhcigtLWZpbHRlcik7CiAgICAgICAgICB6LWluZGV4OiAxOwogICAgICAgIH0KICAgICAgICAjJHtTQ1JJUFRJRH0tYnVmZmVyewogICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnVmZmVyLWNvbG9yKTsKICAgICAgICB9CiAgICAgICAgLmFkLWludGVycnVwdGluZy8qYWR2ZXJ0aXNlbWVudCovICMke1NDUklQVElEfS1wcm9ncmVzc3sKICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWFkLWNvbG9yKTsKICAgICAgICB9CiAgICAgICAgLyogcmVwbGFjZSB0aGUgb3JpZ2luYWwgYmFyICovCiAgICAgICAgLnl0cC1hdXRvaGlkZSAjJHtTQ1JJUFRJRH0tYmFyLmFjdGl2ZXsKICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgfQogICAgICAgIC8qIHJlcGxhY2UgdGhlIGJhciBmb3IgYW4gYWQgKi8KICAgICAgICAueXRwLWFkLXBlcnNpc3RlbnQtcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lci8qWW91VHViZSBvZmZlcnMgcHJvZ3Jlc3MgYmFyIG9ubHkgd2hlbiBhbiBhZCBpcyBzaG93aW5nLCBidXQgaXQgZG9lc24ndCBoYXZlIHRyYW5zaXRpb24gYW5pbWF0aW9uKi97CiAgICAgICAgICBkaXNwbGF5OiBub25lCiAgICAgICAgfQogICAgICA8L3N0eWxlPgogICAgYCwKICB9OwogIGNvbnN0IHNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dC5iaW5kKHdpbmRvdyksIGNsZWFyVGltZW91dCA9IHdpbmRvdy5jbGVhclRpbWVvdXQuYmluZCh3aW5kb3cpLCBzZXRJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbC5iaW5kKHdpbmRvdyksIGNsZWFySW50ZXJ2YWwgPSB3aW5kb3cuY2xlYXJJbnRlcnZhbC5iaW5kKHdpbmRvdyksIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpOwogIGNvbnN0IGFsZXJ0ID0gd2luZG93LmFsZXJ0LmJpbmQod2luZG93KSwgY29uZmlybSA9IHdpbmRvdy5jb25maXJtLmJpbmQod2luZG93KSwgZ2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLmJpbmQod2luZG93KSwgZmV0Y2ggPSB3aW5kb3cuZmV0Y2guYmluZCh3aW5kb3cpOwogIGlmKCEoJ2lzQ29ubmVjdGVkJyBpbiBOb2RlLnByb3RvdHlwZSkpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwgJ2lzQ29ubmVjdGVkJywge2dldDogZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuY29udGFpbnModGhpcyl9fSk7CiAgY29uc3QgJCA9IGZ1bmN0aW9uKHMsIGYpewogICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocyk7CiAgICBpZih0YXJnZXQgPT09IG51bGwpIHJldHVybiBudWxsOwogICAgcmV0dXJuIGYgPyBmKHRhcmdldCkgOiB0YXJnZXQ7CiAgfTsKICBjb25zdCAkJCA9IGZ1bmN0aW9uKHMsIGYpewogICAgbGV0IHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHMpOwogICAgcmV0dXJuIGYgPyBBcnJheS5mcm9tKHRhcmdldHMpLm1hcCh0ID0+IGYodCkpIDogdGFyZ2V0czsKICB9OwogIGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihodG1sID0gJzxzcGFuPjwvc3Bhbj4nKXsKICAgIGxldCBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgb3V0ZXIuaW5uZXJIVE1MID0gaHRtbDsKICAgIHJldHVybiBvdXRlci5maXJzdEVsZW1lbnRDaGlsZDsKICB9OwogIGNvbnN0IG9ic2VydmUgPSBmdW5jdGlvbihlbGVtZW50LCBjYWxsYmFjaywgb3B0aW9ucyA9IHtjaGlsZExpc3Q6IHRydWUsIGF0dHJpYnV0ZXM6IGZhbHNlLCBjaGFyYWN0ZXJEYXRhOiBmYWxzZSwgc3VidHJlZTogZmFsc2V9KXsKICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrLmJpbmQoZWxlbWVudCkpOwogICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCBvcHRpb25zKTsKICAgIHJldHVybiBvYnNlcnZlcjsKICB9OwogIGNvbnN0IGxvZyA9IGZ1bmN0aW9uKCl7CiAgICBpZighREVCVUcpIHJldHVybjsKICAgIGxldCBsID0gbG9nLmxhc3QgPSBsb2cubm93IHx8IG5ldyBEYXRlKCksIG4gPSBsb2cubm93ID0gbmV3IERhdGUoKTsKICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcigpLCBsaW5lID0gbG9nLmZvcm1hdC5nZXRMaW5lKGVycm9yKSwgY2FsbGVycyA9IGxvZy5mb3JtYXQuZ2V0Q2FsbGVycyhlcnJvcik7CiAgICAvL2NvbnNvbGUubG9nKGVycm9yLnN0YWNrKTsKICAgIGNvbnNvbGUubG9nKAogICAgICAoU0NSSVBUSUQgfHwgJycpICsgJzonLAogICAgICAvKiAwMDowMDowMC4wMDAgICovIG4udG9Mb2NhbGVUaW1lU3RyaW5nKCkgKyAnLicgKyBuLmdldFRpbWUoKS50b1N0cmluZygpLnNsaWNlKC0zKSwKICAgICAgLyogKzAuMDAwcyAgICAgICAqLyAnKycgKyAoKG4tbCkvMTAwMCkudG9GaXhlZCgzKSArICdzJywKICAgICAgLyogOjAwICAgICAgICAgICAqLyAnOicgKyBsaW5lLAogICAgICAvKiBjYWxsZXIuY2FsbGVyICovIChjYWxsZXJzWzJdID8gY2FsbGVyc1syXSArICcoKSA9PiAnIDogJycpICsKICAgICAgLyogY2FsbGVyICAgICAgICAqLyAoY2FsbGVyc1sxXSB8fCAnJykgKyAnKCknLAogICAgICAuLi5hcmd1bWVudHMKICAgICk7CiAgfTsKICBsb2cuZm9ybWF0cyA9IFt7CiAgICAgIG5hbWU6ICdGaXJlZm94IFNjcmF0Y2hwYWQnLAogICAgICBkZXRlY3RvcjogL01BUktFUkBTY3JhdGNocGFkLywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMV0ubWF0Y2goLyhbMC05XSspOlswLTldKyQvKVsxXSwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL15bXkBdKig/PUApL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0ZpcmVmb3ggQ29uc29sZScsCiAgICAgIGRldGVjdG9yOiAvTUFSS0VSQGRlYnVnZ2VyLywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMV0ubWF0Y2goLyhbMC05XSspOlswLTldKyQvKVsxXSwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL15bXkBdKig/PUApL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0ZpcmVmb3ggR3JlYXNlbW9ua2V5IDMnLAogICAgICBkZXRlY3RvcjogL1wvZ21fc2NyaXB0c1wvLywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMV0ubWF0Y2goLyhbMC05XSspOlswLTldKyQvKVsxXSwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL15bXkBdKig/PUApL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0ZpcmVmb3ggR3JlYXNlbW9ua2V5IDQrJywKICAgICAgZGV0ZWN0b3I6IC9NQVJLRVJAdXNlci1zY3JpcHQ6LywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMV0ubWF0Y2goLyhbMC05XSspOlswLTldKyQvKVsxXSAtIDUwMCwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL15bXkBdKig/PUApL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0ZpcmVmb3ggVGFtcGVybW9ua2V5JywKICAgICAgZGV0ZWN0b3I6IC9NQVJLRVJAbW96LWV4dGVuc2lvbjovLAogICAgICBnZXRMaW5lOiAoZSkgPT4gZS5zdGFjay5zcGxpdCgnXG4nKVsxXS5tYXRjaCgvKFswLTldKyk6WzAtOV0rJC8pWzFdIC0gNiwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL15bXkBdKig/PUApL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0Nocm9tZSBDb25zb2xlJywKICAgICAgZGV0ZWN0b3I6IC9hdCBNQVJLRVIgXCg8YW5vbnltb3VzPi8sCiAgICAgIGdldExpbmU6IChlKSA9PiBlLnN0YWNrLnNwbGl0KCdcbicpWzJdLm1hdGNoKC8oWzAtOV0rKTpbMC05XStcKT8kLylbMV0sCiAgICAgIGdldENhbGxlcnM6IChlKSA9PiBlLnN0YWNrLm1hdGNoKC9bXiBdKyg/PSBcKDxhbm9ueW1vdXM+KS9nbSksCiAgICB9LCB7CiAgICAgIG5hbWU6ICdDaHJvbWUgVGFtcGVybW9ua2V5JywKICAgICAgZGV0ZWN0b3I6IC9hdCBNQVJLRVIgXChjaHJvbWUtZXh0ZW5zaW9uOi4qP1wvdXNlcnNjcmlwdC5odG1sXD9pZD0vLAogICAgICBnZXRMaW5lOiAoZSkgPT4gZS5zdGFjay5zcGxpdCgnXG4nKVsyXS5tYXRjaCgvKFswLTldKyk6WzAtOV0rXCk/JC8pWzFdIC0gNiwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL1teIF0rKD89IFwoY2hyb21lLWV4dGVuc2lvbjopL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0Nocm9tZSBFeHRlbnNpb24nLAogICAgICBkZXRlY3RvcjogL2F0IE1BUktFUiBcKGNocm9tZS1leHRlbnNpb246LywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMl0ubWF0Y2goLyhbMC05XSspOlswLTldK1wpPyQvKVsxXSwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL1teIF0rKD89IFwoY2hyb21lLWV4dGVuc2lvbjopL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0VkZ2UgQ29uc29sZScsCiAgICAgIGRldGVjdG9yOiAvYXQgTUFSS0VSIFwoZXZhbC8sCiAgICAgIGdldExpbmU6IChlKSA9PiBlLnN0YWNrLnNwbGl0KCdcbicpWzJdLm1hdGNoKC8oWzAtOV0rKTpbMC05XStcKSQvKVsxXSwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL1teIF0rKD89IFwoZXZhbCkvZ20pLAogICAgfSwgewogICAgICBuYW1lOiAnRWRnZSBUYW1wZXJtb25rZXknLAogICAgICBkZXRlY3RvcjogL2F0IE1BUktFUiBcKEZ1bmN0aW9uLywKICAgICAgZ2V0TGluZTogKGUpID0+IGUuc3RhY2suc3BsaXQoJ1xuJylbMl0ubWF0Y2goLyhbMC05XSspOlswLTldK1wpJC8pWzFdIC0gNCwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IGUuc3RhY2subWF0Y2goL1teIF0rKD89IFwoRnVuY3Rpb24pL2dtKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ1NhZmFyaScsCiAgICAgIGRldGVjdG9yOiAvXk1BUktFUiQvbSwKICAgICAgZ2V0TGluZTogKGUpID0+IDAsLyplLmxpbmXjgYznlKjmhI/jgZXjgozjgabjgYTjgovjgYzmnIDntYLlkbzjgbPlh7rjgZfkvY3nva7jga7jgb8qLwogICAgICBnZXRDYWxsZXJzOiAoZSkgPT4gZS5zdGFjay5zcGxpdCgnXG4nKSwKICAgIH0sIHsKICAgICAgbmFtZTogJ0RlZmF1bHQnLAogICAgICBkZXRlY3RvcjogLy4vLAogICAgICBnZXRMaW5lOiAoZSkgPT4gMCwKICAgICAgZ2V0Q2FsbGVyczogKGUpID0+IFtdLAogICAgfV07CiAgbG9nLmZvcm1hdCA9IGxvZy5mb3JtYXRzLmZpbmQoZnVuY3Rpb24gTUFSS0VSKGYpewogICAgaWYoIWYuZGV0ZWN0b3IudGVzdChuZXcgRXJyb3IoKS5zdGFjaykpIHJldHVybiBmYWxzZTsKICAgIC8vY29uc29sZS5sb2coJy8vLy8nLCBmLm5hbWUsICd3YW50cycsIDAvKmxpbmUqLywgJ1xuJyArIG5ldyBFcnJvcigpLnN0YWNrKTsKICAgIHJldHVybiB0cnVlOwogIH0pOwogIGNvcmUuaW5pdGlhbGl6ZSgpOwogIGlmKHdpbmRvdyA9PT0gdG9wICYmIGNvbnNvbGUudGltZUVuZCkgY29uc29sZS50aW1lRW5kKFNDUklQVElEKTsKfSkoKTs="},{"name":"Yt-playback-speed-timestamp","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://www.youtube.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589048810507,"data":{}},"enabled":true,"position":9,"uuid":"768d151e-0ec1-448d-87ab-11865495e6d8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBZdC1wbGF5YmFjay1zcGVlZC10aW1lc3RhbXAKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEKLy8gQGRlc2NyaXB0aW9uICBTbWFsbCB1c2Vyc2NyaXB0IHRvIHNob3cgYSBuZXcgWW91VHViZSB0aW1lIGVsYXBzZWQvZHVyYXRpb24gd2hlbiB0aGUgcGxheWJhY2sgc3BlZWQgaXMgY2hhbmdlZC4KLy8gQGF1dGhvciAgICAgICBJbmdyaW5kZXIKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS8qCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIHNlY29uZHNUb0RobXMoc2VjcykgewogICAgdmFyIGQgPSBNYXRoLmZsb29yKHNlY3MgLyAoMzYwMCoyNCkpOwogICAgdmFyIGggPSBNYXRoLmZsb29yKHNlY3MgJSAoMzYwMCoyNCkgLyAzNjAwKTsKICAgIHZhciBtID0gTWF0aC5mbG9vcihzZWNzICUgMzYwMCAvIDYwKTsKICAgIHZhciBzID0gTWF0aC5mbG9vcihzZWNzICUgNjApOwogICAgdmFyIGREaXNwbGF5ID0gZCA+IDAgPyBkICsgKCc6JykgOiAiIjsKICAgIHZhciBoRGlzcGxheSA9IChoID4gMCB8fCBkID4gMCkgPyAoZERpc3BsYXkgPT09ICIiID8gaCA6ICgiMDAiICsgaCkuc2xpY2UoLTIpKSArICgnOicpIDogIiI7CiAgICB2YXIgbURpc3BsYXkgPSAoIjAwIiArIG0pLnNsaWNlKC0yKSArICgnOicpOwogICAgdmFyIHNEaXNwbGF5ID0gKCIwMCIgKyBzKS5zbGljZSgtMik7CiAgICByZXR1cm4gZERpc3BsYXkgKyBoRGlzcGxheSArIG1EaXNwbGF5ICsgc0Rpc3BsYXk7Cn0KZnVuY3Rpb24gbmV3VGltZUVsYXBzZWRDYWxjKCkgewogICAgdmFyIHNlY29uZHMgPSB5dHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKS5nZXRDdXJyZW50VGltZSgpOwogICAgdmFyIHNwZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaHRtbDUtbWFpbi12aWRlbycpWzBdLnBsYXliYWNrUmF0ZTsKICAgIHZhciBuZXdTZWNvbmRzID0gTWF0aC5yb3VuZChzZWNvbmRzIC8gc3BlZWQpOwogICAgdmFyIG5ld1RpbWVUZXh0ID0gc2Vjb25kc1RvRGhtcyhuZXdTZWNvbmRzKTsKICAgIHJldHVybiBuZXdUaW1lVGV4dDsKfQpmdW5jdGlvbiBuZXdUaW1lRHVyYXRpb25DYWxjKCkgewogICAgdmFyIHNlY29uZHMgPSB5dHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKS5nZXREdXJhdGlvbigpOwogICAgdmFyIHNwZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaHRtbDUtbWFpbi12aWRlbycpWzBdLnBsYXliYWNrUmF0ZTsKICAgIHZhciBuZXdTZWNvbmRzID0gTWF0aC5yb3VuZChzZWNvbmRzIC8gc3BlZWQpOwogICAgdmFyIG5ld1RpbWVUZXh0ID0gc2Vjb25kc1RvRGhtcyhuZXdTZWNvbmRzKTsKICAgIHJldHVybiBuZXdUaW1lVGV4dDsKfQpmdW5jdGlvbiB3cml0ZU5ld1RpbWUoKSB7CiAgICB2YXIgY3VyclNwZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaHRtbDUtbWFpbi12aWRlbycpWzBdLnBsYXliYWNrUmF0ZTsKICAgIHZhciBuZXdUaW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuZXctc3BlZWQtdGltZSIpOwogICAgaWYgKGN1cnJTcGVlZCA9PT0gMSkgewogICAgICAgIGlmIChuZXdUaW1lRWxlbWVudCAhPT0gbnVsbCkgewogICAgICAgICAgICBuZXdUaW1lRWxlbWVudC5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIG5ld1RpbWVFbGFwc2VkID0gbmV3VGltZUVsYXBzZWRDYWxjKCk7CiAgICB2YXIgbmV3VGltZUR1cmF0aW9uID0gbmV3VGltZUR1cmF0aW9uQ2FsYygpOwogICAgdmFyIG5ld1RpbWUgPSAiICgiICsgbmV3VGltZUVsYXBzZWQgKyAiIC8gIiArIG5ld1RpbWVEdXJhdGlvbiArICIpIjsKICAgIGlmIChuZXdUaW1lRWxlbWVudCA9PT0gbnVsbCkgewogICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJpZCIsICJuZXctc3BlZWQtdGltZSIpOwogICAgICAgIG5vZGUuaW5uZXJIVE1MID0gbmV3VGltZTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ5dHAtdGltZS1kaXNwbGF5IilbMF0uYXBwZW5kQ2hpbGQobm9kZSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBuZXdUaW1lRWxlbWVudC5pbm5lckhUTUwgPSBuZXdUaW1lOwogICAgfQp9CmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgIHdyaXRlTmV3VGltZSgpOwogfSwgNTAwCik7"},{"name":"KG_CenterAlignment","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589070490723,"data":{}},"enabled":true,"position":10,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_CenterAlignment.user.js","uuid":"f090ba2b-ca86-4bce-9e79-544551edbd01","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEtHX0NlbnRlckFsaWdubWVudAovLyBAbmFtZXNwYWNlICAga2xhdm9nb25raQovLyBAZGVzY3JpcHRpb24g0JzQtdC90Y/QtdGCINGB0YLQuNC70LXQstC+0LUg0L7RhNC+0YDQvNC70LXQvdC40LUg0YHRgtGA0LDQvdC40YbRiyDQt9Cw0LXQt9C00LA6INC/0L7Qu9C1INCy0LLQvtC00LAg0L/QviDRhtC10L3RgtGA0YMsINC90LDRgdGC0YDQvtC50LrQuCDRgdC60YDRi9GC0YsKLy8gQGF1dGhvciAgICAgIHZvaWRtYWluCi8vIEBsaWNlbnNlICAgICBNSVQKLy8gQHZlcnNpb24gICAgIDEuMS4wCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvZy8qCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKCgp2YXIgY3NzID0gJyNwbGF5LXJpZ2h0IC50bCwgI3BsYXktcmlnaHQgLnRyLCAjcGxheS1yaWdodCAuYmwsICNwbGF5LXJpZ2h0IC5iciB7IGJhY2tncm91bmQ6IGluaXRpYWw7IH1cCiNwbGF5LXJpZ2h0ID4gZGl2IHsgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxMnB4OyAtbW96LWJvcmRlci1yYWRpdXM6IDEycHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IC13ZWJraXQtYm94LXNoYWRvdzogLTRweCA0cHggNXB4IDBweCByZ2JhKDUwLCA1MCwgNTAsIDAuMyk7IC1tb3otYm94LXNoYWRvdzogLTRweCA0cHggNXB4IDBweCByZ2JhKDUwLCA1MCwgNTAsIDAuMyk7IGJveC1zaGFkb3c6IC00cHggNHB4IDVweCAwcHggcmdiYSg1MCwgNTAsIDUwLCAwLjMpOyB9XAojcGxheS1yaWdodCA+IGRpdi5wbGF5LXJpZ2h0LXRvZ2dsZSB7IC13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7IC13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7IC1tb3otYm9yZGVyLXJhZGl1cy10b3ByaWdodDogMDsgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OiAwOyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7IH1cCiNwbGF5LXJpZ2h0ID4gZGl2OmZpcnN0LWNoaWxkIHsgLXdlYmtpdC1ib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwOyAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogMDsgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDsgfVwKI3BsYXktcmlnaHQgeyB3aWR0aDogMzAwcHg7IG1hcmdpbi1yaWdodDogLTMwNnB4OyB2aXNpYmlsaXR5OiBoaWRkZW47IHotaW5kZXg6IDEwMDsgfVwKLnBsYXktcmlnaHQtdG9nZ2xlIHsgcG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyBsZWZ0OiAtMzBweDsgdG9wOiAwOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiAjYWFhOyBmb250LXNpemU6IDE4cHg7IHBhZGRpbmc6IDRweDsgfVwKLnBsYXktcmlnaHQtdG9nZ2xlOmhvdmVyIHsgY29sb3I6ICM0NDQ7IH0nOwoKCmlmICh0eXBlb2YgR01fYWRkU3R5bGUgIT0gInVuZGVmaW5lZCIpIHsKCUdNX2FkZFN0eWxlKGNzcyk7Cn0gZWxzZSBpZiAodHlwZW9mIFBST19hZGRTdHlsZSAhPSAidW5kZWZpbmVkIikgewoJUFJPX2FkZFN0eWxlKGNzcyk7Cn0gZWxzZSBpZiAodHlwZW9mIGFkZFN0eWxlICE9ICJ1bmRlZmluZWQiKSB7CglhZGRTdHlsZShjc3MpOwp9IGVsc2UgewoJdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwoJbm9kZS50eXBlID0gInRleHQvY3NzIjsKCW5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7Cgl2YXIgaGVhZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpOwoJaWYgKGhlYWRzLmxlbmd0aCA+IDApIHsKCQloZWFkc1swXS5hcHBlbmRDaGlsZChub2RlKTsgCgl9IGVsc2UgewoJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTsKCX0KfQoKCmZ1bmN0aW9uIG1haW4oKSB7CiAgICAkJCQoJy5wbGF5LXdyYXBwZXInKS5jc3MoewogICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJwogICAgfSk7CiAgICAKICAgICQkJCgnI3BsYXktb3ZlcmFsbCcpLmRldGFjaCgpLmNzcyh7CiAgICAgICAgd2lkdGg6ICc3NDBweCcsCiAgICAgICAgbWFyZ2luOiAnMCBhdXRvJwogICAgfSkuYXBwZW5kVG8oJy5wbGF5LXdyYXBwZXInKTsKICAgIAogICAgJCQkKCcjcGxheS1yaWdodCcpLmRldGFjaCgpLmNzcyh7CiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsCiAgICAgICAgdG9wOiAnMCcsCiAgICAgICAgcmlnaHQ6ICcwJywKICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScsCiAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzZweCcsCiAgICAgICAgJ21hcmdpbi1ib3R0b20nOiAnNnB4JwogICAgfSkuYXBwZW5kVG8oJy5wbGF5LXdyYXBwZXInKTsKICAgIAogICAgdmFyIGF0dGVtcHRDb3VudCA9IDA7CiAgICB2YXIgcGxheVJpZ2h0SGVpZ2h0Q2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBwbGF5UmlnaHRIZWlnaHQgPSAkJCQoJyNwbGF5LXJpZ2h0Jykub3V0ZXJIZWlnaHQodHJ1ZSk7CiAgICAgICAgaWYoJCQkKCcucGxheS13cmFwcGVyJykuaGVpZ2h0KCkgPCBwbGF5UmlnaHRIZWlnaHQpIHsKICAgICAgICAgICAgJCQkKCcucGxheS13cmFwcGVyJykuY3NzKHsKICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogcGxheVJpZ2h0SGVpZ2h0ICsgJ3B4JwogICAgICAgICAgICB9KTsKICAgICAgICB9CgkJYXR0ZW1wdENvdW50Kys7CiAgICAgICAgaWYoYXR0ZW1wdENvdW50ID09PSAzMCkgewoJCQljbGVhckludGVydmFsKHBsYXlSaWdodEhlaWdodENoZWNrSW50ZXJ2YWwpOwogICAgICAgIH0KICAgIH0sIDEwMCk7CiAgICAgICAgICAgIAogICAgJCQkKCcucGxheS1vdmVyYWxsLXRhYmxlJykucmVtb3ZlKCk7CiAgICAgICAgCiAgICAkJCQoJzxkaXYgY2xhc3M9InBsYXktcmlnaHQtdG9nZ2xlIiBvcmlnaW5hbC10aXRsZT0i0J/QvtC60LDQt9Cw0YLRjCDQvdCw0YHRgtGA0L7QudC60LgiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNvZyI+PC9zcGFuPjwvZGl2PicpLnRpcHN5KHtncmF2aXR5OiAnZSd9KS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICBpZihwYXJzZUludCgkJCQoJyNwbGF5LXJpZ2h0JykuY3NzKCdtYXJnaW4tcmlnaHQnKSwgMTApID09IDApIHsKICAgICAgICAgICAgJCQkKCcjcGxheS1yaWdodCcpLmFuaW1hdGUoeyAnbWFyZ2luLXJpZ2h0JzogLSQkJCgnI3BsYXktcmlnaHQnKS5vdXRlcldpZHRoKHRydWUpIH0pOwogICAgICAgICAgICAkJCQodGhpcykuYXR0cignb3JpZ2luYWwtdGl0bGUnLCAn0J/QvtC60LDQt9Cw0YLRjCDQvdCw0YHRgtGA0L7QudC60LgnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkJCQoJyNwbGF5LXJpZ2h0JykuYW5pbWF0ZSh7ICdtYXJnaW4tcmlnaHQnOiAwIH0pOwogICAgICAgICAgICAkJCQodGhpcykuYXR0cignb3JpZ2luYWwtdGl0bGUnLCAn0KHQutGA0YvRgtGMINC90LDRgdGC0YDQvtC50LrQuCcpOwogICAgICAgIH0KICAgIH0pLmNzcyh7CiAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAkJCQoJyNwYXJhbXMnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKQogICAgfSkuYXBwZW5kVG8oJyNwbGF5LXJpZ2h0Jyk7Cn0KCgpmdW5jdGlvbiBleGVjKGZuKSB7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiKTsKICAgIHNjcmlwdC50ZXh0Q29udGVudCA9ICcoJyArIGZuICsgJykoKTsnOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpOwp9Cgp2YXIgcmVhZHlTdGF0ZUludGVyYWN0aXZlQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHsKICAgICAgICBleGVjKG1haW4pOwogICAgICAgIGNsZWFySW50ZXJ2YWwocmVhZHlTdGF0ZUludGVyYWN0aXZlQ2hlY2tJbnRlcnZhbCk7CiAgICB9Cn0sIDEwKTsKCgp9KSgpOwo="},{"name":"KG_DisableTab","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589242719509,"data":{}},"enabled":true,"position":11,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_DisableTab.user.js","uuid":"d1e22239-fdd4-4b29-9ec3-9df1544d89fd","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEtHX0Rpc2FibGVUYWIKLy8gQG5hbWVzcGFjZSAgIGtsYXZvZ29ua2kKLy8gQGRlc2NyaXB0aW9uINCe0YLQutC70Y7Rh9Cw0LXRgiDQutC90L7Qv9C60YMgVGFiINCyINC/0L7Qu9C1INCy0LLQvtC00LAg0YLQtdC60YHRgtCwINCy0L4g0LLRgNC10LzRjyDQt9Cw0LXQt9C00LAKLy8gQGF1dGhvciAgICAgIHZvaWRtYWluCi8vIEBsaWNlbnNlICAgICBNSVQKLy8gQHZlcnNpb24gICAgIDEuMS4wCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvZy8qCi8vIEBncmFudCAgICAgICBub25lCi8vIEBydW4tYXQgICAgICBkb2N1bWVudC1lbmQgCi8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gZXhlYyhmbikgewogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iik7CiAgICBzY3JpcHQudGV4dENvbnRlbnQgPSAnKCcgKyBmbiArICcpKCk7JzsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsgLy8gcnVuIHRoZSBzY3JpcHQKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTsgLy8gY2xlYW4gdXAKfQoKZnVuY3Rpb24gbWFpbigpIHsKICAgIHZhciB0ZXh0Ym94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0dGV4dCcpOwogICAgCiAgICBpZih0ZXh0Ym94KSB7CiAgICAgICAgdGV4dGJveC5vbmtleWRvd24gPSBmdW5jdGlvbihlKXsKICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSA5KSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgZnVuY3Rpb24oKSB7CiAgICAvLyBzY3JpcHQgaW5qZWN0aW9uCiAgICBleGVjKG1haW4pOwp9LCBmYWxzZSk7Cg=="},{"name":"DailyScores","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589242831537,"data":{}},"enabled":true,"position":12,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/DailyScores.user.js","uuid":"39548b2d-a27e-4b41-a2e0-7f8758269c91","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgRGFpbHlTY29yZXMKLy8gQG5hbWVzcGFjZSAgICAga2xhdm9nb25raQovLyBAdmVyc2lvbiAgICAgICAyLjIuMAovLyBAZGVzY3JpcHRpb24gICDQn9C+0LrQsNC30YvQstCw0LXRgiDQvdCwINCy0LXRgNGF0L3QtdC5INC/0LDQvdC10LvQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDQvtGH0LrQvtCyLCDQv9C+0LvRg9GH0LXQvdC90YvRhSDQsiDQt9Cw0LXQt9C00LDRhSDQt9CwINC00LXQvdGMINC4INC30LAg0LfQsNC10LfQtCwg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/QvtC70YPRh9C10L3QvdC+0LPQviDQsiDRgdC+0YDQtdCy0L3QvtCy0LDQvdC40Y/RhSDRgNC10LnRgtC40L3Qs9CwCi8vIEBpbmNsdWRlICAgICAgIGh0dHAqOi8va2xhdm9nb25raS5ydS8qCi8vIEBhdXRob3IgICAgICAgIExleGluMTMsIGFnaWxlCi8vIEBncmFudCAgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICAgZG9jdW1lbnQtaWRsZQovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIG1haW4gKCkgewogIGZ1bmN0aW9uIERhaWx5U2NvcmVzIChzY29yZXNSb3csIGJvbnVzZXNSb3csIHJhdGluZywgcmF0aW5nVXBwZXJCb3VuZCkgewogICAgdGhpcy5zY29yZXNOb2RlID0gdGhpcy5jcmVhdGVTY29yZXNQYW5lbChzY29yZXNSb3cpOwogICAgdGhpcy5yYXRpbmdOb2RlID0gdGhpcy5jcmVhdGVSYXRpbmdQYW5lbChib251c2VzUm93KTsKICAgIHRoaXMuc3RvcmUgPSB3aW5kb3cubG9jYWxTdG9yYWdlOwogICAgdGhpcy5wcmVmaXggPSAnRGFpbHlTY29yZXMnOwogICAgdGhpcy52YWx1ZXMgPSB7CiAgICAgIHNjb3JlczogeyBnYWluZWQ6IDAsIHNwZW50OiAwIH0sCiAgICAgIHJhdGluZzogewogICAgICAgIGdhaW5lZDogMCwKICAgICAgICB0b3RhbDogcmF0aW5nLAogICAgICAgIHVwcGVyQm91bmQ6IHJhdGluZ1VwcGVyQm91bmQsCiAgICAgIH0sCiAgICB9OwogICAgdGhpcy5sb2FkKCk7CiAgfQoKICBEYWlseVNjb3Jlcy5wcm90b3R5cGUuY3JlYXRlUGFuZWwgPSBmdW5jdGlvbiAocm93LCBzZXR0aW5ncykgewogICAgdmFyIGNhcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgY2FwdGlvbi50ZXh0Q29udGVudCA9IHNldHRpbmdzLnRleHQ7CiAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgIHRhcmdldC5hbGlnbiA9ICdsZWZ0JzsKICAgIHRhcmdldC5jbGFzc05hbWUgPSBzZXR0aW5ncy5jbGFzc05hbWU7CiAgICByb3cuYXBwZW5kQ2hpbGQoY2FwdGlvbik7CiAgICByZXR1cm4gcm93LmFwcGVuZENoaWxkKHRhcmdldCk7CiAgfTsKCiAgRGFpbHlTY29yZXMucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7CiAgICB2YXIgZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgd2hpbGUgKHBhbmVsLmZpcnN0Q2hpbGQpIHsKICAgICAgcGFuZWwucmVtb3ZlQ2hpbGQocGFuZWwuZmlyc3RDaGlsZCk7CiAgICB9CgogICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7CiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVsZW1lbnQpOwogICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBEYWlseVNjb3Jlcy5wcm90b3R5cGUuY3JlYXRlU2NvcmVzUGFuZWwgPSBmdW5jdGlvbiAocm93KSB7CiAgICByZXR1cm4gdGhpcy5jcmVhdGVQYW5lbChyb3csIHsKICAgICAgdGV4dDogJ9CX0LAg0LTQtdC90Yw6JywKICAgICAgY2xhc3NOYW1lOiAnZGFpbHktc2NvcmVzJywKICAgIH0pOwogIH07CgogIERhaWx5U2NvcmVzLnByb3RvdHlwZS5jcmVhdGVSYXRpbmdQYW5lbCA9IGZ1bmN0aW9uIChyb3cpIHsKICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhbmVsKHJvdywgewogICAgICB0ZXh0OiAn0KDQtdC50YLQuNC90LM6JywKICAgICAgY2xhc3NOYW1lOiAnZGFpbHktcmF0aW5nJywKICAgIH0pOwogIH07CgogIERhaWx5U2NvcmVzLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHN0b3JlZCA9IHRoaXMuc3RvcmUuZ2V0SXRlbSh0aGlzLnByZWZpeCk7CiAgICBpZiAoc3RvcmVkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHN0b3JlZCk7CiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZShkYXRhLnRpbWUpOwogICAgICAgIC8vIDIzOjMwIFVUQyDigJQgdGhlIHRpbWUgb2YgdGhlIGxhc3QgeDIgY29tcGV0aXRpb24gb2YgdGhlIGRheToKICAgICAgICB0aW1lLnNldFVUQ0hvdXJzKDIzKTsKICAgICAgICB0aW1lLnNldFVUQ01pbnV0ZXMoNDApOwogICAgICAgIHZhciBjdXJyZW50UmF0aW5nID0gdGhpcy52YWx1ZXMucmF0aW5nLnRvdGFsOwogICAgICAgIHZhciBjdXJyZW50UmF0aW5nVXBwZXJCb3VuZCA9IHRoaXMudmFsdWVzLnJhdGluZy51cHBlckJvdW5kOwoKICAgICAgICBpZiAoZGF0YS5yYXRpbmcudXBwZXJCb3VuZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBkYXRhLnJhdGluZy51cHBlckJvdW5kID0gY3VycmVudFJhdGluZ1VwcGVyQm91bmQ7CiAgICAgICAgfQoKICAgICAgICBpZiAobmV3IERhdGUoKSA8IHRpbWUpIHsKICAgICAgICAgIHRoaXMudmFsdWVzID0gZGF0YTsKICAgICAgICB9CgogICAgICAgIGlmIChjdXJyZW50UmF0aW5nVXBwZXJCb3VuZCA9PT0gdGhpcy52YWx1ZXMucmF0aW5nLnVwcGVyQm91bmQpIHsKICAgICAgICAgIHRoaXMudXBkYXRlKHsgcmF0aW5nOiBjdXJyZW50UmF0aW5nIC0gdGhpcy52YWx1ZXMucmF0aW5nLnRvdGFsIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMudmFsdWVzLnJhdGluZy51cHBlckJvdW5kIC0gdGhpcy52YWx1ZXMucmF0aW5nLnRvdGFsOwogICAgICAgICAgdGhpcy51cGRhdGUoewogICAgICAgICAgICByYXRpbmc6IGRpZmYgKyBjdXJyZW50UmF0aW5nLAogICAgICAgICAgICByYXRpbmdVcHBlckJvdW5kOiBjdXJyZW50UmF0aW5nVXBwZXJCb3VuZCwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9OwoKICBEYWlseVNjb3Jlcy5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMudmFsdWVzLnRpbWUgPSBuZXcgRGF0ZSgpOwogICAgdGhpcy5zdG9yZS5zZXRJdGVtKHRoaXMucHJlZml4LCBKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlcykpOwogIH07CgogIERhaWx5U2NvcmVzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGlmZikgewogICAgZGlmZiA9IGRpZmYgfHwge307CiAgICBpZiAoZGlmZi5zY29yZXMpIHsKICAgICAgaWYgKGRpZmYuc2NvcmVzID4gMCkgewogICAgICAgIHRoaXMudmFsdWVzLnNjb3Jlcy5nYWluZWQgKz0gZGlmZi5zY29yZXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52YWx1ZXMuc2NvcmVzLnNwZW50IC09IGRpZmYuc2NvcmVzOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpZmYucmF0aW5nKSB7CiAgICAgIHRoaXMudmFsdWVzLnJhdGluZy5nYWluZWQgKz0gZGlmZi5yYXRpbmc7CiAgICAgIHRoaXMudmFsdWVzLnJhdGluZy50b3RhbCArPSBkaWZmLnJhdGluZzsKCiAgICAgIGlmICh0aGlzLnZhbHVlcy5yYXRpbmcudG90YWwgPj0gdGhpcy52YWx1ZXMucmF0aW5nLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnZhbHVlcy5yYXRpbmcudG90YWwgLT0gdGhpcy52YWx1ZXMucmF0aW5nLnVwcGVyQm91bmQ7CiAgICAgICAgdGhpcy52YWx1ZXMucmF0aW5nLnVwcGVyQm91bmQgPSB1bmRlZmluZWQ7CiAgICAgIH0KCiAgICAgIGlmIChkaWZmLnJhdGluZ1VwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnZhbHVlcy5yYXRpbmcudXBwZXJCb3VuZCA9IGRpZmYucmF0aW5nVXBwZXJCb3VuZDsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZvcm1hdCAobikgewogICAgICByZXR1cm4gbiAlIDEgPT09IDAgPyBuIDogbi50b0ZpeGVkKDMpOwogICAgfQoKICAgIHRoaXMuc2F2ZSgpOwogICAgdmFyIHNjb3JlcyA9IHRoaXMudmFsdWVzLnNjb3JlczsKICAgIHZhciBzY29yZXNHYWluZWRUb3RhbCA9IChzY29yZXMuZ2FpbmVkID4gMCA/ICcrJyA6ICcnKSArIGZvcm1hdChzY29yZXMuZ2FpbmVkKTsKICAgIHZhciBzY29yZXNDaGFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzbWFsbCcpOwogICAgc2NvcmVzQ2hhbmdlLnRleHRDb250ZW50ID0gZGlmZi5zY29yZXMgPyAnICgnICsgZm9ybWF0KGRpZmYuc2NvcmVzKSArICcpICcgOiAnICc7CiAgICB2YXIgc2NvcmVzU3BlbnQgPSBzY29yZXMuc3BlbnQgPiAwID8gJ+KIkicgKyBzY29yZXMuc3BlbnQgOiAnJzsKICAgIHRoaXMuc2V0UGFuZWwodGhpcy5zY29yZXNOb2RlLCBzY29yZXNHYWluZWRUb3RhbCwgc2NvcmVzQ2hhbmdlLAogICAgICAgIHNjb3Jlc1NwZW50KTsKICAgIHRoaXMuc2V0UGFuZWwodGhpcy5yYXRpbmdOb2RlLCB0aGlzLnZhbHVlcy5yYXRpbmcuZ2FpbmVkKTsKICB9OwoKICBEYWlseVNjb3Jlcy5wcm90b3R5cGUuc2V0TGFzdFJhdGluZ0dhbWVJZCA9IGZ1bmN0aW9uIChpZCkgewogICAgdGhpcy52YWx1ZXMucmF0aW5nLmxhc3RSYWNlSWQgPSBpZDsKICAgIHRoaXMuc2F2ZSgpOwogIH07CgogIERhaWx5U2NvcmVzLnByb3RvdHlwZS5nZXRMYXN0UmF0aW5nR2FtZUlkID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudmFsdWVzLnJhdGluZy5sYXN0UmFjZUlkOwogIH07CgogIHZhciBzY29yZXNDZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJwYW5lbC1zY29yZXMtY29udGFpbmVyJyk7CiAgaWYgKCFzY29yZXNDZWxsKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJyN1c2VycGFuZWwtc2NvcmVzLWNvbnRhaW5lciBlbGVtZW50IG5vdCBmb3VuZC4nKTsKICB9CgogIHZhciBib251c2VzQ2VsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VycGFuZWwtYm9udXNlcycpOwogIGlmICghYm9udXNlc0NlbGwpIHsKICAgIHRocm93IG5ldyBFcnJvcignI3VzZXJwYW5lbC1ib251c2VzIGVsZW1lbnQgbm90IGZvdW5kLicpOwogIH0KCiAgdmFyIGxldmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJwYW5lbC1sZXZlbCcpOwogIGlmICghYm9udXNlc0NlbGwpIHsKICAgIHRocm93IG5ldyBFcnJvcignI3VzZXJwYW5lbC1sZXZlbCBlbGVtZW50IG5vdCBmb3VuZC4nKTsKICB9CgogIHZhciBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3BtZW51IGEnKTsKICBpZiAoIWxpbmspIHsKICAgIHRocm93IG5ldyBFcnJvcignLmRyb3BtZW51IGEgZWxlbWVudCBub3QgZm91bmQuJyk7CiAgfQoKICAvLyBFeHRyYWN0IHRoZSB1c2VyIGlkOgogIHZhciB1c2VySWQgPSBwYXJzZUludChsaW5rLmhyZWYubWF0Y2goL1wvdVwvI1wvKFxkKykvKVsxXSk7CgogIC8vIEV4dHJhY3QgdGhlIGN1cnJlbnQgcmF0aW5nIHZhbHVlIGFuZCBhbW91bnQgb2YgcmF0aW5nIG5lZWRlZCBmb3IgdGhlIG5leHQgbGV2ZWw6CiAgdmFyIG1hdGNoZXMgPSBsZXZlbC5nZXRBdHRyaWJ1dGUoJ29yaWdpbmFsLXRpdGxlJykubWF0Y2goL9Ce0L/Ri9GCOlxzKyhcZCspXHMrXC9ccysoXGQrKS8pOwogIHZhciByYXRpbmcgPSBwYXJzZUludChtYXRjaGVzWzFdIHx8IDApOwogIHZhciByYXRpbmdVcHBlckJvdW5kID0gcGFyc2VJbnQobWF0Y2hlc1syXSB8fCAwKTsKCiAgdmFyIGRhaWx5U2NvcmVzID0gbmV3IERhaWx5U2NvcmVzKHNjb3Jlc0NlbGwucGFyZW50Tm9kZSwKICAgIGJvbnVzZXNDZWxsLnBhcmVudE5vZGUsIHJhdGluZywgcmF0aW5nVXBwZXJCb3VuZCk7CgogIC8vIENoZWNrIGVhY2ggWE1MSHR0cFJlcXVlc3QgcmVzcG9uc2UgZm9yIHJlcXVpcmVkIEpTT04gd2l0aCBzY29yZXNfZ2FpbmVkIGZpZWxkOgogIGZ1bmN0aW9uIGNoZWNrSlNPTiAocmVzcG9uc2UpIHsKICAgIHRyeSB7CiAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShyZXNwb25zZSk7CiAgICAgIGlmICghKCdwbGF5ZXJzJyBpbiBqc29uKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uLnBsYXllcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoJ3JlY29yZCcgaW4ganNvbi5wbGF5ZXJzW2ldICYmIGpzb24ucGxheWVyc1tpXS5yZWNvcmQudXNlciA9PT0gdXNlcklkKSB7CiAgICAgICAgICByZXR1cm4ganNvbi5wbGF5ZXJzW2ldLnJlY29yZC5zY29yZXNfZ2FpbmVkOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICAvLyBNb25pdG9yIHJhdGluZyBjaGFuZ2VzIGF0IHRoZSBhY3RpdmUgY29tcGV0aXRpb24gcGFnZToKICBmdW5jdGlvbiBvYnNlcnZlUmF0aW5nICgpIHsKICAgIGlmICghY2hlY2tHYW1lRGVzYygv0YHQvtGA0LXQstC90L7QstCw0L3QuNC1LykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHZhciBvbGQgPSAwOwogICAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXIueW91IC5yYXRpbmcgLnJhdGluZ19nYWluZWQnKTsKICAgICAgaWYgKCFjb250YWluZXIpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBnYWluZWQgPSBwYXJzZUludChjb250YWluZXIudGV4dENvbnRlbnQpIC0gb2xkOwogICAgICBvbGQgKz0gZ2FpbmVkOwogICAgICBkYWlseVNjb3Jlcy51cGRhdGUoeyByYXRpbmc6IGdhaW5lZCB9KTsKICAgIH0sIDEwMDApOwogIH0KCiAgLy8gVGVzdCB0aGUgY3VycmVudCBnYW1lIGRlc2NyaXB0aW9uIHRleHQgZm9yIHRoZSBnaXZlbiBSZWdFeHAgb2JqZWN0OgogIGZ1bmN0aW9uIGNoZWNrR2FtZURlc2MgKHJlKSB7CiAgICB2YXIgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lZGVzYycpOwogICAgaWYgKCFkZXNjKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCcjZ2FtZWRlc2MgZWxlbWVudCBub3QgZm91bmQuJyk7CiAgICB9CgogICAgcmV0dXJuIHJlLnRlc3QoZGVzYy50ZXh0Q29udGVudCk7CiAgfQoKICBpZiAoL1wvXC9rbGF2b2dvbmtpLnJ1XC9nXC9cP2dtaWQ9Ly50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSkgewogICAgLy8gU2F2aW5nIHRoZSBvcmlnaW5hbCBwcm90b3R5cGUgbWV0aG9kOgogICAgdmFyIHByb3hpZWQgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7CgogICAgd2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNjb3Jlc0dhaW5lZCA9IGNoZWNrSlNPTih0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgLy8gSW4gc2luZ2xlIGdhbWVzIGFuZCBnYW1lcyB3aXRoIGZyaWVuZHMgc2NvcmVzIGFyZSBub3QgZ2FpbmVkIGltbWVkaWF0ZWx5OgogICAgICAgIGlmIChzY29yZXNHYWluZWQgJiYgIWNoZWNrR2FtZURlc2MoL9C+0LTQuNC90L7Rh9C90YvQuXzQtNGA0YPQt9GM0Y/QvNC4LykpIHsKICAgICAgICAgIGRhaWx5U2NvcmVzLnVwZGF0ZSh7IHNjb3Jlczogc2NvcmVzR2FpbmVkIH0pOwogICAgICAgICAgb2JzZXJ2ZVJhdGluZygpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgcmV0dXJuIHByb3hpZWQuYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgIH07CgogICAgLy8gU2NvcmVzIHZhbHVlIGdhaW5lZCBmb3IgdGhlIGNoYWxsZW5nZSBvZiB0aGUgZGF5IGNvbXBsZXRpb24gY2FuIGJlIG9idGFpbmVkIG9ubHkKICAgIC8vIHZpYSBsaXN0ZW5pbmcgb2YgdGhlIGV4aXN0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uOgogICAgdmFyIGluamVjdG9yID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLmluamVjdG9yKCk7CiAgICBpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24gKCRyb290U2NvcGUsIE1lLCBTb2NrZXQpIHsKICAgICAgU29ja2V0LmJpbmRFdmVudFRvU2NvcGUoJHJvb3RTY29wZSwKICAgICAgICBzcHJpbnRmKCJjb3VudGVyczolcy9zY29yZXMiLCBNZS5pZCksCiAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHZhciBmaW5pc2hlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXIueW91IC5yYXRpbmcnKTsKICAgICAgICAvLyBBcmUgd2UgZmluaXNoZWQgdGhlIHJhY2UgeWV0PwogICAgICAgIGlmICghZmluaXNoZWQgfHwgZmluaXNoZWQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgc2NvcmVzID0gZGF0YS5uZXdBbW91bnQgLSBwYXJzZUludChzY29yZXNDZWxsLnRleHRDb250ZW50KTsKICAgICAgICBkYWlseVNjb3Jlcy51cGRhdGUoeyBzY29yZXM6IHNjb3JlcyB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgZ2FtZU9ic2VydmVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGdhbWVMb2FkaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVsb2FkaW5nJyk7CiAgICAgIGlmICghZ2FtZUxvYWRpbmcpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignI2dhbWVsb2FkaW5nIGVsZW1lbnQgbm90IGZvdW5kLicpOwogICAgICB9CgogICAgICBpZiAoZ2FtZUxvYWRpbmcuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChnYW1lT2JzZXJ2ZXIpOwoKICAgICAgLy8gRXh0cmFjdCB0aGUgZ2FtZSBpZCBmcm9tIHRoZSBVUkw6CiAgICAgIHZhciBtYXRjaGVzID0gd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL1wvXC9rbGF2b2dvbmtpLnJ1XC9nXC9cP2dtaWQ9KFxkKykvKTsKCiAgICAgIGlmIChjaGVja0dhbWVEZXNjKC/RgdC+0YDQtdCy0L3QvtCy0LDQvdC40LUvKSAmJiBtYXRjaGVzWzFdICE9PSBkYWlseVNjb3Jlcy5nZXRMYXN0UmF0aW5nR2FtZUlkKCkpIHsKICAgICAgICBkYWlseVNjb3Jlcy5zZXRMYXN0UmF0aW5nR2FtZUlkKG1hdGNoZXNbMV0pOwogICAgICAgIC8vIEVhY2ggIngiIGNvbXBldGl0aW9uIGNvc3RzIDUwIHNjb3JlIHBvaW50czoKICAgICAgICB2YXIgY29zdCA9IDUwOwogICAgICAgIHZhciByZSA9IC9cKHhcZCtcKS87CiAgICAgICAgdmFyIGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZWRlc2MnKS50ZXh0Q29udGVudDsKCiAgICAgICAgaWYgKGNoZWNrR2FtZURlc2MocmUpKSB7CiAgICAgICAgICBjb3N0ICo9IGRlc2NbZGVzYy5zZWFyY2gocmUpICsgMl07CiAgICAgICAgfQoKICAgICAgICBkYWlseVNjb3Jlcy51cGRhdGUoeyBzY29yZXM6IC1jb3N0IH0pOwogICAgICB9CiAgICB9LCAxMDAwKTsKICB9Cn0KCnZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Jyk7CnNjcmlwdC50ZXh0Q29udGVudCA9ICcoJyArIG1haW4udG9TdHJpbmcoKSArICcpKCk7JzsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwp2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwpzdHlsZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTsKc3R5bGUuYXBwZW5kQ2hpbGQoCiAgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoCiAgICAnLnNjb3Jlcy10YWJsZSAuZGFpbHktc2NvcmVzLCAuc2NvcmVzLXRhYmxlIC5kYWlseS1yYXRpbmd7JyArCiAgICAgICdmb250LXNpemU6IDE0cHg7IGZvbnQtd2VpZ2h0OiA3MDAnICsKICAgICd9JyArCiAgICAnLnNjb3Jlcy10YWJsZSAuZGFpbHktc2NvcmVzeycgKwogICAgICAnY29sb3I6ICNiN2ZmYjMnICsKICAgICd9JyArCiAgICAnLnNjb3Jlcy10YWJsZSAuZGFpbHktcmF0aW5neycgKwogICAgICAnY29sb3I6ICNmOWRkODA7IHRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudCcgKwogICAgJ30nICsKICAgICcuc2NvcmVzLXRhYmxlIHNtYWxseycgKwogICAgICAnZm9udC13ZWlnaHQ6IDQwMCcgKwogICAgJ30nCiAgKQopOwpkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsK"},{"name":"KG_StopErrorsRace","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/g/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589243447251,"data":{}},"enabled":true,"position":13,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/KG_StopErrorsRace.user.js","uuid":"1869f56a-df9d-4b29-97f9-00e2d8632719","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBLR19TdG9wRXJyb3JzUmFjZQovLyBAbmFtZXNwYWNlICAgIGtsYXZvZ29ua2kKLy8gQHZlcnNpb24gICAgICAxLjMuMAovLyBAZGVzY3JpcHRpb24gINCe0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC30LDQtdC30LQg0Lgg0YHQvtC30LTQsNC10YIg0L3QvtCy0YvQuSDQtdGB0LvQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDQvtGI0LjQsdC+0Log0LHQvtC70YzRiNC1LCDRh9C10Lwg0YPQutCw0LfQsNC90L3QvtC1INCyINC90LDRgdGC0YDQvtC50LrQsNGFLgovLyBAYXV0aG9yICAgICAgIEFrbWF0Ci8vIEBpbmNsdWRlICAgICAgaHR0cCo6Ly9rbGF2b2dvbmtpLnJ1L2cvKgovLyA9PS9Vc2VyU2NyaXB0PT0KCiJ1c2Ugc3RyaWN0IjsKCmZ1bmN0aW9uIGFkZFN0eWxlc0ZvckZhaWxSYWNlVGV4dCgpIHsKICAgIGNvbnN0IGNzcyA9IGAuc3RvcC1lcnJvci1mYWlsIHsKICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICBmb250LXNpemU6IDQ5cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJlZDsKICAgICAgICBwYWRkaW5nOiAyMHB4IDIwcHg7fWAsCiAgICBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLAogICAgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgogICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCl7CiAgICAgICAgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy4KICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7CiAgICB9IGVsc2UgewogICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpOwogICAgfQp9CgpmdW5jdGlvbiBjcmVhdGVFbGVtZW50cygpIHsKCWNvbnN0IGlzX29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGVkSXRlbSIpICE9PSAnb2ZmJzsKCWNvbnN0IGRpdiAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7Cgljb25zdCBsYWJlbCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJY29uc3QgY2hlY2tib3hJbnB1dCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJY29uc3QgY2hlY2tib3hMYWJlbCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCglsYWJlbC50ZXh0Q29udGVudCA9ICfQm9C40LzQuNGCINC+0YjQuNCx0L7QujonOwoJY2hlY2tib3hMYWJlbC5pbm5lckhUTUwgPSAn0JDQstGC0L4mIzg1OTQ7JzsKCWNoZWNrYm94TGFiZWwuaHRtbEZvciA9ICdjaGVja2JveElucHV0SWQnOwoJc2VsZWN0Lm5hbWUgPSAnc3RvcEVycm9yc1NlbGVjdCc7CglsYWJlbC5pZCA9ICdzdG9wTGFiZWxJZCc7CgoJZGl2LmlkID0gJ3N0b3BTZWxlY3RlZERpdklkJzsKCXNlbGVjdC5pZCA9ICdzdG9wU2VsZWN0SWQnOwoJY2hlY2tib3hJbnB1dC5pZCA9ICdjaGVja2JveElucHV0SWQnOwoJY2hlY2tib3hJbnB1dC50eXBlID0gJ2NoZWNrYm94JzsKCgljaGVja2JveElucHV0LmNoZWNrZWQgPSAhIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRvTmV4dEVycm9yQ2hlY2tib3giKTsKCQoJY29uc3Qgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInJjIik7Cglub2RlWzJdLmFwcGVuZENoaWxkKGRpdik7CglkaXYuYXBwZW5kQ2hpbGQobGFiZWwpOwoJZGl2LmFwcGVuZENoaWxkKHNlbGVjdCk7CglkaXYuYXBwZW5kQ2hpbGQoY2hlY2tib3hJbnB1dCk7CglkaXYuYXBwZW5kQ2hpbGQoY2hlY2tib3hMYWJlbCk7CgljaGVja2JveElucHV0LnN0eWxlLm1hcmdpbiA9ICcwIDAgMCAxNXB4JzsKCWxhYmVsLnN0eWxlLm1hcmdpbiA9ICcwIDMxcHggMCAwJzsKCglsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgoJaWYgKCFpc19vbikgewoJCW9wdGlvbi5zZWxlY3RlZCA9IHRydWU7CgkJY2hlY2tib3hJbnB1dC5kaXNhYmxlZCA9IHRydWU7Cgl9CglvcHRpb24uaW5uZXJUZXh0ID0gJ29mZic7CgkKCXNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwoKCglmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewoJCW9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwoJCW9wdGlvbi52YWx1ZSA9IGk7CgkJb3B0aW9uLmlubmVyVGV4dCA9IGk7CgoJCWlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0ZWRJdGVtIikgIT09ICdvZmYnICYmCgkJICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0ZWRJdGVtIikgPT09IGkpIHsKCQkJb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTsKCQl9CgkJc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7Cgl9Cn0KCmZ1bmN0aW9uIGNoZWNrU2VsZWN0KCkgewoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0b3BTZWxlY3RJZCIpCgkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgKGUpID0+IHsKCQljb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnNlbGVjdGVkT3B0aW9uc1swXS50ZXh0Q29udGVudDsKCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2VsZWN0ZWRJdGVtIiwgdmFsdWUpOwoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGVja2JveElucHV0SWQiKS5kaXNhYmxlZCA9IHZhbHVlID09PSAnb2ZmJzsKCX0pOwp9CgpmdW5jdGlvbiBjaGVja0lucHV0QXV0b05leHQoKSB7Cglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hlY2tib3hJbnB1dElkIikKCS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZSkgPT4gewoJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhdXRvTmV4dEVycm9yQ2hlY2tib3giLCAoZS50YXJnZXQuY2hlY2tlZCkgPyAxIDogJycpOwoJfSk7Cn0KCgppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGVkSXRlbSIpID09PSB1bmRlZmluZWQpIHsKCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzZWxlY3RlZEl0ZW0iLCAib2ZmIik7Cn0KCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0b05leHRFcnJvckNoZWNrYm94IikgPT09IHVuZGVmaW5lZCkgewoJbG9jYWxTdG9yYWdlLnNldEl0ZW0oImF1dG9OZXh0RXJyb3JDaGVja2JveCIsIDEpOwp9CgpmdW5jdGlvbiBpc19jb21wZXRpdGlvbigpIHsKCWNvbnN0IHJpZ2h0VXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7Cgljb25zdCB4UmFjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lZGVzYycpLmlubmVyVGV4dC5tYXRjaCgv0J7QsdGL0YfQvdGL0LksINGB0L7RgNC10LLQvdC+0LLQsNC90LjQtS8pOwoJcmV0dXJuICEhcmlnaHRVcmwubWF0Y2goL2dtaWQvKSAmJiAheFJhY2U7Cn0KCmZ1bmN0aW9uIHN0b3BHYW1lKCkgewoJY29uc3QgaW5wdXQgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0dGV4dCIpOwoJaW5wdXQuZGlzYWJsZWQgPSB0cnVlOwoJaW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNjY2MnOwp9CgpmdW5jdGlvbiBjcmVhdGVOZXdHYW1lQW5kUmVkaXJlY3QoKSB7Cgljb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5tYXRjaCgvWzAtOV0rLylbMF07Cgl3aW5kb3cubG9jYXRpb24gPSBgL2cvJHt1cmx9LnJlcGxheWA7Cn0KCmZ1bmN0aW9uIGdldEZhaWxUZXh0KCkgewoJbGV0IHNvbWVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R5cGV0ZXh0JykudGV4dENvbnRlbnQsIAoJCWNudEVuZywgY250UnVzOwoKCXNvbWVUZXh0ID0gc29tZVRleHQucmVwbGFjZSgvXHMvZywgJycpOwoJY250RW5nICAgICA9IHNvbWVUZXh0LnJlcGxhY2UoL1xXL2csICcnKS5sZW5ndGg7CgljbnRSdXMgICAgID0gc29tZVRleHQucmVwbGFjZSgvXHcvZywgJycpLmxlbmd0aDsKCQoJcmV0dXJuIChjbnRFbmcgPiBjbnRSdXMpID8gJ0ZhaWwnIDogJ9Cf0YDQvtCy0LDQuyc7Cn0KCmZ1bmN0aW9uIGNyZWF0RmFpbFdvcmQoKSB7CiAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpOwogICAgcC5pbm5lclRleHQgPSBnZXRGYWlsVGV4dCgpOwogICAgcC5zZXRBdHRyaWJ1dGUoICdjbGFzcycsICdzdG9wLWVycm9yLWZhaWwnKTsKICAgIAogICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N0b3AtZXJyb3ItZmFpbCcpLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnN0IHRleHRSYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R5cGV0ZXh0Jyk7CiAgICAgICAgdGV4dFJhY2Uuc3R5bGUuY29sb3IgPSAnI2NjYyc7CiAgICAgICAgdGV4dFJhY2UuYXBwZW5kQ2hpbGQocCk7CiAgICB9Cn0KCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgKCkgPT4gewoJaWYgKGlzX2NvbXBldGl0aW9uKCkpIHsKCQljcmVhdGVFbGVtZW50cygpOwoJCWNoZWNrU2VsZWN0KCk7CgkJYWRkU3R5bGVzRm9yRmFpbFJhY2VUZXh0KCk7CgkJY2hlY2tJbnB1dEF1dG9OZXh0KCk7CgoJCWNvbnN0IGVycm9ycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvcnMtbGFiZWwiKTsKCgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgKGV2ZW50KSA9PiB7CgkJCWlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0ZWRJdGVtIikgIT09ICdvZmYnKSB7CgkJCQlpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGVkSXRlbSIpID09PSAiMCIgJiYKCQkJCQllcnJvcnMuaW5uZXJUZXh0ID09PSAiMSIpIHsKCQkJCQlzdG9wR2FtZSgpOwoJCQkJCWNyZWF0RmFpbFdvcmQoKTsKCQkJCQlpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dG9OZXh0RXJyb3JDaGVja2JveCIpKQoJCQkJCQljcmVhdGVOZXdHYW1lQW5kUmVkaXJlY3QoKTsKCQkJCX0KCgkJCQlpZiAoZXJyb3JzLmlubmVyVGV4dCA+IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZWxlY3RlZEl0ZW0iKSkgewoJCQkJCXN0b3BHYW1lKCk7CgkJCQkJY3JlYXRGYWlsV29yZCgpOwoJCQkJCWlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0b05leHRFcnJvckNoZWNrYm94IikpCgkJCQkJCWNyZWF0ZU5ld0dhbWVBbmRSZWRpcmVjdCgpOwoJCQkJfQoJCQl9CgkJfSk7Cgl9Cn0pOwo="},{"name":"QuickVocsStart","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://klavogonki.ru/vocs/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1589243505079,"data":{}},"enabled":true,"position":14,"file_url":"https://github.com/voidmain02/KgScripts/raw/master/scripts/QuickVocsStart.user.js","uuid":"c42f44d5-0011-4f34-9e05-dca4828abd4d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFF1aWNrVm9jc1N0YXJ0Ci8vIEBuYW1lc3BhY2UgICAgICBrbGF2b2dvbmtpCi8vIEBpbmNsdWRlICAgICAgICBodHRwKjovL2tsYXZvZ29ua2kucnUvdm9jcy8qCi8vIEBhdXRob3IgICAgICAgICBGZW5leAovLyBAdmVyc2lvbiAgICAgICAgNS4xLjAKLy8gQGRlc2NyaXB0aW9uICAgINCU0L7QsdCw0LLQu9GP0LXRgiDQvdCwINGB0YLRgNCw0L3QuNGG0YMg0YHQu9C+0LLQsNGA0Y8g0YLRgNC4INGB0YHRi9C70LrQuCDQtNC70Y8g0LHRi9GB0YLRgNC+0LPQviDRgdGC0LDRgNGC0LAg0LjQs9GA0YsuINCf0LDRgNCw0LzQtdGC0YDRiyDQt9Cw0LXQt9C00L7QsiDQtNC70Y8g0YHRgdGL0LvQvtC6INC80L7QttC90L4g0L3QsNGB0YLRgNC+0LjRgtGMCi8vIEBpY29uICAgICAgICAgICBodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLnBocD9ncmF2YXRhcl9pZD1kOWM3NGQ2YmU0OGUwMTYzZTllNDViNTRkYTBiNTYxYyZyPVBHJnM9NDgmZGVmYXVsdD1pZGVudGljb24KLy8gPT0vVXNlclNjcmlwdD09CmlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnS1RTX1F1aWNrVm9jc1N0YXJ0JykpIHsKCShmdW5jdGlvbigpIHsKCQl2YXIgcHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbDsKCQl2YXIgdm9jID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvXmh0dHBzPzpcL1wva2xhdm9nb25raS5ydVwvdm9jc1wvKFtcZF0rKS8pOwoJCWlmKCF2b2MpCgkJCXJldHVybjsKCQkKCQlmdW5jdGlvbiBnZXRJRG9mVXNlcigpIHsKCQkJdmFyIHRtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3VzZXItYmxvY2snKVswXTsKCQkJaWYoIXRtcCkKCQkJCXJldHVybiAwOwoJCQlyZXR1cm4gdG1wLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J0bicpWzBdLmhyZWYubWF0Y2goL3VcLyNcLyhbXGRdKykvKVsxXTsKCQl9CgkJCgkJZnVuY3Rpb24gZ2VuZXJhdGVMaW5rKHBhcmFtKSB7CgkJCXZhciBocmVmID0gcHJvdG9jb2wrJy8va2xhdm9nb25raS5ydS9jcmVhdGUvP3N1Ym1pdD0xJmdhbWV0eXBlPXZvYyc7CgkJCWlmKHBhcmFtLnF1YWwpCgkJCQlocmVmICs9ICcmcXVhbD1vbic7CgkJCWhyZWYgKz0gJyZ2b2M9JyArIHBhcmFtLnZvY2lkOwoJCQlocmVmICs9ICcmdHlwZT0nICsgcGFyYW0udHlwZTsKCQkJaHJlZiArPSAnJmxldmVsX2Zyb209JyArIHBhcmFtLmxldmVsX2Zyb207CgkJCWhyZWYgKz0gJyZsZXZlbF90bz0nICsgcGFyYW0ubGV2ZWxfdG87CgkJCWhyZWYgKz0gJyZ0aW1lb3V0PScgKyBwYXJhbS50aW1lb3V0OwoJCQlyZXR1cm4gaHJlZjsKCQl9CgkJCgkJZnVuY3Rpb24gZ2V0QmxvY2soYmxvY2spIHsKCQkJdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKCQkJdGQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5rcycpOwoJCQl0ZC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3BhZGRpbmctbGVmdDoxMHB4OycpOwoJCQlpZihibG9jaykgewoJCQkJdGQuaW5uZXJIVE1MID0gJzxhIGhyZWY9IicgKyBnZW5lcmF0ZUxpbmsoewoJCQkJCQkJCQkJCXZvY2lkOiB2b2NpZCwKCQkJCQkJCQkJCQl0eXBlOiAicHJhY3RpY2UiLAoJCQkJCQkJCQkJCWxldmVsX2Zyb206IDEsCgkJCQkJCQkJCQkJbGV2ZWxfdG86IDksCgkJCQkJCQkJCQkJdGltZW91dDogNSwKCQkJCQkJCQkJCQlxdWFsOiBmYWxzZQoJCQkJCQkJCQkJfSkgKyAnIj48c3Bhbj7QntC00LjQvdC+0YfQvdGL0LksIDUg0YHQtdC6PC9zcGFuPjwvYT4nOwoJCQkJdGQuaW5uZXJIVE1MICs9ICc8YSBocmVmPSInICsgZ2VuZXJhdGVMaW5rKHsKCQkJCQkJCQkJCQl2b2NpZDogdm9jaWQsCgkJCQkJCQkJCQkJdHlwZTogIm5vcm1hbCIsCgkJCQkJCQkJCQkJbGV2ZWxfZnJvbTogMSwKCQkJCQkJCQkJCQlsZXZlbF90bzogOSwKCQkJCQkJCQkJCQl0aW1lb3V0OiAxMCwKCQkJCQkJCQkJCQlxdWFsOiBmYWxzZQoJCQkJCQkJCQkJfSkgKyAnIj48c3Bhbj7QntGC0LrRgNGL0YLRi9C5LCAxMCDRgdC10Lo8L3NwYW4+PC9hPic7CgkJCQl0ZC5pbm5lckhUTUwgKz0gJzxhIGhyZWY9IicgKyBnZW5lcmF0ZUxpbmsoewoJCQkJCQkJCQkJCXZvY2lkOiB2b2NpZCwKCQkJCQkJCQkJCQl0eXBlOiAibm9ybWFsIiwKCQkJCQkJCQkJCQlsZXZlbF9mcm9tOiAxLAoJCQkJCQkJCQkJCWxldmVsX3RvOiA5LAoJCQkJCQkJCQkJCXRpbWVvdXQ6IDIwLAoJCQkJCQkJCQkJCXF1YWw6IGZhbHNlCgkJCQkJCQkJCQl9KSArICciPjxzcGFuPtCe0YLQutGA0YvRgtGL0LksIDIwINGB0LXQujwvc3Bhbj48L2E+JzsKCQkJfSBlbHNlIHsKCQkJCXRkLmlubmVySFRNTCA9ICc8YSBocmVmPSInICsgZ2VuZXJhdGVMaW5rKHsKCQkJCQkJCQkJCQl2b2NpZDogdm9jaWQsCgkJCQkJCQkJCQkJdHlwZTogInByaXZhdGUiLAoJCQkJCQkJCQkJCWxldmVsX2Zyb206IDEsCgkJCQkJCQkJCQkJbGV2ZWxfdG86IDksCgkJCQkJCQkJCQkJdGltZW91dDogMTAsCgkJCQkJCQkJCQkJcXVhbDogZmFsc2UKCQkJCQkJCQkJCX0pICsgJyI+PHNwYW4+0JTRgNGD0LbQtdGB0LrQuNC5LCAxMCDRgdC10Lo8L3NwYW4+PC9hPic7CgkJCQl0ZC5pbm5lckhUTUwgKz0gJzxhIGhyZWY9IicgKyBnZW5lcmF0ZUxpbmsoewoJCQkJCQkJCQkJCXZvY2lkOiB2b2NpZCwKCQkJCQkJCQkJCQl0eXBlOiAicHJhY3RpY2UiLAoJCQkJCQkJCQkJCWxldmVsX2Zyb206IDEsCgkJCQkJCQkJCQkJbGV2ZWxfdG86IDksCgkJCQkJCQkJCQkJdGltZW91dDogMTAsCgkJCQkJCQkJCQkJcXVhbDogdHJ1ZQoJCQkJCQkJCQkJfSkgKyAnIj48c3Bhbj7QmtCy0LDQu9C40YTQuNC60LDRhtC40Y8sIDEwINGB0LXQujwvc3Bhbj48L2E+JzsKCQkJCXRkLmlubmVySFRNTCArPSAnPGEgaHJlZj0iL3Byb2ZpbGUvJyt1c2VyaWQrJy9zdGF0cy8/Z2FtZXR5cGU9dm9jLScrdm9jaWQrJyI+PHNwYW4+0JzQvtGPINGB0YLQsNGC0LjRgdGC0LjQutCwPC9zcGFuPjwvYT4nOwoJCQl9CgkJCXJldHVybiB0ZDsKCQl9CgkJCgkJdmFyIHVzZXJpZCA9IGdldElEb2ZVc2VyKCk7CgkJdmFyIHZvY2lkID0gdm9jWzFdOwoJCXZhciBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndXNlci10aXRsZScpWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbW92ZScpWzBdLnBhcmVudE5vZGU7CgkJZWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmtzJyk7CgkJZWxlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnZXRCbG9jaygwKSwgZWxlbS5uZXh0U2libGluZyk7CgkJZWxlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnZXRCbG9jaygxKSwgZWxlbS5uZXh0U2libGluZyk7Cgl9KSgpOwoJCgl2YXIgdG1wX2VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXRtcF9lbGVtLmlkID0gJ0tUU19RdWlja1ZvY3NTdGFydCc7Cgl0bXBfZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0bXBfZWxlbSk7Cn0K"},{"name":"Wiki -> Wiki2","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["https://ru.wikipedia.org/*","https://en.wikipedia.org/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1590250699231,"data":{}},"enabled":true,"position":15,"uuid":"2e2d6043-c1f1-4bd7-8927-445f163b61b0","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBXaWtpIC0+IFdpa2kyCi8vIEBuYW1lc3BhY2UgICAgLy8KLy8gQHZlcnNpb24gICAgICAxLjAKLy8gQGRlc2NyaXB0aW9uICBBdXRvIHJlZGlyZWN0aW9uCi8vIEBhdXRob3IgICAgICAgS29yZXNlbnQKLy8gQGluY2x1ZGUgICAgICBodHRwczovL3J1Lndpa2lwZWRpYS5vcmcvKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy8qCi8vIEBydW4tYXQgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CgppZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09ICJydS53aWtpcGVkaWEub3JnIikgewogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaHR0cHM6Ly93aWtpMi5vcmcvcnUiICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoJy93aWtpJywgJycpOwp9CmlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gImVuLndpa2lwZWRpYS5vcmciKSB7CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovL3dpa2kyLm9yZy9lbiIgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnL3dpa2knLCAnJyk7Cn0="},{"name":"Resize YT To Window Size","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://*.youtube.com/*","http*://youtube.com/*","http*://*.youtu.be/*","http*://youtu.be/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1591607468246,"data":{}},"enabled":true,"position":16,"file_url":"https://openuserjs.org/install/Zren/Resize_YT_To_Window_Size.user.js","uuid":"45f7a490-74b8-4ce3-b201-33ee1aaac66c","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICBSZXNpemUgWVQgVG8gV2luZG93IFNpemUKLy8gQGRlc2NyaXB0aW9uICAgICBNb3ZlcyB0aGUgWW91VHViZSB2aWRlbyB0byB0aGUgdG9wIG9mIHRoZSB3ZWJzaXRlIGFuZCBmaWxsIHRoZSB3aW5kb3cgd2l0aCB0aGUgdmlkZW8gcGxheWVyLgovLyBAYXV0aG9yICAgICAgICAgIENocmlzIEggKFpyZW4gLyBTaGFkZSkKLy8gQGxpY2Vuc2UgICAgICAgICBNSVQKLy8gQGljb24gICAgICAgICAgICBodHRwczovL3MueXRpbWcuY29tL3l0cy9pbWcvZmF2aWNvbl8zMi12ZmxPb2dFSUQucG5nCi8vIEBob21lcGFnZVVSTCAgICAgaHR0cHM6Ly9naXRodWIuY29tL1pyZW4vUmVzaXplWW91dHViZVBsYXllclRvV2luZG93U2l6ZS8KLy8gQG5hbWVzcGFjZSAgICAgICBodHRwOi8veHNoYWRlLmNhCi8vIEB2ZXJzaW9uICAgICAgICAgMTI0Ci8vIEBpbmNsdWRlICAgICAgICAgaHR0cCo6Ly8qLnlvdXR1YmUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICBodHRwKjovL3lvdXR1YmUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICBodHRwKjovLyoueW91dHUuYmUvKgovLyBAaW5jbHVkZSAgICAgICAgIGh0dHAqOi8veW91dHUuYmUvKgovLyBAZ3JhbnQgICAgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgovLyBHaXRodWI6ICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9acmVuL1Jlc2l6ZVlvdXR1YmVQbGF5ZXJUb1dpbmRvd1NpemUKLy8gR3JlYXN5Rm9yazogICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvODExLXJlc2l6ZS15dC10by13aW5kb3ctc2l6ZQovLyBPcGVuVXNlckpTLm9yZzogIGh0dHBzOi8vb3BlbnVzZXJqcy5vcmcvc2NyaXB0cy96cmVuL1Jlc2l6ZV9ZVF9Ub19XaW5kb3dfU2l6ZQovLyBVc2Vyc2NyaXB0cy5vcmc6IGh0dHA6Ly91c2Vyc2NyaXB0cy1taXJyb3Iub3JnL3NjcmlwdHMvc2hvdy8xNTM2OTkKCihmdW5jdGlvbiAod2luZG93KSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgLy8tLS0gU2V0dGluZ3MKICAgIHZhciBwbGF5ZXJIZWlnaHQgPSAnMTAwdmgnOwoKICAgIC8vLS0tIEltcG9ydGVkIEdsb2JhbHMKICAgIC8vIHl0CiAgICAvLyB5dGNlbnRlcgogICAgLy8gaHRtbDVQYXRjaGVkIChZb3V0dWJlKykKICAgIC8vIHl0cGxheWVyCiAgICB2YXIgdXcgPSB3aW5kb3c7CgogICAgLy8tLS0gQWxyZWFkeSBMb2FkZWQ/CiAgICAvLyBHcmVhc2VNb25rZXkgbG9hZHMgdGhpcyBzY3JpcHQgdHdpY2UgZm9yIHNvbWUgcmVhc29uLgogICAgaWYgKHV3Lnl0d3ApIHJldHVybjsKCiAgICAvLy0tLSBJcyBpZnJhbWU/CiAgICBmdW5jdGlvbiBpbklmcmFtZSAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQogICAgaWYgKGluSWZyYW1lKCkpIHJldHVybjsKCiAgICAvLy0tLSBVdGlscwogICAgZnVuY3Rpb24gaXNTdHJpbmdUeXBlKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7IH0KICAgIGZ1bmN0aW9uIGlzQXJyYXlUeXBlKG9iaikgeyByZXR1cm4gb2JqIGluc3RhbmNlb2YgQXJyYXk7IH0KICAgIGZ1bmN0aW9uIGlzT2JqZWN0VHlwZShvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnOyB9CiAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnOyB9CiAgICBmdW5jdGlvbiBidWlsZFZlbmRlclByb3BlcnR5RGljdChwcm9wZXJ0eU5hbWVzLCB2YWx1ZSkgewogICAgICAgIHZhciBkID0ge307CiAgICAgICAgZm9yICh2YXIgaSBpbiBwcm9wZXJ0eU5hbWVzKQogICAgICAgICAgICBkW3Byb3BlcnR5TmFtZXNbaV1dID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIGQ7CiAgICB9CiAgICBmdW5jdGlvbiBvYnNlcnZlKHNlbGVjdG9yLCBjb25maWcsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7CiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG11dGF0aW9uKXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG11dGF0aW9uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICAgIGlmICghdGFyZ2V0KSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgY29uZmlnKTsKICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7CiAgICB9CgogICAgLy8tLS0gU3R5bGVzaGVldAogICAgdmFyIEpTU3R5bGVTaGVldCA9IGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgdGhpcy5pZCA9IGlkOwogICAgICAgIHRoaXMuc3R5bGVzaGVldCA9ICcnOwogICAgfTsKCiAgICBKU1N0eWxlU2hlZXQucHJvdG90eXBlLmJ1aWxkUnVsZSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBzdHlsZXMpIHsKICAgICAgICB2YXIgcyA9ICIiOwogICAgICAgIGZvciAodmFyIGtleSBpbiBzdHlsZXMpIHsKICAgICAgICAgICAgcyArPSAiXHQiICsga2V5ICsgIjogIiArIHN0eWxlc1trZXldICsgIjtcbiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZWxlY3RvciArICIge1xuIiArIHMgKyAifVxuIjsKICAgIH07CgogICAgSlNTdHlsZVNoZWV0LnByb3RvdHlwZS5hcHBlbmRSdWxlID0gZnVuY3Rpb24oc2VsZWN0b3IsIGssIHYpIHsKICAgICAgICBpZiAoaXNBcnJheVR5cGUoc2VsZWN0b3IpKQogICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLmpvaW4oJyxcbicpOwogICAgICAgIHZhciBuZXdTdHlsZTsKICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGspICYmICFpc1VuZGVmaW5lZCh2KSAmJiBpc1N0cmluZ1R5cGUoaykpIHsgLy8gdiBjYW4gYmUgYW55IHR5cGUgKGFzIHdlIHN0cmluZ2lmeSBpdCkuCiAgICAgICAgICAgIHZhciBkID0ge307CiAgICAgICAgICAgIGRba10gPSB2OwogICAgICAgICAgICBuZXdTdHlsZSA9IHRoaXMuYnVpbGRSdWxlKHNlbGVjdG9yLCBkKTsKICAgICAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChrKSAmJiBpc1VuZGVmaW5lZCh2KSAmJiBpc09iamVjdFR5cGUoaykpIHsKICAgICAgICAgICAgbmV3U3R5bGUgPSB0aGlzLmJ1aWxkUnVsZShzZWxlY3Rvciwgayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gSW52YWxpZCBBcmd1bWVudHMKICAgICAgICAgICAgY29uc29sZS5sb2coJ0lsbGVnYWwgYXJndW1lbnRzJywgYXJndW1lbnRzKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zdHlsZXNoZWV0ICs9IG5ld1N0eWxlOwogICAgfTsKCiAgICBKU1N0eWxlU2hlZXQuaW5qZWN0SW50b0hlYWRlciA9IGZ1bmN0aW9uKGluamVjdGVkU3R5bGVJZCwgc3R5bGVzaGVldCkgewogICAgICAgIHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbmplY3RlZFN0eWxlSWQpOwogICAgICAgIGlmICghc3R5bGVFbGVtZW50KSB7CiAgICAgICAgICAgIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHN0eWxlRWxlbWVudC50eXBlID0gJ3RleHQvY3NzJzsKICAgICAgICAgICAgc3R5bGVFbGVtZW50LmlkID0gaW5qZWN0ZWRTdHlsZUlkOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7CiAgICAgICAgfQogICAgICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHlsZXNoZWV0KSk7CiAgICB9OwoKICAgIEpTU3R5bGVTaGVldC5wcm90b3R5cGUuaW5qZWN0SW50b0hlYWRlciA9IGZ1bmN0aW9uKGluamVjdGVkU3R5bGVJZCwgc3R5bGVzaGVldCkgewogICAgICAgIEpTU3R5bGVTaGVldC5pbmplY3RJbnRvSGVhZGVyKHRoaXMuaWQsIHRoaXMuc3R5bGVzaGVldCk7CiAgICB9OwoKICAgIC8vLS0tIEhpc3RvcnkKICAgIHZhciBIaXN0b3J5RXZlbnQgPSBmdW5jdGlvbigpIHt9CiAgICBIaXN0b3J5RXZlbnQubGlzdGVuZXJzID0gW10KCiAgICBIaXN0b3J5RXZlbnQuZGlzcGF0Y2ggPSBmdW5jdGlvbihzdGF0ZSwgdGl0bGUsIHVybCkgewogICAgICB2YXIgc3RhY2sgPSB0aGlzLmxpc3RlbmVycwogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YWNrLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHN0YWNrW2ldLmNhbGwodGhpcywgc3RhdGUsIHRpdGxlLCB1cmwpCiAgICAgIH0KICAgIH0KICAgIEhpc3RvcnlFdmVudC5vblB1c2hTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlLCB0aXRsZSwgdXJsKSB7CiAgICAgICAgSGlzdG9yeUV2ZW50LmRpc3BhdGNoKHN0YXRlLCB0aXRsZSwgdXJsKQogICAgICAgIHJldHVybiBIaXN0b3J5RXZlbnQub3JpZ1B1c2hTdGF0ZS5hcHBseSh3aW5kb3cuaGlzdG9yeSwgYXJndW1lbnRzKQogICAgfQogICAgSGlzdG9yeUV2ZW50Lm9uUmVwbGFjZVN0YXRlID0gZnVuY3Rpb24oc3RhdGUsIHRpdGxlLCB1cmwpIHsKICAgICAgICBIaXN0b3J5RXZlbnQuZGlzcGF0Y2goc3RhdGUsIHRpdGxlLCB1cmwpCiAgICAgICAgcmV0dXJuIEhpc3RvcnlFdmVudC5vcmlnUmVwbGFjZVN0YXRlLmFwcGx5KHdpbmRvdy5oaXN0b3J5LCBhcmd1bWVudHMpCiAgICB9CiAgICBIaXN0b3J5RXZlbnQuaW5qZWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCFIaXN0b3J5RXZlbnQuaW5qZWN0ZWQpIHsKICAgICAgICAgICAgSGlzdG9yeUV2ZW50Lm9yaWdQdXNoU3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUKICAgICAgICAgICAgSGlzdG9yeUV2ZW50Lm9yaWdSZXBsYWNlU3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUKCiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSA9IEhpc3RvcnlFdmVudC5vblB1c2hTdGF0ZQogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUgPSBIaXN0b3J5RXZlbnQub25SZXBsYWNlU3RhdGUKICAgICAgICAgICAgSGlzdG9yeUV2ZW50LmluamVjdGVkID0gdHJ1ZQogICAgICAgIH0KICAgIH0KCiAgICBIaXN0b3J5RXZlbnQudGltZXJJZCA9IDAKICAgIEhpc3RvcnlFdmVudC5vblRpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoCiAgICAgICAgaWYgKEhpc3RvcnlFdmVudC5sYXN0UGFnZSAhPSBjdXJyZW50UGFnZSkgewogICAgICAgICAgICBIaXN0b3J5RXZlbnQuZGlzcGF0Y2goe30sIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24uaHJlZikKICAgICAgICAgICAgSGlzdG9yeUV2ZW50Lmxhc3RQYWdlID0gY3VycmVudFBhZ2UKICAgICAgICB9CiAgICB9CiAgICBIaXN0b3J5RXZlbnQuc3RhcnRUaW1lciA9IGZ1bmN0aW9uKCkgewogICAgICAgIEhpc3RvcnlFdmVudC5sYXN0UGFnZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gKICAgICAgICBIaXN0b3J5RXZlbnQudGltZXJJZCA9IHNldEludGVydmFsKEhpc3RvcnlFdmVudC5vblRpY2ssIDUwMCkKICAgIH0KICAgIEhpc3RvcnlFdmVudC5zdG9wVGltZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBjbGVhckludGVydmFsKEhpc3RvcnlFdmVudC50aW1lcklkKQogICAgfQogICAgd2luZG93Lnl0d3BIaXN0b3J5RXZlbnQgPSBIaXN0b3J5RXZlbnQKCgogICAgLy8tLS0gQ29uc3RhbnRzCiAgICB2YXIgc2NyaXB0U2hvcnROYW1lID0gJ3l0d3AnOyAvLyBZVCBXaW5kb3cgUGxheWVyCiAgICB2YXIgc2NyaXB0U3R5bGVJZCA9IHNjcmlwdFNob3J0TmFtZSArICctc3R5bGUnOyAvLyB5dHdwLXN0eWxlCiAgICB2YXIgc2NyaXB0Qm9keUNsYXNzSWQgPSBzY3JpcHRTaG9ydE5hbWUgKyAnLXdpbmRvdy1wbGF5ZXInOyAvLyAueXR3cC13aW5kb3ctcGxheWVyCiAgICB2YXIgdmlld2luZ1ZpZGVvQ2xhc3NJZCA9IHNjcmlwdFNob3J0TmFtZSArICctdmlld2luZy12aWRlbyc7IC8vIC55dHdwLXZpZXdpbmctdmlkZW8KICAgIHZhciB0b3BPZlBhZ2VDbGFzc0lkID0gc2NyaXB0U2hvcnROYW1lICsgJy1zY3JvbGx0b3AnOyAvLyAueXR3cC1zY3JvbGx0b3AKCiAgICB2YXIgc2NyaXB0SHRtbFNlbGVjdG9yID0gJ2h0bWw6bm90KFtmdWxsc2NyZWVuPSJ0cnVlIl0pJzsKICAgIHZhciBzY3JpcHRCb2R5U2VsZWN0b3IgPSAnYm9keS4nICsgc2NyaXB0Qm9keUNsYXNzSWQgKyAnOm5vdCguZW5oYW5jZXItZm9yLXlvdXR1YmUtcGlubmVkLXBsYXllciknOyAvLyBib2R5Lnl0d3Atd2luZG93LXBsYXllcgogICAgdmFyIHNjcmlwdFNlbGVjdG9yID0gc2NyaXB0SHRtbFNlbGVjdG9yICsgJyAnICsgc2NyaXB0Qm9keVNlbGVjdG9yOwoKICAgIHZhciB2aWRlb0NvbnRhaW5lcklkID0gJ3BsYXllcic7CiAgICB2YXIgdmlkZW9Db250YWluZXJQbGFjZW1hcmtlcklkID0gc2NyaXB0U2hvcnROYW1lICsgJy1wbGFjZW1hcmtlcic7IC8vIHl0d3AtcGxhY2VtYXJrZXIKCiAgICB2YXIgdHJhbnNpdGlvblByb3BlcnRpZXMgPSBbInRyYW5zaXRpb24iLCAiLW1zLXRyYW5zaXRpb24iLCAiLW1vei10cmFuc2l0aW9uIiwgIi13ZWJraXQtdHJhbnNpdGlvbiIsICItby10cmFuc2l0aW9uIl07CiAgICB2YXIgdHJhbnNmb3JtUHJvcGVydGllcyA9IFsidHJhbnNmb3JtIiwgIi1tcy10cmFuc2Zvcm0iLCAiLW1vei10cmFuc2Zvcm0iLCAiLXdlYmtpdC10cmFuc2Zvcm0iLCAiLW8tdHJhbnNmb3JtIl07CgogICAgLy8tLS0gWVRXUAogICAgdmFyIHl0d3AgPSB1dy55dHdwID0gewogICAgICAgIHNjcmlwdFNob3J0TmFtZTogc2NyaXB0U2hvcnROYW1lLCAvLyBZVCBXaW5kb3cgUGxheWVyCiAgICAgICAgbG9nXzogZnVuY3Rpb24obG9nZ2VyLCBhcmdzKSB7IGxvZ2dlci5hcHBseShjb25zb2xlLCBbJ1snICsgdGhpcy5zY3JpcHRTaG9ydE5hbWUgKyAnXSAnXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykpKTsgcmV0dXJuIDE7IH0sCiAgICAgICAgbG9nOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubG9nXyhjb25zb2xlLmxvZywgYXJndW1lbnRzKTsgfSwKICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxvZ18oY29uc29sZS5lcnJvciwgYXJndW1lbnRzKTsgfSwKCiAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLAogICAgICAgIHBhZ2VSZWFkeTogZmFsc2UsCiAgICAgICAgaXNXYXRjaFBhZ2U6IGZhbHNlLAogICAgfTsKCiAgICB5dHdwLmlzV2F0Y2hVcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgaWYgKCF1cmwpCiAgICAgICAgICAgIHVybCA9IHV3LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgaWYgKHVybC5tYXRjaCgvaHR0cHM/OlwvXC8od3d3XC4pP3lvdXR1YmUuY29tXC8oY3xjaGFubmVsfHVzZXIpXC9bXlwvXStcL2xpdmUvKSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigneXRkLWJyb3dzZScpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVybC5tYXRjaCgvaHR0cHM/OlwvXC8od3d3XC4pP3lvdXR1YmUuY29tXC93YXRjaFw/Lyk7CiAgICB9OwoKICAgIHl0d3AuZW50ZXJUaGVhdGVyTW9kZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIHl0d3AubG9nKCdlbnRlclRoZWF0ZXJNb2RlJykKICAgICAgICB2YXIgd2F0Y2hFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigneXRkLXdhdGNoOm5vdChbaGlkZGVuXSknKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtd2F0Y2gtZmxleHk6bm90KFtoaWRkZW5dKScpCiAgICAgICAgaWYgKHdhdGNoRWxlbWVudCkgewogICAgICAgICAgICBpZiAoIXdhdGNoRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3RoZWF0ZXInKSkgewogICAgICAgICAgICAgICAgdmFyIHNpemVCdXR0b24gPSB3YXRjaEVsZW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uLnl0cC1zaXplLWJ1dHRvbicpCiAgICAgICAgICAgICAgICBpZiAoc2l6ZUJ1dHRvbikgewogICAgICAgICAgICAgICAgICAgIHNpemVCdXR0b24uY2xpY2soKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHdhdGNoRWxlbWVudC5jYW5GaXRUaGVhdGVyXyA9IHRydWUgLy8gV2hlbiBpdCdzIHRvbyBzbWFsbCwgaXQgZGlzYWJsZXMgdGhlIHRoZWF0ZXIgbW9kZS4KICAgICAgICB9IGVsc2UgaWYgKHdhdGNoRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlLndhdGNoJykpIHsKICAgICAgICAgICAgaWYgKCF3YXRjaEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3YXRjaC1zdGFnZS1tb2RlJykpIHsKICAgICAgICAgICAgICAgIHZhciBzaXplQnV0dG9uID0gd2F0Y2hFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi55dHAtc2l6ZS1idXR0b24nKQogICAgICAgICAgICAgICAgaWYgKHNpemVCdXR0b24pIHsKICAgICAgICAgICAgICAgICAgICBzaXplQnV0dG9uLmNsaWNrKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHl0d3AuZW50ZXJUaGVhdGVyTW9kZSgpOwogICAgdXcuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgeXR3cC5lbnRlclRoZWF0ZXJNb2RlKTsKCiAgICB5dHdwLmluaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICB5dHdwLmxvZygnaW5pdCcpOwogICAgICAgIGlmICgheXR3cC5pbml0aWFsaXplZCkgewogICAgICAgICAgICB5dHdwLmlzV2F0Y2hQYWdlID0geXR3cC5pc1dhdGNoVXJsKCk7CiAgICAgICAgICAgIGlmICh5dHdwLmlzV2F0Y2hQYWdlKSB7CiAgICAgICAgICAgICAgICB5dHdwLnJlbW92ZVNlYXJjaEF1dG9mb2N1cygpOwogICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzY3JpcHRTdHlsZUlkKSkgewogICAgICAgICAgICAgICAgICAgIHl0d3AuZXZlbnQuaW5pdFN0eWxlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB5dHdwLmluaXRTY3JvbGxlcigpOwogICAgICAgICAgICAgICAgeXR3cC5pbml0aWFsaXplZCA9IHRydWU7CiAgICAgICAgICAgICAgICB5dHdwLnBhZ2VSZWFkeSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHl0d3AuZXZlbnQub25XYXRjaEluaXQoKTsKICAgICAgICBpZiAoeXR3cC5pc1dhdGNoUGFnZSkgewogICAgICAgICAgICB5dHdwLmh0bWw1UGxheWVyRml4KCk7CiAgICAgICAgfQogICAgfQoKICAgIHl0d3AuaW5pdFNjcm9sbGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gUmVnaXN0ZXIgbGlzdGVuZXIgJiBDYWxsIGl0IG5vdy4KICAgICAgICB1dy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB5dHdwLm9uU2Nyb2xsLCBmYWxzZSk7CiAgICAgICAgdXcuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgeXR3cC5vblNjcm9sbCwgZmFsc2UpOwogICAgICAgIHl0d3Aub25TY3JvbGwoKTsKICAgIH0KCiAgICB5dHdwLm9uU2Nyb2xsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCiAgICAgICAgLy8gdG9wT2ZQYWdlQ2xhc3NJZAogICAgICAgIGlmICh5dHdwLmlzV2F0Y2hQYWdlICYmIHV3LnNjcm9sbFkgPT0gMCkgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodG9wT2ZQYWdlQ2xhc3NJZCk7CiAgICAgICAgICAgIC8vdmFyIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3ZpZV9wbGF5ZXInKTsKICAgICAgICAgICAgLy9pZiAocGxheWVyKQogICAgICAgICAgICAvLyAgICBwbGF5ZXIuZm9jdXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUodG9wT2ZQYWdlQ2xhc3NJZCk7CiAgICAgICAgfQoKICAgICAgICAvLyB2aWV3aW5nVmlkZW9DbGFzc0lkCiAgICAgICAgaWYgKHl0d3AuaXNXYXRjaFBhZ2UgJiYgdXcuc2Nyb2xsWSA8PSB2aWV3cG9ydEhlaWdodCkgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodmlld2luZ1ZpZGVvQ2xhc3NJZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKHZpZXdpbmdWaWRlb0NsYXNzSWQpOwogICAgICAgIH0KICAgIH0KCiAgICB5dHdwLmV2ZW50ID0gewogICAgICAgIGluaXRTdHlsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHl0d3AubG9nKCdpbml0U3R5bGUnKTsKICAgICAgICAgICAgeXR3cC5zdHlsZSA9IG5ldyBKU1N0eWxlU2hlZXQoc2NyaXB0U3R5bGVJZCk7CiAgICAgICAgICAgIHl0d3AuZXZlbnQuYnVpbGRTdHlsZXNoZWV0KCk7CiAgICAgICAgICAgIC8vIER1cGxpY2F0ZSBzdHlsZXNoZWV0IHRhcmdldGluZyBkYXRhLXNwZi1uYW1lIGlmIGVuYWJsZWQuCiAgICAgICAgICAgIGlmICh1dy5zcGYpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc2NyaXB0Qm9keVNlbGVjdG9yOwogICAgICAgICAgICAgICAgc2NyaXB0Qm9keVNlbGVjdG9yID0gJ2JvZHlbZGF0YS1zcGYtbmFtZT0id2F0Y2giXSc7CiAgICAgICAgICAgICAgICBzY3JpcHRTZWxlY3RvciA9IHNjcmlwdEh0bWxTZWxlY3RvciArICcgJyArIHNjcmlwdEJvZHlTZWxlY3RvcgogICAgICAgICAgICAgICAgeXR3cC5ldmVudC5idWlsZFN0eWxlc2hlZXQoKTsKICAgICAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZSgnYm9keVtkYXRhLXNwZi1uYW1lPSJ3YXRjaCJdOm5vdCgueXR3cC13aW5kb3ctcGxheWVyKSAjbWFzdGhlYWQtcG9zaXRpb25lcicsICB7CiAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywKICAgICAgICAgICAgICAgICAgICAndG9wJzogcGxheWVySGVpZ2h0ICsgJyAhaW1wb3J0YW50JwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgeXR3cC5zdHlsZS5pbmplY3RJbnRvSGVhZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBidWlsZFN0eWxlc2hlZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB5dHdwLmxvZygnYnVpbGRTdHlsZXNoZWV0Jyk7CiAgICAgICAgICAgIC8vLS0tIEJyb3dzZXIgU2Nyb2xsYmFyCiAgICAgICAgICAgIC8vIENocm9tZS9XZWJraXQKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdEJvZHlTZWxlY3RvciArICc6Oi13ZWJraXQtc2Nyb2xsYmFyJywgewogICAgICAgICAgICAgICAgJ3dpZHRoJzogJzAnLAogICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcwJywKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIEZpcmVmb3gvR2Vja28KICAgICAgICAgICAgLy8gUmVxdWlyZXMgYWJvdXQ6Y29uZmlnIGZsYWcgdG8gYmUgdG9nZ2xlZCBhcyBvZiBGaXJlRm94IHY2MwogICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vWnJlbi9SZXNpemVZb3V0dWJlUGxheWVyVG9XaW5kb3dTaXplL2lzc3Vlcy80MgogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoJ2h0bWwnLCB7CiAgICAgICAgICAgICAgICAnc2Nyb2xsYmFyLXdpZHRoJzogJ25vbmUnLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vLS0tIFZpZGVvIFBsYXllcgogICAgICAgICAgICB2YXIgZDsKICAgICAgICAgICAgZCA9IGJ1aWxkVmVuZGVyUHJvcGVydHlEaWN0KHRyYW5zaXRpb25Qcm9wZXJ0aWVzLCAnbGVmdCAwcyBsaW5lYXIsIHBhZGRpbmctbGVmdCAwcyBsaW5lYXInKTsKICAgICAgICAgICAgZFsncGFkZGluZyddID0gJzAgIWltcG9ydGFudCc7CiAgICAgICAgICAgIGRbJ21hcmdpbiddID0gJzAgIWltcG9ydGFudCc7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShbCiAgICAgICAgICAgICAgICBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnICNwbGF5ZXInLAogICAgICAgICAgICAgICAgc2NyaXB0Qm9keVNlbGVjdG9yICsgJy55dGNlbnRlci1zaXRlLWNlbnRlci55dGNlbnRlci1ub24tcmVzaXplLnl0Y2VudGVyLWd1aWRlLXZpc2libGUgI3BsYXllcicsCiAgICAgICAgICAgICAgICBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnLmx0ci55dGNlbnRlci1zaXRlLWNlbnRlci55dGNlbnRlci1ub24tcmVzaXplLnl0Y2VudGVyLWd1aWRlLXZpc2libGUuZ3VpZGUtY29sbGFwc2VkICNwbGF5ZXInLAogICAgICAgICAgICAgICAgc2NyaXB0Qm9keVNlbGVjdG9yICsgJy5sdHIueXRjZW50ZXItc2l0ZS1jZW50ZXIueXRjZW50ZXItbm9uLXJlc2l6ZS55dGNlbnRlci1ndWlkZS12aXNpYmxlLmd1aWRlLWNvbGxhcHNlZCAjcGxheWVyLWxlZ2FjeScsCiAgICAgICAgICAgICAgICBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnLmx0ci55dGNlbnRlci1zaXRlLWNlbnRlci55dGNlbnRlci1ub24tcmVzaXplLnl0Y2VudGVyLWd1aWRlLXZpc2libGUuZ3VpZGUtY29sbGFwc2VkICN3YXRjaDctbWFpbi1jb250YWluZXInLAogICAgICAgICAgICBdLCBkKTsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgZCA9IGJ1aWxkVmVuZGVyUHJvcGVydHlEaWN0KHRyYW5zaXRpb25Qcm9wZXJ0aWVzLCAnd2lkdGggMHMgbGluZWFyLCBsZWZ0IDBzIGxpbmVhcicpOwoKICAgICAgICAgICAgLy8gQnVnZml4IGZvciBGaXJlZm94CiAgICAgICAgICAgIC8vIFBhcnRzIG9mIHRoZSBoZWFkZXIgKHNlYXJjaCBib3gpIGFyZSBoaWRkZW4gdW5kZXIgdGhlIHBsYXllci4KICAgICAgICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IHNlZW0gdG8gYmUgdXNpbmcgdGhlIGZpeGVkIGhlYWRlcitndWlkZSB5ZXQuCiAgICAgICAgICAgIGRbJ2Zsb2F0J10gPSAnaW5pdGlhbCc7CgogICAgICAgICAgICAvLyBTa2lubnkgbW9kZQogICAgICAgICAgICBkWydsZWZ0J10gPSAwOwogICAgICAgICAgICBkWydtYXJnaW4tbGVmdCddID0gMDsKCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRCb2R5U2VsZWN0b3IgKyAnICNwbGF5ZXItYXBpJywgZCk7CgogICAgICAgICAgICAvLyBUaGVhdHJlIG1vZGUKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdEJvZHlTZWxlY3RvciArICcgLndhdGNoLXN0YWdlLW1vZGUgI3BsYXllciAucGxheWVyLWFwaScsIHsKICAgICAgICAgICAgICAgICdsZWZ0JzogJ2luaXRpYWwgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiAnaW5pdGlhbCAhaW1wb3J0YW50JywKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBIaWRlIHRoZSBjaW5lbWEvd2lkZSBtb2RlIGJ1dHRvbiBzaW5jZSBpdCdzIHVzZWxlc3MuCiAgICAgICAgICAgIC8veXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdEJvZHlTZWxlY3RvciArICcgI21vdmllX3BsYXllciAueXRwLXNpemUtYnV0dG9uJywgJ2Rpc3BsYXknLCAnbm9uZScpOwoKICAgICAgICAgICAgLy8gIWltcG9ydGFudCBpcyBtYWlubHkgZm9yIHNpbXBsaWNpdHksIGJ1dCBpcyBuZWVkZWQgdG8gb3ZlcnJpZGUgdGhlICFpbXBvcnRhbnQgc3R5bGluZyB3aGVuIHRoZSBHdWlkZSBpcyBvcGVuIGR1ZSB0bzoKICAgICAgICAgICAgLy8gLnNpZGViYXItY29sbGFwc2VkICN3YXRjaDctdmlkZW8sIC5zaWRlYmFyLWNvbGxhcHNlZCAjd2F0Y2g3LW1haW4sIC5zaWRlYmFyLWNvbGxhcHNlZCAud2F0Y2g3LXBsYXlsaXN0IHsgd2lkdGg6IDk0NXB4IWltcG9ydGFudDsgfQogICAgICAgICAgICAvLyBBbHNvLCBZb3V0dWJlIENlbnRlciByZXNpemVzICNwbGF5ZXIgYXQgZWxlbWVudCBsZXZlbC4KICAgICAgICAgICAgLy8gRG9uJ3QgcmVzaXplIGlmIFlvdXR1YmUrJ3MgaHRtbC5mbG9hdGVyIGlzIGRldGVjdGVkLgogICAgICAgICAgICAvLyBEb250JyByZXNpemUgaWYgWW91dHViZSsgKElyaWRpdW0vTWF0ZXJpYWwpJ3MgaHRtbC5pcmktYWx3YXlzLXZpc2libGUgaXMgZGV0ZWN0ZWQuCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZSgKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICBzY3JpcHRTZWxlY3RvciArICcgI3BsYXllcicsCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0U2VsZWN0b3IgKyAnICNwbGF5ZXItYXBpJywKICAgICAgICAgICAgICAgICAgICBzY3JpcHRIdG1sU2VsZWN0b3IgKyAnOm5vdCguZmxvYXRlcik6bm90KC5pcmktYWx3YXlzLXZpc2libGUpICcgKyBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnICNtb3ZpZV9wbGF5ZXInLAogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyLW1vbGUtY29udGFpbmVyJywKICAgICAgICAgICAgICAgICAgICBzY3JpcHRIdG1sU2VsZWN0b3IgKyAnOm5vdCguZmxvYXRlcik6bm90KC5pcmktYWx3YXlzLXZpc2libGUpICcgKyBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnIC5odG1sNS12aWRlby1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgIHNjcmlwdEh0bWxTZWxlY3RvciArICc6bm90KC5mbG9hdGVyKTpub3QoLmlyaS1hbHdheXMtdmlzaWJsZSkgJyArIHNjcmlwdEJvZHlTZWxlY3RvciArICcgLmh0bWw1LW1haW4tdmlkZW8nLAogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyB5dGQtd2F0Y2gtZmxleHlbdGhlYXRlcl0gI3BsYXllci10aGVhdGVyLWNvbnRhaW5lci55dGQtd2F0Y2gtZmxleHknLAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnMTAwJSAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICAgICAnbWluLXdpZHRoJzogJzEwMCUgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAgICAgJ21heC13aWR0aCc6ICcxMDAlICFpbXBvcnRhbnQnLAogICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiBwbGF5ZXJIZWlnaHQgKyAnICFpbXBvcnRhbnQnLAogICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogcGxheWVySGVpZ2h0ICsgJyAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICAgICAnbWF4LWhlaWdodCc6IHBsYXllckhlaWdodCArICcgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CgogICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyJywKICAgICAgICAgICAgICAgICAgICBzY3JpcHRTZWxlY3RvciArICcgLmh0bWw1LW1haW4tdmlkZW8nLAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAndG9wJzogJzAgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAgICAgJ3JpZ2h0JzogJzAgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAgICAgJ2JvdHRvbSc6ICcwICFpbXBvcnRhbnQnLAogICAgICAgICAgICAgICAgICAgICdsZWZ0JzogJzAgIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIC8vIFJlc2l6ZSAjcGxheWVyLXVuYXZhaWxhYmxlLCAjcGxheWVyLWFwaQogICAgICAgICAgICAvLyBVc2luZyBtaW4vbWF4IHdpZHRoL2hlaWdodCB3aWxsIGtlZXAKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyIC5wbGF5ZXItd2lkdGgnLCAnd2lkdGgnLCAnMTAwJSAhaW1wb3J0YW50Jyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgI3BsYXllciAucGxheWVyLWhlaWdodCcsICdoZWlnaHQnLCAnMTAwJSAhaW1wb3J0YW50Jyk7CgogICAgICAgICAgICAvLyBGaXggdmlkZW8gb3ZlcmxheXMKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKFsKICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyAuaHRtbDUtdmlkZW8tcGxheWVyIC5hZC1jb250YWluZXItc2luZ2xlLW1lZGlhLWVsZW1lbnQtYW5ub3RhdGlvbnMnLCAvLyBBZAogICAgICAgICAgICAgICAgc2NyaXB0U2VsZWN0b3IgKyAnIC5odG1sNS12aWRlby1wbGF5ZXIgLnl0cC11cG5leHQnLCAvLyBBdXRvcGxheSBOZXh0IFZpZGVvCiAgICAgICAgICAgIF0sICd0b3AnLCAnMCcpOwoKCiAgICAgICAgICAgIC8vLS0tIE1vdmUgVmlkZW8gUGxheWVyCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgI3BsYXllcicsIHsKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsCiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IHRvcDowOyBsZWZ0OiAwOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yLCB7IC8vIGJvZHkKICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogcGxheWVySGVpZ2h0LAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEZpeCB0aGUgdG9wIHJpZ2h0IGF2YXRhciBidXR0b24KICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyBidXR0b24ueXRwLWJ1dHRvbi55dHAtY2FyZHMtYnV0dG9uJywgJ3RvcCcsICcwJyk7CgoKICAgICAgICAgICAgLy8tLS0gU2lkZWJhcgogICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRyYW5zaXRpb24gZGVsYXkgYXMgeW91IGNhbiBzZWUgaXQgbW92aW5nIG9uIHBhZ2UgbG9hZC4KICAgICAgICAgICAgZCA9IGJ1aWxkVmVuZGVyUHJvcGVydHlEaWN0KHRyYW5zaXRpb25Qcm9wZXJ0aWVzLCAnbWFyZ2luLXRvcCAwcyBsaW5lYXIsIHBhZGRpbmctdG9wIDBzIGxpbmVhcicpOwogICAgICAgICAgICBkWydtYXJnaW4tdG9wJ10gPSAnMCAhaW1wb3J0YW50JzsKICAgICAgICAgICAgZFsndG9wJ10gPSAnMCAhaW1wb3J0YW50JzsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjd2F0Y2g3LXNpZGViYXInLCBkKTsKCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcuY2FyZGlmaWVkLXBhZ2UgI3dhdGNoNy1zaWRlYmFyLWNvbnRlbnRzJywgJ3BhZGRpbmctdG9wJywgJzAnKTsKCiAgICAgICAgICAgIC8vLS0tIEFic29sdXRlbHkgcG9zaXRpb24gdGhlIGZpeGVkIGhlYWRlci4KICAgICAgICAgICAgLy8gTWFzdGhlYWQKICAgICAgICAgICAgZCA9IGJ1aWxkVmVuZGVyUHJvcGVydHlEaWN0KHRyYW5zaXRpb25Qcm9wZXJ0aWVzLCAndG9wIDBzIGxpbmVhciAhaW1wb3J0YW50Jyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcuaGlkZS1oZWFkZXItdHJhbnNpdGlvbiAjbWFzdGhlYWQtcG9zaXRpb25lcicsIGQpOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnLicgKyB2aWV3aW5nVmlkZW9DbGFzc0lkICsgJyAjbWFzdGhlYWQtcG9zaXRpb25lcicsIHsKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsCiAgICAgICAgICAgICAgICAndG9wJzogcGxheWVySGVpZ2h0ICsgJyAhaW1wb3J0YW50JwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gTG93ZXIgbWFzdGhlYWQgYmVsb3cgWW91dHViZSsncyBodG1sLmZsb2F0ZXIKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKCdodG1sLmZsb2F0ZXIgJyArIHNjcmlwdEJvZHlTZWxlY3RvciArICcuJyArIHZpZXdpbmdWaWRlb0NsYXNzSWQgKyAnICNtYXN0aGVhZC1wb3NpdGlvbmVyJywgewogICAgICAgICAgICAgICAgJ3otaW5kZXgnOiAnNScsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBBdXRvY29tcGxldGUgcG9wdXAKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAuc2JkZF9hJywgewogICAgICAgICAgICAgICAgJ3RvcCc6ICc1NnB4JywKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcuJyArIHZpZXdpbmdWaWRlb0NsYXNzSWQgKyAnIC5zYmRkX2EnLCB7CiAgICAgICAgICAgICAgICAndG9wJzogJ2NhbGMoJyArIHBsYXllckhlaWdodCArICcgKyA1NnB4KSAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZSAhaW1wb3J0YW50JywKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBHdWlkZQogICAgICAgICAgICAvLyBXaGVuIHdhdGNoaW5nIHRoZSB2aWRlbywgd2UgbmVlZCB0byBsaW5lIGl0IHVwIHdpdGggdGhlIG1hc3RoZWFkLgogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnLicgKyB2aWV3aW5nVmlkZW9DbGFzc0lkICsgJyAjYXBwYmFyLWd1aWRlLW1lbnUnLCB7CiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbml0aWFsJywKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsCiAgICAgICAgICAgICAgICAndG9wJzogJzEwMCUgIWltcG9ydGFudCcgLy8gTWFzdGhlYWQgaGVpZ2h0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnLicgKyB2aWV3aW5nVmlkZW9DbGFzc0lkICsgJyAjcGFnZS53YXRjaCAjZ3VpZGUnLCB7CiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbml0aWFsJywKICAgICAgICAgICAgICAgICdtYXJnaW4nOiAnMCcsCiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnaW5pdGlhbCcKICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgLy8tLS0KICAgICAgICAgICAgLy8gTWluaVBsYXllci1CYXIKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjbWluaXBsYXllci1iYXIgI3BsYXllcicsIHsKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyAjbWluaXBsYXllci1iYXIgI3BsYXllcicsCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0U2VsZWN0b3IgKyAnICNtaW5pcGxheWVyLWJhciAjcGxheWVyLWFwaScsCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0SHRtbFNlbGVjdG9yICsgJzpub3QoLmZsb2F0ZXIpOm5vdCguaXJpLWFsd2F5cy12aXNpYmxlKSAnICsgc2NyaXB0Qm9keVNlbGVjdG9yICsgJyAjbWluaXBsYXllci1iYXIgI21vdmllX3BsYXllcicsCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0U2VsZWN0b3IgKyAnICNwbGF5ZXItbW9sZS1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJzpub3QoLmZsb2F0ZXIpOm5vdCguaXJpLWFsd2F5cy12aXNpYmxlKSAnICsgc2NyaXB0Qm9keVNlbGVjdG9yICsgJyAjbWluaXBsYXllci1iYXIgLmh0bWw1LXZpZGVvLWNvbnRhaW5lcicsCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0U2VsZWN0b3IgKyAnOm5vdCguZmxvYXRlcik6bm90KC5pcmktYWx3YXlzLXZpc2libGUpICcgKyBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnICNtaW5pcGxheWVyLWJhciAuaHRtbDUtbWFpbi12aWRlbycsCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICcyNTJweCAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICAgICAnbWluLXdpZHRoJzogJzI1MnB4ICFpbXBvcnRhbnQnLAogICAgICAgICAgICAgICAgICAgICdtYXgtd2lkdGgnOiAnMjUycHggIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxNDJweCAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcxNDJweCAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgICAgICAnbWF4LWhlaWdodCc6ICcxNDJweCAhaW1wb3J0YW50JywKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgLy8gT3ZlcnJpZGUgaW5saW5lIHN0eWxlIChjYXVzZWQgYnkgYSBKUyBhbmltYXRpb24pIHRoYXQgYnJlYWtzIHRoZSBtaW5pcGxheWVyIHZpZGVvCiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9acmVuL1Jlc2l6ZVlvdXR1YmVQbGF5ZXJUb1dpbmRvd1NpemUvaXNzdWVzLzQxI2lzc3VlY29tbWVudC00Mzk3MTAxMzAKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKCcudmlkZW8tc3RyZWFtLmh0bWw1LW1haW4tdmlkZW8nLCB7CiAgICAgICAgICAgICAgICAndG9wJzogJzAgIWltcG9ydGFudCcsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8tLS0KICAgICAgICAgICAgLy8gSGlkZSBTY3JvbGxiYXJzCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcuJyArIHRvcE9mUGFnZUNsYXNzSWQsICdvdmVyZmxvdy14JywgJ2hpZGRlbicpOwoKCiAgICAgICAgICAgIC8vLS0tIEZpeCBPdGhlciBQb3NzaWJsZSBTdHlsZSBJc3N1ZXMKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjcGxhY2Vob2xkZXItcGxheWVyJywgJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnICN3YXRjaC1zaWRlYmFyLXNwYWNlcicsICdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAuc2tpcC1uYXYnLCAnZGlzcGxheScsICdub25lJyk7CgogICAgICAgICAgICAvLy0tLSBXaGl0ZXNwYWNlIExlZnRvdmVyIEZyb20gTW92aW5nIFRoZSBWaWRlbwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnICNwYWdlLndhdGNoJywgJ3BhZGRpbmctdG9wJywgJzAnKTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAucGxheWVyLWJyYW5kZWQtYmFubmVyJywgJ2hlaWdodCcsICcwJyk7CgogICAgICAgICAgICAvLy0tLSBZb3V0dWJlKyBDb21wYXRpYmxpdHkKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjYm9keS1jb250YWluZXInLCAncG9zaXRpb24nLCAnc3RhdGljJyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRIdG1sU2VsZWN0b3IgKyAnLnBhcnRfc3RhdGljX3NpemU6bm90KC5jb250ZW50LXNuYXAtd2lkdGgtc2tpbm55LW1vZGUpICcgKyBzY3JpcHRCb2R5U2VsZWN0b3IgKyAnIC53YXRjaC1ub24tc3RhZ2UtbW9kZSAjcGxheWVyLXBsYXlsaXN0JywgJ3dpZHRoJywgJzEwNjZweCcpOwoKICAgICAgICAgICAgLy8tLS0gUGxheWxpc3QgQmFyCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShbCiAgICAgICAgICAgICAgICBzY3JpcHRTZWxlY3RvciArICcgI3BsYWNlaG9sZGVyLXBsYXlsaXN0JywKICAgICAgICAgICAgICAgIHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyIC5wbGF5ZXItaGVpZ2h0I3dhdGNoLWFwcGJhci1wbGF5bGlzdCcsCiAgICAgICAgICAgIF0sIHsKICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnNTQwcHggIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAnbWF4LWhlaWdodCc6ICc1NDBweCAhaW1wb3J0YW50JywKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBkID0gYnVpbGRWZW5kZXJQcm9wZXJ0eURpY3QodHJhbnNpdGlvblByb3BlcnRpZXMsICd0cmFuc2Zvcm0gMHMgbGluZWFyJyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgI3dhdGNoLWFwcGJhci1wbGF5bGlzdCcsIGQpOwogICAgICAgICAgICBkID0gYnVpbGRWZW5kZXJQcm9wZXJ0eURpY3QodHJhbnNmb3JtUHJvcGVydGllcywgJ3RyYW5zbGF0ZVkoMHB4KScpOwogICAgICAgICAgICBkWydtYXJnaW4tbGVmdCddID0gJzAnOwogICAgICAgICAgICBkWyd0b3AnXSA9ICdjYWxjKCcgKyBwbGF5ZXJIZWlnaHQgKyAnICsgNjBweCknOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnICNwbGF5ZXIgLnBsYXllci1oZWlnaHQjd2F0Y2gtYXBwYmFyLXBsYXlsaXN0JywgZCk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgLnBsYXlsaXN0LXZpZGVvcy1saXN0JywgewogICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAnNDcwcHggIWltcG9ydGFudCcsCiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2luaXRpYWwgIWltcG9ydGFudCcsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gT2xkIGxheW91dCBgJmRpc2FibGVfcG9seW1lcj10cnVlYAogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnICNwbGF5ZXIgLnBsYXllci1oZWlnaHQjd2F0Y2gtYXBwYmFyLXBsYXlsaXN0JywgewogICAgICAgICAgICAgICAgJ2xlZnQnOiAnY2FsYygoMTAwdncgLSAxMDY2cHgpLzIgKyA2NDBweCArIDEwcHgpJywKICAgICAgICAgICAgICAgICd3aWR0aCc6ICc0MTZweCcsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB5dHdwLnN0eWxlLnN0eWxlc2hlZXQgKz0gJ0BtZWRpYSBzY3JlZW4gYW5kIChtaW4taGVpZ2h0OiA2MzBweCkgYW5kIChtaW4td2lkdGg6IDEyOTRweCkge1xuJzsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyIC5wbGF5ZXItaGVpZ2h0I3dhdGNoLWFwcGJhci1wbGF5bGlzdCcsIHsKICAgICAgICAgICAgICAgICdsZWZ0JzogJ2NhbGMoKDEwMHZ3IC0gMTI4MHB4KS8yICsgODU0cHggKyAxMHB4KScsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB5dHdwLnN0eWxlLnN0eWxlc2hlZXQgKz0gJ31cbiBAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxNzIwcHgpIGFuZCAobWluLWhlaWdodDo5ODBweCkge1xuJzsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJyAjcGxheWVyIC5wbGF5ZXItaGVpZ2h0I3dhdGNoLWFwcGJhci1wbGF5bGlzdCcsIHsKICAgICAgICAgICAgICAgICdsZWZ0JzogJ2NhbGMoKDEwMHZ3IC0gMTcwNnB4KS8yICsgMTI4MHB4ICsgMTBweCknLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5zdHlsZXNoZWV0ICs9ICd9XG4nOwoKICAgICAgICAgICAgLy8tLS0KICAgICAgICAgICAgLy8gTWF0ZXJpYWwgVUkKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKHNjcmlwdFNlbGVjdG9yICsgJy55dHdwLXNjcm9sbHRvcCAjZXh0cmEtYnV0dG9ucycsICdkaXNwbGF5JywgJ25vbmUgIWltcG9ydGFudCcpOwogICAgICAgICAgICAvLyB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoJ2JvZHkgPiAjcGxheWVyOm5vdCgueXRkLXdhdGNoKScsICdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgLy8geXR3cC5zdHlsZS5hcHBlbmRSdWxlKCdib2R5Lnl0d3Atdmlld2luZy12aWRlbyAjY29udGVudDpub3QoYXBwLWhlYWRlci1sYXlvdXQpIHl0ZC1wYWdlLW1hbmFnZXInLCAnbWFyZ2luLXRvcCcsICcwICFpbXBvcnRhbnQnKTsKICAgICAgICAgICAgLy8geXR3cC5zdHlsZS5hcHBlbmRSdWxlKCcueXRkLXdhdGNoLTAgI2NvbnRlbnQtc2VwYXJhdG9yLnl0ZC13YXRjaCcsICdtYXJnaW4tdG9wJywgJzAnKTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKCd5dGQtYXBwJywgJ3Bvc2l0aW9uJywgJ3N0YXRpYyAhaW1wb3J0YW50Jyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZSgneXRkLXdhdGNoICN0b3AnLCAnbWFyZ2luLXRvcCcsICc3MXB4ICFpbXBvcnRhbnQnKTsgLy8gNTZweCAodG9wbmF2IGhlaWdodCkgKyAxNXB4IChtYXJnaW4pCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZSgneXRkLXdhdGNoICNjb250YWluZXInLCAnbWFyZ2luLXRvcCcsICcwICFpbXBvcnRhbnQnKTsKICAgICAgICAgICAgeXR3cC5zdHlsZS5hcHBlbmRSdWxlKCd5dGQtd2F0Y2ggI2NvbnRlbnQtc2VwYXJhdG9yJywgJ21hcmdpbi10b3AnLCAnMCAhaW1wb3J0YW50Jyk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcueXR3cC12aWV3aW5nLXZpZGVvIHl0ZC1hcHAgI21hc3RoZWFkLWNvbnRhaW5lci55dGQtYXBwJywgewogICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywKICAgICAgICAgICAgICAgICd0b3AnOiBwbGF5ZXJIZWlnaHQsCiAgICAgICAgICAgICAgICAnei1pbmRleCc6IDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnLnl0d3Atdmlld2luZy12aWRlbyB5dGQtd2F0Y2ggI21hc3RoZWFkLXBvc2l0aW9uZXInLCB7CiAgICAgICAgICAgICAgICAndG9wJzogcGxheWVySGVpZ2h0ICsgJyAhaW1wb3J0YW50JywKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgLnl0cC1jdWVkLXRodW1ibmFpbC1vdmVybGF5JywgJ3otaW5kZXgnLCAnMTAnKTsKCiAgICAgICAgICAgIC8vLS0tCiAgICAgICAgICAgIC8vIEZsZXh5IFVJCiAgICAgICAgICAgIHl0d3Auc3R5bGUuYXBwZW5kUnVsZShzY3JpcHRTZWxlY3RvciArICcgeXRkLXdhdGNoLWZsZXh5W3RoZWF0ZXJdICNwbGF5ZXItdGhlYXRlci1jb250YWluZXIueXRkLXdhdGNoLWZsZXh5JywgewogICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywKICAgICAgICAgICAgICAgICd0b3AnOiAnMCcsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnIHl0ZC13YXRjaC1mbGV4eScsICdwYWRkaW5nLXRvcCcsICc3MXB4Jyk7IC8vIDU2cHggKHRvcG5hdiBoZWlnaHQpICsgMTVweCAobWFyZ2luKQogICAgICAgICAgICB5dHdwLnN0eWxlLmFwcGVuZFJ1bGUoc2NyaXB0U2VsZWN0b3IgKyAnICNlcnJvci1zY3JlZW4nLCAnei1pbmRleCcsICcxMScpOwogICAgICAgIH0sCiAgICAgICAgb25XYXRjaEluaXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB5dHdwLmxvZygnb25XYXRjaEluaXQnKTsKICAgICAgICAgICAgaWYgKCF5dHdwLmluaXRpYWxpemVkKSByZXR1cm47CiAgICAgICAgICAgIGlmICh5dHdwLnBhZ2VSZWFkeSkgcmV0dXJuOwoKICAgICAgICAgICAgeXR3cC5ldmVudC5hZGRCb2R5Q2xhc3MoKTsKICAgICAgICAgICAgeXR3cC5wYWdlUmVhZHkgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgb25EaXNwb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgeXR3cC5sb2coJ29uRGlzcG9zZScpOwogICAgICAgICAgICB5dHdwLmluaXRpYWxpemVkID0gZmFsc2U7CiAgICAgICAgICAgIHl0d3AucGFnZVJlYWR5ID0gZmFsc2U7CiAgICAgICAgICAgIHl0d3AuaXNXYXRjaFBhZ2UgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIGFkZEJvZHlDbGFzczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIEluc2VydCBDU1MgSW50byB0aGUgYm9keSBzbyBwZW9wbGUgY2FuIHN0eWxlIGFyb3VuZCB0aGUgZWZmZWN0cyBvZiB0aGlzIHNjcmlwdC4KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKHNjcmlwdEJvZHlDbGFzc0lkKTsKICAgICAgICAgICAgeXR3cC5sb2coJ0FwcGxpZWQgJyArIHNjcmlwdEJvZHlTZWxlY3Rvcik7CiAgICAgICAgfSwKICAgIH07CgogICAgeXR3cC5odG1sNVBsYXllckZpeCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHl0d3AubG9nKCdodG1sNVBsYXllckZpeCcpOwogICAgICAgIHJldHVybjsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKCF1dy55dGNlbnRlciAvLyBZb3V0dWJlIENlbnRlcgogICAgICAgICAgICAgICAgJiYgIXV3Lmh0bWw1UGF0Y2hlZCAvLyBZb3V0dWJlKwogICAgICAgICAgICAgICAgJiYgKCF5dHdwLmh0bWw1LmFwcCkKICAgICAgICAgICAgICAgICYmICh1dy55dHBsYXllciAmJiB1dy55dHBsYXllci5jb25maWcpCiAgICAgICAgICAgICAgICAmJiAodXcueXQgJiYgdXcueXQucGxheWVyICYmIHV3Lnl0LnBsYXllci5BcHBsaWNhdGlvbiAmJiB1dy55dC5wbGF5ZXIuQXBwbGljYXRpb24uY3JlYXRlKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHl0d3AuaHRtbDUuYXBwID0geXR3cC5odG1sNS5nZXRQbGF5ZXJJbnN0YW5jZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB5dHdwLmh0bWw1LnVwZGF0ZSgpOwogICAgICAgICAgICB5dHdwLmh0bWw1LmF1dG9oaWRlQ29udHJvbHMoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHl0d3AuZXJyb3IoZSk7CiAgICAgICAgfQogICAgfQoKICAgIHl0d3AuZml4TWFzdGhlYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICB5dHdwLmxvZygnZml4TWFzdGhlYWQnKTsKICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFzdGhlYWQtcG9zaXRpb25lci1oZWlnaHQtb2Zmc2V0Jyk7CiAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgIHl0d3AuZml4TWFzdGhlYWRFbGVtZW50KGVsKTsKICAgICAgICB9CiAgICB9CiAgICB5dHdwLmZpeE1hc3RoZWFkRWxlbWVudCA9IGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgeXR3cC5sb2coJ2ZpeE1hc3RoZWFkRWxlbWVudCcsIGVsKTsKICAgICAgICBpZiAoZWwuc3R5bGUuaGVpZ2h0KSB7IC8vICE9ICIiCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICIiCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwYmFyLWd1aWRlLW1lbnUnKS5zdHlsZS5tYXJnaW5Ub3AgPSAiIjsKICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgfQogICAgfQoKICAgIEpTU3R5bGVTaGVldC5pbmplY3RJbnRvSGVhZGVyKHNjcmlwdFN0eWxlSWQgKyAnLWZvY3VzZml4JywgJ2lucHV0I3NlYXJjaFthdXRvZm9jdXNdIHsgZGlzcGxheTogbm9uZTsgfScpOwogICAgeXR3cC5yZW1vdmVTZWFyY2hBdXRvZm9jdXMgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0I3NlYXJjaCcpOwogICAgICAgIC8vIHl0d3AubG9nKCdyZW1vdmVTZWFyY2hBdXRvZm9jdXMnLCBlKQogICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgIGUucmVtb3ZlQXR0cmlidXRlKCdhdXRvZm9jdXMnKQogICAgICAgIH0KICAgIH0KCiAgICB5dHdwLnJlZ2lzdGVyTWFzdGhlYWRGaXggPSBmdW5jdGlvbigpIHsKICAgICAgICB5dHdwLmxvZygncmVnaXN0ZXJNYXN0aGVhZEZpeCcpOwogICAgICAgIC8vIEZpeCB0aGUgb2Zmc2V0IHdoZW4gY2xvc2luZyB0aGUgU2hhcmUgd2lkZ2V0IChlbGVtZW50LnN0eWxlLmhlaWdodCA9IH4yNzVweCkuCgogICAgICAgIG9ic2VydmUoJyNtYXN0aGVhZC1wb3NpdGlvbmVyLWhlaWdodC1vZmZzZXQnLCB7CiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgICAgfSwgZnVuY3Rpb24obXV0YXRpb24pIHsKICAgICAgICAgICAgY29uc29sZS5sb2cobXV0YXRpb24udHlwZSwgbXV0YXRpb24pCiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnc3R5bGUnKSB7CiAgICAgICAgICAgICAgICB2YXIgZWwgPSBtdXRhdGlvbi50YXJnZXQ7CiAgICAgICAgICAgICAgICBpZiAoZWwuc3R5bGUuaGVpZ2h0KSB7IC8vICE9ICIiCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAiIgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwYmFyLWd1aWRlLW1lbnUnKS5zdHlsZS5tYXJnaW5Ub3AgPSAiIjsKICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICAvLy0tLSBNYXRlcmlhbCBVSQogICAgeXR3cC5tYXRlcmlhbFBhZ2VUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgeXR3cC5sb2coJ21hdGVyaWFsUGFnZVRyYW5zaXRpb24nKQogICAgICAgIHl0d3AuaW5pdCgpOwoKICAgICAgICBpZiAoeXR3cC5pc1dhdGNoVXJsKCkpIHsKICAgICAgICAgICAgeXR3cC5yZW1vdmVTZWFyY2hBdXRvZm9jdXMoKTsKICAgICAgICAgICAgeXR3cC5ldmVudC5hZGRCb2R5Q2xhc3MoKTsKICAgICAgICAgICAgLy8gaWYgKCF5dHdwLmh0bWw1LmFwcCkgewogICAgICAgICAgICBpZiAoIXl0d3AuaW5pdGlhbGl6ZWQpIHsKICAgICAgICAgICAgICAgIHl0d3AubG9nKCdtYXRlcmlhbFBhZ2VUcmFuc2l0aW9uICF5dHdwLmh0bWw1LmFwcCcsIHl0d3AuaHRtbDUuYXBwKQogICAgICAgICAgICAgICAgc2V0VGltZW91dCh5dHdwLm1hdGVyaWFsUGFnZVRyYW5zaXRpb24sIDEwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIHZhciBwbGF5ZXJBcGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyLWFwaScpCiAgICAgICAgICAgICBpZiAocGxheWVyQXBpKSB7CiAgICAgICAgICAgICAgICAgcGxheWVyQXBpLmNsaWNrKCkKICAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB5dHdwLmV2ZW50Lm9uRGlzcG9zZSgpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoc2NyaXB0Qm9keUNsYXNzSWQpOwogICAgICAgIH0KICAgICAgICB5dHdwLm9uU2Nyb2xsKCk7CiAgICAgICAgeXR3cC5maXhNYXN0aGVhZCgpOwogICAgICAgIHl0d3AuYXR0ZW1wdFRvVXBkYXRlUGxheWVyKCk7CiAgICB9OwoKICAgIC8vLS0tIExpc3RlbmVycwogICAgeXR3cC5yZWdpc3Rlckxpc3RlbmVycyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHl0d3AucmVnaXN0ZXJNYXRlcmlhbExpc3RlbmVycygpOwogICAgICAgIHl0d3AucmVnaXN0ZXJNYXN0aGVhZEZpeCgpOwogICAgfTsKCiAgICB5dHdwLnJlZ2lzdGVyTWF0ZXJpYWxMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBGb3IgTWF0ZXJpYWwgVUkKICAgICAgICBIaXN0b3J5RXZlbnQubGlzdGVuZXJzLnB1c2goeXR3cC5tYXRlcmlhbFBhZ2VUcmFuc2l0aW9uKTsKICAgICAgICBIaXN0b3J5RXZlbnQuc3RhcnRUaW1lcigpOwogICAgICAgIC8vIEhpc3RvcnlFdmVudC5pbmplY3QoKTsKICAgICAgICAvLyBIaXN0b3J5RXZlbnQubGlzdGVuZXJzLnB1c2goY29uc29sZS5sb2cuYmluZChjb25zb2xlKSk7CiAgICB9OwoKICAgIHl0d3AubWFpbiA9IGZ1bmN0aW9uKCkgewogICAgICAgIHl0d3AucmVnaXN0ZXJMaXN0ZW5lcnMoKTsKICAgICAgICB5dHdwLmluaXQoKTsKICAgICAgICB5dHdwLmZpeE1hc3RoZWFkKCk7CiAgICB9OwoKICAgIHl0d3AubWFpbigpOwoKICAgIC8vIHl0d3AudXBkYXRlUGxheWVyVGltZXJJZCA9IDA7CiAgICB5dHdwLnVwZGF0ZVBsYXllckF0dGVtcHRzID0gLTE7CiAgICB5dHdwLnVwZGF0ZVBsYXllck1heEF0dGVtcHRzID0gMTUwOyAvLyA2MGZwcyA9IDIuNXNlYwogICAgeXR3cC5hdHRlbXB0VG9VcGRhdGVQbGF5ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBjb25zb2xlLmxvZygneXR3cC5hdHRlbXB0VG9VcGRhdGVQbGF5ZXInKQogICAgICAgIGlmICgwIDw9IHl0d3AudXBkYXRlUGxheWVyQXR0ZW1wdHMgJiYgeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cyA8IHl0d3AudXBkYXRlUGxheWVyTWF4QXR0ZW1wdHMpIHsKICAgICAgICAgICAgeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cyA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cyA9IDA7CiAgICAgICAgICAgIHl0d3AuYXR0ZW1wdFRvVXBkYXRlUGxheWVyVGljaygpOwogICAgICAgIH0KICAgICAgICAvLyBzZXRUaW1lb3V0KHl0d3AudXBkYXRlUGxheWVyLCAxMDAwMCk7IC8vLyBKdXN0IGluIGNhc2UgaXQncyBub3QgY2F1Z2h0CiAgICB9CiAgICB5dHdwLmF0dGVtcHRUb1VwZGF0ZVBsYXllclRpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICBjb25zb2xlLmxvZygneXR3cC5hdHRlbXB0VG9VcGRhdGVQbGF5ZXJUaWNrJywgeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cykKICAgICAgICBpZiAoeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cyA8IHl0d3AudXBkYXRlUGxheWVyTWF4QXR0ZW1wdHMpIHsKICAgICAgICAgICAgeXR3cC51cGRhdGVQbGF5ZXJBdHRlbXB0cyArPSAxOwogICAgICAgICAgICB5dHdwLnVwZGF0ZVBsYXllcigpOwogICAgICAgICAgICAvLyB5dHdwLnVwZGF0ZVBsYXllclRpbWVySWQgPSBzZXRUaW1lb3V0KHl0d3AuYXR0ZW1wdFRvVXBkYXRlUGxheWVyVGljaywgMjAwKTsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHl0d3AuYXR0ZW1wdFRvVXBkYXRlUGxheWVyVGljayk7CiAgICAgICAgfQogICAgfQoKICAgIHl0d3AudXBkYXRlUGxheWVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgeXR3cC5yZW1vdmVTZWFyY2hBdXRvZm9jdXMoKTsKICAgICAgICB5dHdwLmVudGVyVGhlYXRlck1vZGUoKTsKICAgIH0KCiAgICB5dHdwLm1hdGVyaWFsUGFnZVRyYW5zaXRpb24oKQogICAgc2V0SW50ZXJ2YWwoeXR3cC51cGRhdGVQbGF5ZXIsIDI1MDApOwoKfSkod2luZG93KTsK"}]}